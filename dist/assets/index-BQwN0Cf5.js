(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))u(h);new MutationObserver(h=>{for(const d of h)if(d.type==="childList")for(const x of d.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&u(x)}).observe(document,{childList:!0,subtree:!0});function a(h){const d={};return h.integrity&&(d.integrity=h.integrity),h.referrerPolicy&&(d.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?d.credentials="include":h.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function u(h){if(h.ep)return;h.ep=!0;const d=a(h);fetch(h.href,d)}})();/**
* @vue/shared v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function oo(r){const s=Object.create(null);for(const a of r.split(","))s[a]=1;return a=>a in s}const Qe={},Pr=[],Tn=()=>{},ll=()=>!1,Qi=r=>r.charCodeAt(0)===111&&r.charCodeAt(1)===110&&(r.charCodeAt(2)>122||r.charCodeAt(2)<97),ao=r=>r.startsWith("onUpdate:"),Rt=Object.assign,lo=(r,s)=>{const a=r.indexOf(s);a>-1&&r.splice(a,1)},i1=Object.prototype.hasOwnProperty,Ge=(r,s)=>i1.call(r,s),Ee=Array.isArray,Fr=r=>Ai(r)==="[object Map]",qi=r=>Ai(r)==="[object Set]",Yo=r=>Ai(r)==="[object Date]",be=r=>typeof r=="function",xt=r=>typeof r=="string",_n=r=>typeof r=="symbol",tt=r=>r!==null&&typeof r=="object",cl=r=>(tt(r)||be(r))&&be(r.then)&&be(r.catch),ul=Object.prototype.toString,Ai=r=>ul.call(r),s1=r=>Ai(r).slice(8,-1),fl=r=>Ai(r)==="[object Object]",co=r=>xt(r)&&r!=="NaN"&&r[0]!=="-"&&""+parseInt(r,10)===r,ni=oo(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ji=r=>{const s=Object.create(null);return a=>s[a]||(s[a]=r(a))},o1=/-\w/g,nr=Ji(r=>r.replace(o1,s=>s.slice(1).toUpperCase())),a1=/\B([A-Z])/g,Er=Ji(r=>r.replace(a1,"-$1").toLowerCase()),hl=Ji(r=>r.charAt(0).toUpperCase()+r.slice(1)),Os=Ji(r=>r?`on${hl(r)}`:""),er=(r,s)=>!Object.is(r,s),Li=(r,...s)=>{for(let a=0;a<r.length;a++)r[a](...s)},dl=(r,s,a,u=!1)=>{Object.defineProperty(r,s,{configurable:!0,enumerable:!1,writable:u,value:a})},$i=r=>{const s=parseFloat(r);return isNaN(s)?r:s};let Xo;const es=()=>Xo||(Xo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function uo(r){if(Ee(r)){const s={};for(let a=0;a<r.length;a++){const u=r[a],h=xt(u)?f1(u):uo(u);if(h)for(const d in h)s[d]=h[d]}return s}else if(xt(r)||tt(r))return r}const l1=/;(?![^(]*\))/g,c1=/:([^]+)/,u1=/\/\*[^]*?\*\//g;function f1(r){const s={};return r.replace(u1,"").split(l1).forEach(a=>{if(a){const u=a.split(c1);u.length>1&&(s[u[0].trim()]=u[1].trim())}}),s}function ts(r){let s="";if(xt(r))s=r;else if(Ee(r))for(let a=0;a<r.length;a++){const u=ts(r[a]);u&&(s+=u+" ")}else if(tt(r))for(const a in r)r[a]&&(s+=a+" ");return s.trim()}const h1="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",d1=oo(h1);function gl(r){return!!r||r===""}function g1(r,s){if(r.length!==s.length)return!1;let a=!0;for(let u=0;a&&u<r.length;u++)a=ns(r[u],s[u]);return a}function ns(r,s){if(r===s)return!0;let a=Yo(r),u=Yo(s);if(a||u)return a&&u?r.getTime()===s.getTime():!1;if(a=_n(r),u=_n(s),a||u)return r===s;if(a=Ee(r),u=Ee(s),a||u)return a&&u?g1(r,s):!1;if(a=tt(r),u=tt(s),a||u){if(!a||!u)return!1;const h=Object.keys(r).length,d=Object.keys(s).length;if(h!==d)return!1;for(const x in r){const m=r.hasOwnProperty(x),I=s.hasOwnProperty(x);if(m&&!I||!m&&I||!ns(r[x],s[x]))return!1}}return String(r)===String(s)}function x1(r,s){return r.findIndex(a=>ns(a,s))}const xl=r=>!!(r&&r.__v_isRef===!0),Mn=r=>xt(r)?r:r==null?"":Ee(r)||tt(r)&&(r.toString===ul||!be(r.toString))?xl(r)?Mn(r.value):JSON.stringify(r,pl,2):String(r),pl=(r,s)=>xl(s)?pl(r,s.value):Fr(s)?{[`Map(${s.size})`]:[...s.entries()].reduce((a,[u,h],d)=>(a[Ms(u,d)+" =>"]=h,a),{})}:qi(s)?{[`Set(${s.size})`]:[...s.values()].map(a=>Ms(a))}:_n(s)?Ms(s):tt(s)&&!Ee(s)&&!fl(s)?String(s):s,Ms=(r,s="")=>{var a;return _n(r)?`Symbol(${(a=r.description)!=null?a:s})`:r};/**
* @vue/reactivity v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Gt;class p1{constructor(s=!1){this.detached=s,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Gt,!s&&Gt&&(this.index=(Gt.scopes||(Gt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let s,a;if(this.scopes)for(s=0,a=this.scopes.length;s<a;s++)this.scopes[s].pause();for(s=0,a=this.effects.length;s<a;s++)this.effects[s].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let s,a;if(this.scopes)for(s=0,a=this.scopes.length;s<a;s++)this.scopes[s].resume();for(s=0,a=this.effects.length;s<a;s++)this.effects[s].resume()}}run(s){if(this._active){const a=Gt;try{return Gt=this,s()}finally{Gt=a}}}on(){++this._on===1&&(this.prevScope=Gt,Gt=this)}off(){this._on>0&&--this._on===0&&(Gt=this.prevScope,this.prevScope=void 0)}stop(s){if(this._active){this._active=!1;let a,u;for(a=0,u=this.effects.length;a<u;a++)this.effects[a].stop();for(this.effects.length=0,a=0,u=this.cleanups.length;a<u;a++)this.cleanups[a]();if(this.cleanups.length=0,this.scopes){for(a=0,u=this.scopes.length;a<u;a++)this.scopes[a].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!s){const h=this.parent.scopes.pop();h&&h!==this&&(this.parent.scopes[this.index]=h,h.index=this.index)}this.parent=void 0}}}function w1(){return Gt}let et;const Rs=new WeakSet;class wl{constructor(s){this.fn=s,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Gt&&Gt.active&&Gt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Rs.has(this)&&(Rs.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Cl(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Zo(this),ml(this);const s=et,a=fn;et=this,fn=!0;try{return this.fn()}finally{El(this),et=s,fn=a,this.flags&=-3}}stop(){if(this.flags&1){for(let s=this.deps;s;s=s.nextDep)go(s);this.deps=this.depsTail=void 0,Zo(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Rs.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){js(this)&&this.run()}get dirty(){return js(this)}}let Al=0,ri,ii;function Cl(r,s=!1){if(r.flags|=8,s){r.next=ii,ii=r;return}r.next=ri,ri=r}function fo(){Al++}function ho(){if(--Al>0)return;if(ii){let s=ii;for(ii=void 0;s;){const a=s.next;s.next=void 0,s.flags&=-9,s=a}}let r;for(;ri;){let s=ri;for(ri=void 0;s;){const a=s.next;if(s.next=void 0,s.flags&=-9,s.flags&1)try{s.trigger()}catch(u){r||(r=u)}s=a}}if(r)throw r}function ml(r){for(let s=r.deps;s;s=s.nextDep)s.version=-1,s.prevActiveLink=s.dep.activeLink,s.dep.activeLink=s}function El(r){let s,a=r.depsTail,u=a;for(;u;){const h=u.prevDep;u.version===-1?(u===a&&(a=h),go(u),A1(u)):s=u,u.dep.activeLink=u.prevActiveLink,u.prevActiveLink=void 0,u=h}r.deps=s,r.depsTail=a}function js(r){for(let s=r.deps;s;s=s.nextDep)if(s.dep.version!==s.version||s.dep.computed&&(Il(s.dep.computed)||s.dep.version!==s.version))return!0;return!!r._dirty}function Il(r){if(r.flags&4&&!(r.flags&16)||(r.flags&=-17,r.globalVersion===ui)||(r.globalVersion=ui,!r.isSSR&&r.flags&128&&(!r.deps&&!r._dirty||!js(r))))return;r.flags|=2;const s=r.dep,a=et,u=fn;et=r,fn=!0;try{ml(r);const h=r.fn(r._value);(s.version===0||er(h,r._value))&&(r.flags|=128,r._value=h,s.version++)}catch(h){throw s.version++,h}finally{et=a,fn=u,El(r),r.flags&=-3}}function go(r,s=!1){const{dep:a,prevSub:u,nextSub:h}=r;if(u&&(u.nextSub=h,r.prevSub=void 0),h&&(h.prevSub=u,r.nextSub=void 0),a.subs===r&&(a.subs=u,!u&&a.computed)){a.computed.flags&=-5;for(let d=a.computed.deps;d;d=d.nextDep)go(d,!0)}!s&&!--a.sc&&a.map&&a.map.delete(a.key)}function A1(r){const{prevDep:s,nextDep:a}=r;s&&(s.nextDep=a,r.prevDep=void 0),a&&(a.prevDep=s,r.nextDep=void 0)}let fn=!0;const yl=[];function Pn(){yl.push(fn),fn=!1}function Fn(){const r=yl.pop();fn=r===void 0?!0:r}function Zo(r){const{cleanup:s}=r;if(r.cleanup=void 0,s){const a=et;et=void 0;try{s()}finally{et=a}}}let ui=0;class C1{constructor(s,a){this.sub=s,this.dep=a,this.version=a.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class xo{constructor(s){this.computed=s,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(s){if(!et||!fn||et===this.computed)return;let a=this.activeLink;if(a===void 0||a.sub!==et)a=this.activeLink=new C1(et,this),et.deps?(a.prevDep=et.depsTail,et.depsTail.nextDep=a,et.depsTail=a):et.deps=et.depsTail=a,bl(a);else if(a.version===-1&&(a.version=this.version,a.nextDep)){const u=a.nextDep;u.prevDep=a.prevDep,a.prevDep&&(a.prevDep.nextDep=u),a.prevDep=et.depsTail,a.nextDep=void 0,et.depsTail.nextDep=a,et.depsTail=a,et.deps===a&&(et.deps=u)}return a}trigger(s){this.version++,ui++,this.notify(s)}notify(s){fo();try{for(let a=this.subs;a;a=a.prevSub)a.sub.notify()&&a.sub.dep.notify()}finally{ho()}}}function bl(r){if(r.dep.sc++,r.sub.flags&4){const s=r.dep.computed;if(s&&!r.dep.subs){s.flags|=20;for(let u=s.deps;u;u=u.nextDep)bl(u)}const a=r.dep.subs;a!==r&&(r.prevSub=a,a&&(a.nextSub=r)),r.dep.subs=r}}const Gs=new WeakMap,wr=Symbol(""),Ws=Symbol(""),fi=Symbol("");function Nt(r,s,a){if(fn&&et){let u=Gs.get(r);u||Gs.set(r,u=new Map);let h=u.get(a);h||(u.set(a,h=new xo),h.map=u,h.key=a),h.track()}}function Dn(r,s,a,u,h,d){const x=Gs.get(r);if(!x){ui++;return}const m=I=>{I&&I.trigger()};if(fo(),s==="clear")x.forEach(m);else{const I=Ee(r),w=I&&co(a);if(I&&a==="length"){const y=Number(u);x.forEach((T,U)=>{(U==="length"||U===fi||!_n(U)&&U>=y)&&m(T)})}else switch((a!==void 0||x.has(void 0))&&m(x.get(a)),w&&m(x.get(fi)),s){case"add":I?w&&m(x.get("length")):(m(x.get(wr)),Fr(r)&&m(x.get(Ws)));break;case"delete":I||(m(x.get(wr)),Fr(r)&&m(x.get(Ws)));break;case"set":Fr(r)&&m(x.get(wr));break}}ho()}function Rr(r){const s=je(r);return s===r?s:(Nt(s,"iterate",fi),sn(r)?s:s.map(hn))}function rs(r){return Nt(r=je(r),"iterate",fi),r}function Qn(r,s){return kn(r)?Vr(Ar(r)?hn(s):s):hn(s)}const m1={__proto__:null,[Symbol.iterator](){return Ds(this,Symbol.iterator,r=>Qn(this,r))},concat(...r){return Rr(this).concat(...r.map(s=>Ee(s)?Rr(s):s))},entries(){return Ds(this,"entries",r=>(r[1]=Qn(this,r[1]),r))},every(r,s){return On(this,"every",r,s,void 0,arguments)},filter(r,s){return On(this,"filter",r,s,a=>a.map(u=>Qn(this,u)),arguments)},find(r,s){return On(this,"find",r,s,a=>Qn(this,a),arguments)},findIndex(r,s){return On(this,"findIndex",r,s,void 0,arguments)},findLast(r,s){return On(this,"findLast",r,s,a=>Qn(this,a),arguments)},findLastIndex(r,s){return On(this,"findLastIndex",r,s,void 0,arguments)},forEach(r,s){return On(this,"forEach",r,s,void 0,arguments)},includes(...r){return vs(this,"includes",r)},indexOf(...r){return vs(this,"indexOf",r)},join(r){return Rr(this).join(r)},lastIndexOf(...r){return vs(this,"lastIndexOf",r)},map(r,s){return On(this,"map",r,s,void 0,arguments)},pop(){return Jr(this,"pop")},push(...r){return Jr(this,"push",r)},reduce(r,...s){return Ko(this,"reduce",r,s)},reduceRight(r,...s){return Ko(this,"reduceRight",r,s)},shift(){return Jr(this,"shift")},some(r,s){return On(this,"some",r,s,void 0,arguments)},splice(...r){return Jr(this,"splice",r)},toReversed(){return Rr(this).toReversed()},toSorted(r){return Rr(this).toSorted(r)},toSpliced(...r){return Rr(this).toSpliced(...r)},unshift(...r){return Jr(this,"unshift",r)},values(){return Ds(this,"values",r=>Qn(this,r))}};function Ds(r,s,a){const u=rs(r),h=u[s]();return u!==r&&!sn(r)&&(h._next=h.next,h.next=()=>{const d=h._next();return d.done||(d.value=a(d.value)),d}),h}const E1=Array.prototype;function On(r,s,a,u,h,d){const x=rs(r),m=x!==r&&!sn(r),I=x[s];if(I!==E1[s]){const T=I.apply(r,d);return m?hn(T):T}let w=a;x!==r&&(m?w=function(T,U){return a.call(this,Qn(r,T),U,r)}:a.length>2&&(w=function(T,U){return a.call(this,T,U,r)}));const y=I.call(x,w,u);return m&&h?h(y):y}function Ko(r,s,a,u){const h=rs(r);let d=a;return h!==r&&(sn(r)?a.length>3&&(d=function(x,m,I){return a.call(this,x,m,I,r)}):d=function(x,m,I){return a.call(this,x,Qn(r,m),I,r)}),h[s](d,...u)}function vs(r,s,a){const u=je(r);Nt(u,"iterate",fi);const h=u[s](...a);return(h===-1||h===!1)&&Co(a[0])?(a[0]=je(a[0]),u[s](...a)):h}function Jr(r,s,a=[]){Pn(),fo();const u=je(r)[s].apply(r,a);return ho(),Fn(),u}const I1=oo("__proto__,__v_isRef,__isVue"),Sl=new Set(Object.getOwnPropertyNames(Symbol).filter(r=>r!=="arguments"&&r!=="caller").map(r=>Symbol[r]).filter(_n));function y1(r){_n(r)||(r=String(r));const s=je(this);return Nt(s,"has",r),s.hasOwnProperty(r)}class Tl{constructor(s=!1,a=!1){this._isReadonly=s,this._isShallow=a}get(s,a,u){if(a==="__v_skip")return s.__v_skip;const h=this._isReadonly,d=this._isShallow;if(a==="__v_isReactive")return!h;if(a==="__v_isReadonly")return h;if(a==="__v_isShallow")return d;if(a==="__v_raw")return u===(h?d?v1:Ml:d?Ol:Nl).get(s)||Object.getPrototypeOf(s)===Object.getPrototypeOf(u)?s:void 0;const x=Ee(s);if(!h){let I;if(x&&(I=m1[a]))return I;if(a==="hasOwnProperty")return y1}const m=Reflect.get(s,a,Mt(s)?s:u);if((_n(a)?Sl.has(a):I1(a))||(h||Nt(s,"get",a),d))return m;if(Mt(m)){const I=x&&co(a)?m:m.value;return h&&tt(I)?Ys(I):I}return tt(m)?h?Ys(m):wo(m):m}}class _l extends Tl{constructor(s=!1){super(!1,s)}set(s,a,u,h){let d=s[a];const x=Ee(s)&&co(a);if(!this._isShallow){const w=kn(d);if(!sn(u)&&!kn(u)&&(d=je(d),u=je(u)),!x&&Mt(d)&&!Mt(u))return w||(d.value=u),!0}const m=x?Number(a)<s.length:Ge(s,a),I=Reflect.set(s,a,u,Mt(s)?s:h);return s===je(h)&&(m?er(u,d)&&Dn(s,"set",a,u):Dn(s,"add",a,u)),I}deleteProperty(s,a){const u=Ge(s,a);s[a];const h=Reflect.deleteProperty(s,a);return h&&u&&Dn(s,"delete",a,void 0),h}has(s,a){const u=Reflect.has(s,a);return(!_n(a)||!Sl.has(a))&&Nt(s,"has",a),u}ownKeys(s){return Nt(s,"iterate",Ee(s)?"length":wr),Reflect.ownKeys(s)}}class b1 extends Tl{constructor(s=!1){super(!0,s)}set(s,a){return!0}deleteProperty(s,a){return!0}}const S1=new _l,T1=new b1,_1=new _l(!0);const zs=r=>r,Ri=r=>Reflect.getPrototypeOf(r);function N1(r,s,a){return function(...u){const h=this.__v_raw,d=je(h),x=Fr(d),m=r==="entries"||r===Symbol.iterator&&x,I=r==="keys"&&x,w=h[r](...u),y=a?zs:s?Vr:hn;return!s&&Nt(d,"iterate",I?Ws:wr),Rt(Object.create(w),{next(){const{value:T,done:U}=w.next();return U?{value:T,done:U}:{value:m?[y(T[0]),y(T[1])]:y(T),done:U}}})}}function Di(r){return function(...s){return r==="delete"?!1:r==="clear"?void 0:this}}function O1(r,s){const a={get(h){const d=this.__v_raw,x=je(d),m=je(h);r||(er(h,m)&&Nt(x,"get",h),Nt(x,"get",m));const{has:I}=Ri(x),w=s?zs:r?Vr:hn;if(I.call(x,h))return w(d.get(h));if(I.call(x,m))return w(d.get(m));d!==x&&d.get(h)},get size(){const h=this.__v_raw;return!r&&Nt(je(h),"iterate",wr),h.size},has(h){const d=this.__v_raw,x=je(d),m=je(h);return r||(er(h,m)&&Nt(x,"has",h),Nt(x,"has",m)),h===m?d.has(h):d.has(h)||d.has(m)},forEach(h,d){const x=this,m=x.__v_raw,I=je(m),w=s?zs:r?Vr:hn;return!r&&Nt(I,"iterate",wr),m.forEach((y,T)=>h.call(d,w(y),w(T),x))}};return Rt(a,r?{add:Di("add"),set:Di("set"),delete:Di("delete"),clear:Di("clear")}:{add(h){!s&&!sn(h)&&!kn(h)&&(h=je(h));const d=je(this);return Ri(d).has.call(d,h)||(d.add(h),Dn(d,"add",h,h)),this},set(h,d){!s&&!sn(d)&&!kn(d)&&(d=je(d));const x=je(this),{has:m,get:I}=Ri(x);let w=m.call(x,h);w||(h=je(h),w=m.call(x,h));const y=I.call(x,h);return x.set(h,d),w?er(d,y)&&Dn(x,"set",h,d):Dn(x,"add",h,d),this},delete(h){const d=je(this),{has:x,get:m}=Ri(d);let I=x.call(d,h);I||(h=je(h),I=x.call(d,h)),m&&m.call(d,h);const w=d.delete(h);return I&&Dn(d,"delete",h,void 0),w},clear(){const h=je(this),d=h.size!==0,x=h.clear();return d&&Dn(h,"clear",void 0,void 0),x}}),["keys","values","entries",Symbol.iterator].forEach(h=>{a[h]=N1(h,r,s)}),a}function po(r,s){const a=O1(r,s);return(u,h,d)=>h==="__v_isReactive"?!r:h==="__v_isReadonly"?r:h==="__v_raw"?u:Reflect.get(Ge(a,h)&&h in u?a:u,h,d)}const M1={get:po(!1,!1)},R1={get:po(!1,!0)},D1={get:po(!0,!1)};const Nl=new WeakMap,Ol=new WeakMap,Ml=new WeakMap,v1=new WeakMap;function L1(r){switch(r){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function B1(r){return r.__v_skip||!Object.isExtensible(r)?0:L1(s1(r))}function wo(r){return kn(r)?r:Ao(r,!1,S1,M1,Nl)}function P1(r){return Ao(r,!1,_1,R1,Ol)}function Ys(r){return Ao(r,!0,T1,D1,Ml)}function Ao(r,s,a,u,h){if(!tt(r)||r.__v_raw&&!(s&&r.__v_isReactive))return r;const d=B1(r);if(d===0)return r;const x=h.get(r);if(x)return x;const m=new Proxy(r,d===2?u:a);return h.set(r,m),m}function Ar(r){return kn(r)?Ar(r.__v_raw):!!(r&&r.__v_isReactive)}function kn(r){return!!(r&&r.__v_isReadonly)}function sn(r){return!!(r&&r.__v_isShallow)}function Co(r){return r?!!r.__v_raw:!1}function je(r){const s=r&&r.__v_raw;return s?je(s):r}function F1(r){return!Ge(r,"__v_skip")&&Object.isExtensible(r)&&dl(r,"__v_skip",!0),r}const hn=r=>tt(r)?wo(r):r,Vr=r=>tt(r)?Ys(r):r;function Mt(r){return r?r.__v_isRef===!0:!1}function En(r){return k1(r,!1)}function k1(r,s){return Mt(r)?r:new U1(r,s)}class U1{constructor(s,a){this.dep=new xo,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=a?s:je(s),this._value=a?s:hn(s),this.__v_isShallow=a}get value(){return this.dep.track(),this._value}set value(s){const a=this._rawValue,u=this.__v_isShallow||sn(s)||kn(s);s=u?s:je(s),er(s,a)&&(this._rawValue=s,this._value=u?s:hn(s),this.dep.trigger())}}function H1(r){return Mt(r)?r.value:r}const V1={get:(r,s,a)=>s==="__v_raw"?r:H1(Reflect.get(r,s,a)),set:(r,s,a,u)=>{const h=r[s];return Mt(h)&&!Mt(a)?(h.value=a,!0):Reflect.set(r,s,a,u)}};function Rl(r){return Ar(r)?r:new Proxy(r,V1)}class j1{constructor(s,a,u){this.fn=s,this.setter=a,this._value=void 0,this.dep=new xo(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=ui-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!a,this.isSSR=u}notify(){if(this.flags|=16,!(this.flags&8)&&et!==this)return Cl(this,!0),!0}get value(){const s=this.dep.track();return Il(this),s&&(s.version=this.dep.version),this._value}set value(s){this.setter&&this.setter(s)}}function G1(r,s,a=!1){let u,h;return be(r)?u=r:(u=r.get,h=r.set),new j1(u,h,a)}const vi={},Hi=new WeakMap;let xr;function W1(r,s=!1,a=xr){if(a){let u=Hi.get(a);u||Hi.set(a,u=[]),u.push(r)}}function z1(r,s,a=Qe){const{immediate:u,deep:h,once:d,scheduler:x,augmentJob:m,call:I}=a,w=te=>h?te:sn(te)||h===!1||h===0?vn(te,1):vn(te);let y,T,U,H,re=!1,J=!1;if(Mt(r)?(T=()=>r.value,re=sn(r)):Ar(r)?(T=()=>w(r),re=!0):Ee(r)?(J=!0,re=r.some(te=>Ar(te)||sn(te)),T=()=>r.map(te=>{if(Mt(te))return te.value;if(Ar(te))return w(te);if(be(te))return I?I(te,2):te()})):be(r)?s?T=I?()=>I(r,2):r:T=()=>{if(U){Pn();try{U()}finally{Fn()}}const te=xr;xr=y;try{return I?I(r,3,[H]):r(H)}finally{xr=te}}:T=Tn,s&&h){const te=T,Ue=h===!0?1/0:h;T=()=>vn(te(),Ue)}const Ie=w1(),pe=()=>{y.stop(),Ie&&Ie.active&&lo(Ie.effects,y)};if(d&&s){const te=s;s=(...Ue)=>{te(...Ue),pe()}}let ce=J?new Array(r.length).fill(vi):vi;const ne=te=>{if(!(!(y.flags&1)||!y.dirty&&!te))if(s){const Ue=y.run();if(h||re||(J?Ue.some((Te,k)=>er(Te,ce[k])):er(Ue,ce))){U&&U();const Te=xr;xr=y;try{const k=[Ue,ce===vi?void 0:J&&ce[0]===vi?[]:ce,H];ce=Ue,I?I(s,3,k):s(...k)}finally{xr=Te}}}else y.run()};return m&&m(ne),y=new wl(T),y.scheduler=x?()=>x(ne,!1):ne,H=te=>W1(te,!1,y),U=y.onStop=()=>{const te=Hi.get(y);if(te){if(I)I(te,4);else for(const Ue of te)Ue();Hi.delete(y)}},s?u?ne(!0):ce=y.run():x?x(ne.bind(null,!0),!0):y.run(),pe.pause=y.pause.bind(y),pe.resume=y.resume.bind(y),pe.stop=pe,pe}function vn(r,s=1/0,a){if(s<=0||!tt(r)||r.__v_skip||(a=a||new Map,(a.get(r)||0)>=s))return r;if(a.set(r,s),s--,Mt(r))vn(r.value,s,a);else if(Ee(r))for(let u=0;u<r.length;u++)vn(r[u],s,a);else if(qi(r)||Fr(r))r.forEach(u=>{vn(u,s,a)});else if(fl(r)){for(const u in r)vn(r[u],s,a);for(const u of Object.getOwnPropertySymbols(r))Object.prototype.propertyIsEnumerable.call(r,u)&&vn(r[u],s,a)}return r}/**
* @vue/runtime-core v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ci(r,s,a,u){try{return u?r(...u):r()}catch(h){is(h,s,a)}}function Nn(r,s,a,u){if(be(r)){const h=Ci(r,s,a,u);return h&&cl(h)&&h.catch(d=>{is(d,s,a)}),h}if(Ee(r)){const h=[];for(let d=0;d<r.length;d++)h.push(Nn(r[d],s,a,u));return h}}function is(r,s,a,u=!0){const h=s?s.vnode:null,{errorHandler:d,throwUnhandledErrorInProduction:x}=s&&s.appContext.config||Qe;if(s){let m=s.parent;const I=s.proxy,w=`https://vuejs.org/error-reference/#runtime-${a}`;for(;m;){const y=m.ec;if(y){for(let T=0;T<y.length;T++)if(y[T](r,I,w)===!1)return}m=m.parent}if(d){Pn(),Ci(d,null,10,[r,I,w]),Fn();return}}Y1(r,a,h,u,x)}function Y1(r,s,a,u=!0,h=!1){if(h)throw r;console.error(r)}const Pt=[];let yn=-1;const kr=[];let qn=null,Lr=0;const Dl=Promise.resolve();let Vi=null;function vl(r){const s=Vi||Dl;return r?s.then(this?r.bind(this):r):s}function X1(r){let s=yn+1,a=Pt.length;for(;s<a;){const u=s+a>>>1,h=Pt[u],d=hi(h);d<r||d===r&&h.flags&2?s=u+1:a=u}return s}function mo(r){if(!(r.flags&1)){const s=hi(r),a=Pt[Pt.length-1];!a||!(r.flags&2)&&s>=hi(a)?Pt.push(r):Pt.splice(X1(s),0,r),r.flags|=1,Ll()}}function Ll(){Vi||(Vi=Dl.then(Pl))}function Z1(r){Ee(r)?kr.push(...r):qn&&r.id===-1?qn.splice(Lr+1,0,r):r.flags&1||(kr.push(r),r.flags|=1),Ll()}function Qo(r,s,a=yn+1){for(;a<Pt.length;a++){const u=Pt[a];if(u&&u.flags&2){if(r&&u.id!==r.uid)continue;Pt.splice(a,1),a--,u.flags&4&&(u.flags&=-2),u(),u.flags&4||(u.flags&=-2)}}}function Bl(r){if(kr.length){const s=[...new Set(kr)].sort((a,u)=>hi(a)-hi(u));if(kr.length=0,qn){qn.push(...s);return}for(qn=s,Lr=0;Lr<qn.length;Lr++){const a=qn[Lr];a.flags&4&&(a.flags&=-2),a.flags&8||a(),a.flags&=-2}qn=null,Lr=0}}const hi=r=>r.id==null?r.flags&2?-1:1/0:r.id;function Pl(r){try{for(yn=0;yn<Pt.length;yn++){const s=Pt[yn];s&&!(s.flags&8)&&(s.flags&4&&(s.flags&=-2),Ci(s,s.i,s.i?15:14),s.flags&4||(s.flags&=-2))}}finally{for(;yn<Pt.length;yn++){const s=Pt[yn];s&&(s.flags&=-2)}yn=-1,Pt.length=0,Bl(),Vi=null,(Pt.length||kr.length)&&Pl()}}let rn=null,Fl=null;function ji(r){const s=rn;return rn=r,Fl=r&&r.type.__scopeId||null,s}function K1(r,s=rn,a){if(!s||r._n)return r;const u=(...h)=>{u._d&&oa(-1);const d=ji(s);let x;try{x=r(...h)}finally{ji(d),u._d&&oa(1)}return x};return u._n=!0,u._c=!0,u._d=!0,u}function fr(r,s){if(rn===null)return r;const a=ls(rn),u=r.dirs||(r.dirs=[]);for(let h=0;h<s.length;h++){let[d,x,m,I=Qe]=s[h];d&&(be(d)&&(d={mounted:d,updated:d}),d.deep&&vn(x),u.push({dir:d,instance:a,value:x,oldValue:void 0,arg:m,modifiers:I}))}return r}function hr(r,s,a,u){const h=r.dirs,d=s&&s.dirs;for(let x=0;x<h.length;x++){const m=h[x];d&&(m.oldValue=d[x].value);let I=m.dir[u];I&&(Pn(),Nn(I,a,8,[r.el,m,r,s]),Fn())}}function Q1(r,s){if(Ft){let a=Ft.provides;const u=Ft.parent&&Ft.parent.provides;u===a&&(a=Ft.provides=Object.create(u)),a[r]=s}}function Bi(r,s,a=!1){const u=Q0();if(u||Ur){let h=Ur?Ur._context.provides:u?u.parent==null||u.ce?u.vnode.appContext&&u.vnode.appContext.provides:u.parent.provides:void 0;if(h&&r in h)return h[r];if(arguments.length>1)return a&&be(s)?s.call(u&&u.proxy):s}}const q1=Symbol.for("v-scx"),J1=()=>Bi(q1);function Ls(r,s,a){return kl(r,s,a)}function kl(r,s,a=Qe){const{immediate:u,deep:h,flush:d,once:x}=a,m=Rt({},a),I=s&&u||!s&&d!=="post";let w;if(gi){if(d==="sync"){const H=J1();w=H.__watcherHandles||(H.__watcherHandles=[])}else if(!I){const H=()=>{};return H.stop=Tn,H.resume=Tn,H.pause=Tn,H}}const y=Ft;m.call=(H,re,J)=>Nn(H,y,re,J);let T=!1;d==="post"?m.scheduler=H=>{Yt(H,y&&y.suspense)}:d!=="sync"&&(T=!0,m.scheduler=(H,re)=>{re?H():mo(H)}),m.augmentJob=H=>{s&&(H.flags|=4),T&&(H.flags|=2,y&&(H.id=y.uid,H.i=y))};const U=z1(r,s,m);return gi&&(w?w.push(U):I&&U()),U}function $1(r,s,a){const u=this.proxy,h=xt(r)?r.includes(".")?Ul(u,r):()=>u[r]:r.bind(u,u);let d;be(s)?d=s:(d=s.handler,a=s);const x=mi(this),m=kl(h,d.bind(u),a);return x(),m}function Ul(r,s){const a=s.split(".");return()=>{let u=r;for(let h=0;h<a.length&&u;h++)u=u[a[h]];return u}}const e0=Symbol("_vte"),t0=r=>r.__isTeleport,n0=Symbol("_leaveCb");function Eo(r,s){r.shapeFlag&6&&r.component?(r.transition=s,Eo(r.component.subTree,s)):r.shapeFlag&128?(r.ssContent.transition=s.clone(r.ssContent),r.ssFallback.transition=s.clone(r.ssFallback)):r.transition=s}function Hl(r){r.ids=[r.ids[0]+r.ids[2]+++"-",0,0]}const Gi=new WeakMap;function si(r,s,a,u,h=!1){if(Ee(r)){r.forEach((re,J)=>si(re,s&&(Ee(s)?s[J]:s),a,u,h));return}if(oi(u)&&!h){u.shapeFlag&512&&u.type.__asyncResolved&&u.component.subTree.component&&si(r,s,a,u.component.subTree);return}const d=u.shapeFlag&4?ls(u.component):u.el,x=h?null:d,{i:m,r:I}=r,w=s&&s.r,y=m.refs===Qe?m.refs={}:m.refs,T=m.setupState,U=je(T),H=T===Qe?ll:re=>Ge(U,re);if(w!=null&&w!==I){if(qo(s),xt(w))y[w]=null,H(w)&&(T[w]=null);else if(Mt(w)){w.value=null;const re=s;re.k&&(y[re.k]=null)}}if(be(I))Ci(I,m,12,[x,y]);else{const re=xt(I),J=Mt(I);if(re||J){const Ie=()=>{if(r.f){const pe=re?H(I)?T[I]:y[I]:I.value;if(h)Ee(pe)&&lo(pe,d);else if(Ee(pe))pe.includes(d)||pe.push(d);else if(re)y[I]=[d],H(I)&&(T[I]=y[I]);else{const ce=[d];I.value=ce,r.k&&(y[r.k]=ce)}}else re?(y[I]=x,H(I)&&(T[I]=x)):J&&(I.value=x,r.k&&(y[r.k]=x))};if(x){const pe=()=>{Ie(),Gi.delete(r)};pe.id=-1,Gi.set(r,pe),Yt(pe,a)}else qo(r),Ie()}}}function qo(r){const s=Gi.get(r);s&&(s.flags|=8,Gi.delete(r))}es().requestIdleCallback;es().cancelIdleCallback;const oi=r=>!!r.type.__asyncLoader,Vl=r=>r.type.__isKeepAlive;function r0(r,s){jl(r,"a",s)}function i0(r,s){jl(r,"da",s)}function jl(r,s,a=Ft){const u=r.__wdc||(r.__wdc=()=>{let h=a;for(;h;){if(h.isDeactivated)return;h=h.parent}return r()});if(ss(s,u,a),a){let h=a.parent;for(;h&&h.parent;)Vl(h.parent.vnode)&&s0(u,s,a,h),h=h.parent}}function s0(r,s,a,u){const h=ss(s,r,u,!0);Wl(()=>{lo(u[s],h)},a)}function ss(r,s,a=Ft,u=!1){if(a){const h=a[r]||(a[r]=[]),d=s.__weh||(s.__weh=(...x)=>{Pn();const m=mi(a),I=Nn(s,a,r,x);return m(),Fn(),I});return u?h.unshift(d):h.push(d),d}}const Un=r=>(s,a=Ft)=>{(!gi||r==="sp")&&ss(r,(...u)=>s(...u),a)},o0=Un("bm"),Gl=Un("m"),a0=Un("bu"),l0=Un("u"),c0=Un("bum"),Wl=Un("um"),u0=Un("sp"),f0=Un("rtg"),h0=Un("rtc");function d0(r,s=Ft){ss("ec",r,s)}const g0=Symbol.for("v-ndc");function x0(r,s,a,u){let h;const d=a,x=Ee(r);if(x||xt(r)){const m=x&&Ar(r);let I=!1,w=!1;m&&(I=!sn(r),w=kn(r),r=rs(r)),h=new Array(r.length);for(let y=0,T=r.length;y<T;y++)h[y]=s(I?w?Vr(hn(r[y])):hn(r[y]):r[y],y,void 0,d)}else if(typeof r=="number"){h=new Array(r);for(let m=0;m<r;m++)h[m]=s(m+1,m,void 0,d)}else if(tt(r))if(r[Symbol.iterator])h=Array.from(r,(m,I)=>s(m,I,void 0,d));else{const m=Object.keys(r);h=new Array(m.length);for(let I=0,w=m.length;I<w;I++){const y=m[I];h[I]=s(r[y],y,I,d)}}else h=[];return h}const Xs=r=>r?uc(r)?ls(r):Xs(r.parent):null,ai=Rt(Object.create(null),{$:r=>r,$el:r=>r.vnode.el,$data:r=>r.data,$props:r=>r.props,$attrs:r=>r.attrs,$slots:r=>r.slots,$refs:r=>r.refs,$parent:r=>Xs(r.parent),$root:r=>Xs(r.root),$host:r=>r.ce,$emit:r=>r.emit,$options:r=>Yl(r),$forceUpdate:r=>r.f||(r.f=()=>{mo(r.update)}),$nextTick:r=>r.n||(r.n=vl.bind(r.proxy)),$watch:r=>$1.bind(r)}),Bs=(r,s)=>r!==Qe&&!r.__isScriptSetup&&Ge(r,s),p0={get({_:r},s){if(s==="__v_skip")return!0;const{ctx:a,setupState:u,data:h,props:d,accessCache:x,type:m,appContext:I}=r;if(s[0]!=="$"){const U=x[s];if(U!==void 0)switch(U){case 1:return u[s];case 2:return h[s];case 4:return a[s];case 3:return d[s]}else{if(Bs(u,s))return x[s]=1,u[s];if(h!==Qe&&Ge(h,s))return x[s]=2,h[s];if(Ge(d,s))return x[s]=3,d[s];if(a!==Qe&&Ge(a,s))return x[s]=4,a[s];Zs&&(x[s]=0)}}const w=ai[s];let y,T;if(w)return s==="$attrs"&&Nt(r.attrs,"get",""),w(r);if((y=m.__cssModules)&&(y=y[s]))return y;if(a!==Qe&&Ge(a,s))return x[s]=4,a[s];if(T=I.config.globalProperties,Ge(T,s))return T[s]},set({_:r},s,a){const{data:u,setupState:h,ctx:d}=r;return Bs(h,s)?(h[s]=a,!0):u!==Qe&&Ge(u,s)?(u[s]=a,!0):Ge(r.props,s)||s[0]==="$"&&s.slice(1)in r?!1:(d[s]=a,!0)},has({_:{data:r,setupState:s,accessCache:a,ctx:u,appContext:h,props:d,type:x}},m){let I;return!!(a[m]||r!==Qe&&m[0]!=="$"&&Ge(r,m)||Bs(s,m)||Ge(d,m)||Ge(u,m)||Ge(ai,m)||Ge(h.config.globalProperties,m)||(I=x.__cssModules)&&I[m])},defineProperty(r,s,a){return a.get!=null?r._.accessCache[s]=0:Ge(a,"value")&&this.set(r,s,a.value,null),Reflect.defineProperty(r,s,a)}};function Jo(r){return Ee(r)?r.reduce((s,a)=>(s[a]=null,s),{}):r}let Zs=!0;function w0(r){const s=Yl(r),a=r.proxy,u=r.ctx;Zs=!1,s.beforeCreate&&$o(s.beforeCreate,r,"bc");const{data:h,computed:d,methods:x,watch:m,provide:I,inject:w,created:y,beforeMount:T,mounted:U,beforeUpdate:H,updated:re,activated:J,deactivated:Ie,beforeDestroy:pe,beforeUnmount:ce,destroyed:ne,unmounted:te,render:Ue,renderTracked:Te,renderTriggered:k,errorCaptured:K,serverPrefetch:V,expose:gt,inheritAttrs:it,components:he,directives:Re,filters:Xe}=s;if(w&&A0(w,u,null),x)for(const se in x){const De=x[se];be(De)&&(u[se]=De.bind(a))}if(h){const se=h.call(a,a);tt(se)&&(r.data=wo(se))}if(Zs=!0,d)for(const se in d){const De=d[se],lt=be(De)?De.bind(a,a):be(De.get)?De.get.bind(a,a):Tn,pt=!be(De)&&be(De.set)?De.set.bind(a):Tn,dn=hc({get:lt,set:pt});Object.defineProperty(u,se,{enumerable:!0,configurable:!0,get:()=>dn.value,set:qe=>dn.value=qe})}if(m)for(const se in m)zl(m[se],u,a,se);if(I){const se=be(I)?I.call(a):I;Reflect.ownKeys(se).forEach(De=>{Q1(De,se[De])})}y&&$o(y,r,"c");function _e(se,De){Ee(De)?De.forEach(lt=>se(lt.bind(a))):De&&se(De.bind(a))}if(_e(o0,T),_e(Gl,U),_e(a0,H),_e(l0,re),_e(r0,J),_e(i0,Ie),_e(d0,K),_e(h0,Te),_e(f0,k),_e(c0,ce),_e(Wl,te),_e(u0,V),Ee(gt))if(gt.length){const se=r.exposed||(r.exposed={});gt.forEach(De=>{Object.defineProperty(se,De,{get:()=>a[De],set:lt=>a[De]=lt,enumerable:!0})})}else r.exposed||(r.exposed={});Ue&&r.render===Tn&&(r.render=Ue),it!=null&&(r.inheritAttrs=it),he&&(r.components=he),Re&&(r.directives=Re),V&&Hl(r)}function A0(r,s,a=Tn){Ee(r)&&(r=Ks(r));for(const u in r){const h=r[u];let d;tt(h)?"default"in h?d=Bi(h.from||u,h.default,!0):d=Bi(h.from||u):d=Bi(h),Mt(d)?Object.defineProperty(s,u,{enumerable:!0,configurable:!0,get:()=>d.value,set:x=>d.value=x}):s[u]=d}}function $o(r,s,a){Nn(Ee(r)?r.map(u=>u.bind(s.proxy)):r.bind(s.proxy),s,a)}function zl(r,s,a,u){let h=u.includes(".")?Ul(a,u):()=>a[u];if(xt(r)){const d=s[r];be(d)&&Ls(h,d)}else if(be(r))Ls(h,r.bind(a));else if(tt(r))if(Ee(r))r.forEach(d=>zl(d,s,a,u));else{const d=be(r.handler)?r.handler.bind(a):s[r.handler];be(d)&&Ls(h,d,r)}}function Yl(r){const s=r.type,{mixins:a,extends:u}=s,{mixins:h,optionsCache:d,config:{optionMergeStrategies:x}}=r.appContext,m=d.get(s);let I;return m?I=m:!h.length&&!a&&!u?I=s:(I={},h.length&&h.forEach(w=>Wi(I,w,x,!0)),Wi(I,s,x)),tt(s)&&d.set(s,I),I}function Wi(r,s,a,u=!1){const{mixins:h,extends:d}=s;d&&Wi(r,d,a,!0),h&&h.forEach(x=>Wi(r,x,a,!0));for(const x in s)if(!(u&&x==="expose")){const m=C0[x]||a&&a[x];r[x]=m?m(r[x],s[x]):s[x]}return r}const C0={data:ea,props:ta,emits:ta,methods:ti,computed:ti,beforeCreate:Bt,created:Bt,beforeMount:Bt,mounted:Bt,beforeUpdate:Bt,updated:Bt,beforeDestroy:Bt,beforeUnmount:Bt,destroyed:Bt,unmounted:Bt,activated:Bt,deactivated:Bt,errorCaptured:Bt,serverPrefetch:Bt,components:ti,directives:ti,watch:E0,provide:ea,inject:m0};function ea(r,s){return s?r?function(){return Rt(be(r)?r.call(this,this):r,be(s)?s.call(this,this):s)}:s:r}function m0(r,s){return ti(Ks(r),Ks(s))}function Ks(r){if(Ee(r)){const s={};for(let a=0;a<r.length;a++)s[r[a]]=r[a];return s}return r}function Bt(r,s){return r?[...new Set([].concat(r,s))]:s}function ti(r,s){return r?Rt(Object.create(null),r,s):s}function ta(r,s){return r?Ee(r)&&Ee(s)?[...new Set([...r,...s])]:Rt(Object.create(null),Jo(r),Jo(s??{})):s}function E0(r,s){if(!r)return s;if(!s)return r;const a=Rt(Object.create(null),r);for(const u in s)a[u]=Bt(r[u],s[u]);return a}function Xl(){return{app:null,config:{isNativeTag:ll,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let I0=0;function y0(r,s){return function(u,h=null){be(u)||(u=Rt({},u)),h!=null&&!tt(h)&&(h=null);const d=Xl(),x=new WeakSet,m=[];let I=!1;const w=d.app={_uid:I0++,_component:u,_props:h,_container:null,_context:d,_instance:null,version:nu,get config(){return d.config},set config(y){},use(y,...T){return x.has(y)||(y&&be(y.install)?(x.add(y),y.install(w,...T)):be(y)&&(x.add(y),y(w,...T))),w},mixin(y){return d.mixins.includes(y)||d.mixins.push(y),w},component(y,T){return T?(d.components[y]=T,w):d.components[y]},directive(y,T){return T?(d.directives[y]=T,w):d.directives[y]},mount(y,T,U){if(!I){const H=w._ceVNode||Bn(u,h);return H.appContext=d,U===!0?U="svg":U===!1&&(U=void 0),r(H,y,U),I=!0,w._container=y,y.__vue_app__=w,ls(H.component)}},onUnmount(y){m.push(y)},unmount(){I&&(Nn(m,w._instance,16),r(null,w._container),delete w._container.__vue_app__)},provide(y,T){return d.provides[y]=T,w},runWithContext(y){const T=Ur;Ur=w;try{return y()}finally{Ur=T}}};return w}}let Ur=null;const b0=(r,s)=>s==="modelValue"||s==="model-value"?r.modelModifiers:r[`${s}Modifiers`]||r[`${nr(s)}Modifiers`]||r[`${Er(s)}Modifiers`];function S0(r,s,...a){if(r.isUnmounted)return;const u=r.vnode.props||Qe;let h=a;const d=s.startsWith("update:"),x=d&&b0(u,s.slice(7));x&&(x.trim&&(h=a.map(y=>xt(y)?y.trim():y)),x.number&&(h=a.map($i)));let m,I=u[m=Os(s)]||u[m=Os(nr(s))];!I&&d&&(I=u[m=Os(Er(s))]),I&&Nn(I,r,6,h);const w=u[m+"Once"];if(w){if(!r.emitted)r.emitted={};else if(r.emitted[m])return;r.emitted[m]=!0,Nn(w,r,6,h)}}const T0=new WeakMap;function Zl(r,s,a=!1){const u=a?T0:s.emitsCache,h=u.get(r);if(h!==void 0)return h;const d=r.emits;let x={},m=!1;if(!be(r)){const I=w=>{const y=Zl(w,s,!0);y&&(m=!0,Rt(x,y))};!a&&s.mixins.length&&s.mixins.forEach(I),r.extends&&I(r.extends),r.mixins&&r.mixins.forEach(I)}return!d&&!m?(tt(r)&&u.set(r,null),null):(Ee(d)?d.forEach(I=>x[I]=null):Rt(x,d),tt(r)&&u.set(r,x),x)}function os(r,s){return!r||!Qi(s)?!1:(s=s.slice(2).replace(/Once$/,""),Ge(r,s[0].toLowerCase()+s.slice(1))||Ge(r,Er(s))||Ge(r,s))}function na(r){const{type:s,vnode:a,proxy:u,withProxy:h,propsOptions:[d],slots:x,attrs:m,emit:I,render:w,renderCache:y,props:T,data:U,setupState:H,ctx:re,inheritAttrs:J}=r,Ie=ji(r);let pe,ce;try{if(a.shapeFlag&4){const te=h||u,Ue=te;pe=Sn(w.call(Ue,te,y,T,H,U,re)),ce=m}else{const te=s;pe=Sn(te.length>1?te(T,{attrs:m,slots:x,emit:I}):te(T,null)),ce=s.props?m:_0(m)}}catch(te){li.length=0,is(te,r,1),pe=Bn(rr)}let ne=pe;if(ce&&J!==!1){const te=Object.keys(ce),{shapeFlag:Ue}=ne;te.length&&Ue&7&&(d&&te.some(ao)&&(ce=N0(ce,d)),ne=jr(ne,ce,!1,!0))}return a.dirs&&(ne=jr(ne,null,!1,!0),ne.dirs=ne.dirs?ne.dirs.concat(a.dirs):a.dirs),a.transition&&Eo(ne,a.transition),pe=ne,ji(Ie),pe}const _0=r=>{let s;for(const a in r)(a==="class"||a==="style"||Qi(a))&&((s||(s={}))[a]=r[a]);return s},N0=(r,s)=>{const a={};for(const u in r)(!ao(u)||!(u.slice(9)in s))&&(a[u]=r[u]);return a};function O0(r,s,a){const{props:u,children:h,component:d}=r,{props:x,children:m,patchFlag:I}=s,w=d.emitsOptions;if(s.dirs||s.transition)return!0;if(a&&I>=0){if(I&1024)return!0;if(I&16)return u?ra(u,x,w):!!x;if(I&8){const y=s.dynamicProps;for(let T=0;T<y.length;T++){const U=y[T];if(x[U]!==u[U]&&!os(w,U))return!0}}}else return(h||m)&&(!m||!m.$stable)?!0:u===x?!1:u?x?ra(u,x,w):!0:!!x;return!1}function ra(r,s,a){const u=Object.keys(s);if(u.length!==Object.keys(r).length)return!0;for(let h=0;h<u.length;h++){const d=u[h];if(s[d]!==r[d]&&!os(a,d))return!0}return!1}function M0({vnode:r,parent:s},a){for(;s;){const u=s.subTree;if(u.suspense&&u.suspense.activeBranch===r&&(u.el=r.el),u===r)(r=s.vnode).el=a,s=s.parent;else break}}const Kl={},Ql=()=>Object.create(Kl),ql=r=>Object.getPrototypeOf(r)===Kl;function R0(r,s,a,u=!1){const h={},d=Ql();r.propsDefaults=Object.create(null),Jl(r,s,h,d);for(const x in r.propsOptions[0])x in h||(h[x]=void 0);a?r.props=u?h:P1(h):r.type.props?r.props=h:r.props=d,r.attrs=d}function D0(r,s,a,u){const{props:h,attrs:d,vnode:{patchFlag:x}}=r,m=je(h),[I]=r.propsOptions;let w=!1;if((u||x>0)&&!(x&16)){if(x&8){const y=r.vnode.dynamicProps;for(let T=0;T<y.length;T++){let U=y[T];if(os(r.emitsOptions,U))continue;const H=s[U];if(I)if(Ge(d,U))H!==d[U]&&(d[U]=H,w=!0);else{const re=nr(U);h[re]=Qs(I,m,re,H,r,!1)}else H!==d[U]&&(d[U]=H,w=!0)}}}else{Jl(r,s,h,d)&&(w=!0);let y;for(const T in m)(!s||!Ge(s,T)&&((y=Er(T))===T||!Ge(s,y)))&&(I?a&&(a[T]!==void 0||a[y]!==void 0)&&(h[T]=Qs(I,m,T,void 0,r,!0)):delete h[T]);if(d!==m)for(const T in d)(!s||!Ge(s,T))&&(delete d[T],w=!0)}w&&Dn(r.attrs,"set","")}function Jl(r,s,a,u){const[h,d]=r.propsOptions;let x=!1,m;if(s)for(let I in s){if(ni(I))continue;const w=s[I];let y;h&&Ge(h,y=nr(I))?!d||!d.includes(y)?a[y]=w:(m||(m={}))[y]=w:os(r.emitsOptions,I)||(!(I in u)||w!==u[I])&&(u[I]=w,x=!0)}if(d){const I=je(a),w=m||Qe;for(let y=0;y<d.length;y++){const T=d[y];a[T]=Qs(h,I,T,w[T],r,!Ge(w,T))}}return x}function Qs(r,s,a,u,h,d){const x=r[a];if(x!=null){const m=Ge(x,"default");if(m&&u===void 0){const I=x.default;if(x.type!==Function&&!x.skipFactory&&be(I)){const{propsDefaults:w}=h;if(a in w)u=w[a];else{const y=mi(h);u=w[a]=I.call(null,s),y()}}else u=I;h.ce&&h.ce._setProp(a,u)}x[0]&&(d&&!m?u=!1:x[1]&&(u===""||u===Er(a))&&(u=!0))}return u}const v0=new WeakMap;function $l(r,s,a=!1){const u=a?v0:s.propsCache,h=u.get(r);if(h)return h;const d=r.props,x={},m=[];let I=!1;if(!be(r)){const y=T=>{I=!0;const[U,H]=$l(T,s,!0);Rt(x,U),H&&m.push(...H)};!a&&s.mixins.length&&s.mixins.forEach(y),r.extends&&y(r.extends),r.mixins&&r.mixins.forEach(y)}if(!d&&!I)return tt(r)&&u.set(r,Pr),Pr;if(Ee(d))for(let y=0;y<d.length;y++){const T=nr(d[y]);ia(T)&&(x[T]=Qe)}else if(d)for(const y in d){const T=nr(y);if(ia(T)){const U=d[y],H=x[T]=Ee(U)||be(U)?{type:U}:Rt({},U),re=H.type;let J=!1,Ie=!0;if(Ee(re))for(let pe=0;pe<re.length;++pe){const ce=re[pe],ne=be(ce)&&ce.name;if(ne==="Boolean"){J=!0;break}else ne==="String"&&(Ie=!1)}else J=be(re)&&re.name==="Boolean";H[0]=J,H[1]=Ie,(J||Ge(H,"default"))&&m.push(T)}}const w=[x,m];return tt(r)&&u.set(r,w),w}function ia(r){return r[0]!=="$"&&!ni(r)}const Io=r=>r==="_"||r==="_ctx"||r==="$stable",yo=r=>Ee(r)?r.map(Sn):[Sn(r)],L0=(r,s,a)=>{if(s._n)return s;const u=K1((...h)=>yo(s(...h)),a);return u._c=!1,u},ec=(r,s,a)=>{const u=r._ctx;for(const h in r){if(Io(h))continue;const d=r[h];if(be(d))s[h]=L0(h,d,u);else if(d!=null){const x=yo(d);s[h]=()=>x}}},tc=(r,s)=>{const a=yo(s);r.slots.default=()=>a},nc=(r,s,a)=>{for(const u in s)(a||!Io(u))&&(r[u]=s[u])},B0=(r,s,a)=>{const u=r.slots=Ql();if(r.vnode.shapeFlag&32){const h=s._;h?(nc(u,s,a),a&&dl(u,"_",h,!0)):ec(s,u)}else s&&tc(r,s)},P0=(r,s,a)=>{const{vnode:u,slots:h}=r;let d=!0,x=Qe;if(u.shapeFlag&32){const m=s._;m?a&&m===1?d=!1:nc(h,s,a):(d=!s.$stable,ec(s,h)),x=s}else s&&(tc(r,s),x={default:1});if(d)for(const m in h)!Io(m)&&x[m]==null&&delete h[m]},Yt=V0;function F0(r){return k0(r)}function k0(r,s){const a=es();a.__VUE__=!0;const{insert:u,remove:h,patchProp:d,createElement:x,createText:m,createComment:I,setText:w,setElementText:y,parentNode:T,nextSibling:U,setScopeId:H=Tn,insertStaticContent:re}=r,J=(_,N,F,W=null,Y=null,j=null,X=void 0,G=null,$=!!N.dynamicChildren)=>{if(_===N)return;_&&!$r(_,N)&&(W=Hn(_),qe(_,Y,j,!0),_=null),N.patchFlag===-2&&($=!1,N.dynamicChildren=null);const{type:v,ref:de,shapeFlag:ie}=N;switch(v){case as:Ie(_,N,F,W);break;case rr:pe(_,N,F,W);break;case Fs:_==null&&ce(N,F,W,X);break;case un:he(_,N,F,W,Y,j,X,G,$);break;default:ie&1?Ue(_,N,F,W,Y,j,X,G,$):ie&6?Re(_,N,F,W,Y,j,X,G,$):(ie&64||ie&128)&&v.process(_,N,F,W,Y,j,X,G,$,on)}de!=null&&Y?si(de,_&&_.ref,j,N||_,!N):de==null&&_&&_.ref!=null&&si(_.ref,null,j,_,!0)},Ie=(_,N,F,W)=>{if(_==null)u(N.el=m(N.children),F,W);else{const Y=N.el=_.el;N.children!==_.children&&w(Y,N.children)}},pe=(_,N,F,W)=>{_==null?u(N.el=I(N.children||""),F,W):N.el=_.el},ce=(_,N,F,W)=>{[_.el,_.anchor]=re(_.children,N,F,W,_.el,_.anchor)},ne=({el:_,anchor:N},F,W)=>{let Y;for(;_&&_!==N;)Y=U(_),u(_,F,W),_=Y;u(N,F,W)},te=({el:_,anchor:N})=>{let F;for(;_&&_!==N;)F=U(_),h(_),_=F;h(N)},Ue=(_,N,F,W,Y,j,X,G,$)=>{if(N.type==="svg"?X="svg":N.type==="math"&&(X="mathml"),_==null)Te(N,F,W,Y,j,X,G,$);else{const v=_.el&&_.el._isVueCE?_.el:null;try{v&&v._beginPatch(),V(_,N,Y,j,X,G,$)}finally{v&&v._endPatch()}}},Te=(_,N,F,W,Y,j,X,G)=>{let $,v;const{props:de,shapeFlag:ie,transition:le,dirs:we}=_;if($=_.el=x(_.type,j,de&&de.is,de),ie&8?y($,_.children):ie&16&&K(_.children,$,null,W,Y,Ps(_,j),X,G),we&&hr(_,null,W,"created"),k($,_,_.scopeId,X,W),de){for(const We in de)We!=="value"&&!ni(We)&&d($,We,null,de[We],j,W);"value"in de&&d($,"value",null,de.value,j),(v=de.onVnodeBeforeMount)&&In(v,W,_)}we&&hr(_,null,W,"beforeMount");const Ce=U0(Y,le);Ce&&le.beforeEnter($),u($,N,F),((v=de&&de.onVnodeMounted)||Ce||we)&&Yt(()=>{v&&In(v,W,_),Ce&&le.enter($),we&&hr(_,null,W,"mounted")},Y)},k=(_,N,F,W,Y)=>{if(F&&H(_,F),W)for(let j=0;j<W.length;j++)H(_,W[j]);if(Y){let j=Y.subTree;if(N===j||oc(j.type)&&(j.ssContent===N||j.ssFallback===N)){const X=Y.vnode;k(_,X,X.scopeId,X.slotScopeIds,Y.parent)}}},K=(_,N,F,W,Y,j,X,G,$=0)=>{for(let v=$;v<_.length;v++){const de=_[v]=G?Jn(_[v]):Sn(_[v]);J(null,de,N,F,W,Y,j,X,G)}},V=(_,N,F,W,Y,j,X)=>{const G=N.el=_.el;let{patchFlag:$,dynamicChildren:v,dirs:de}=N;$|=_.patchFlag&16;const ie=_.props||Qe,le=N.props||Qe;let we;if(F&&dr(F,!1),(we=le.onVnodeBeforeUpdate)&&In(we,F,N,_),de&&hr(N,_,F,"beforeUpdate"),F&&dr(F,!0),(ie.innerHTML&&le.innerHTML==null||ie.textContent&&le.textContent==null)&&y(G,""),v?gt(_.dynamicChildren,v,G,F,W,Ps(N,Y),j):X||De(_,N,G,null,F,W,Ps(N,Y),j,!1),$>0){if($&16)it(G,ie,le,F,Y);else if($&2&&ie.class!==le.class&&d(G,"class",null,le.class,Y),$&4&&d(G,"style",ie.style,le.style,Y),$&8){const Ce=N.dynamicProps;for(let We=0;We<Ce.length;We++){const Oe=Ce[We],He=ie[Oe],It=le[Oe];(It!==He||Oe==="value")&&d(G,Oe,He,It,Y,F)}}$&1&&_.children!==N.children&&y(G,N.children)}else!X&&v==null&&it(G,ie,le,F,Y);((we=le.onVnodeUpdated)||de)&&Yt(()=>{we&&In(we,F,N,_),de&&hr(N,_,F,"updated")},W)},gt=(_,N,F,W,Y,j,X)=>{for(let G=0;G<N.length;G++){const $=_[G],v=N[G],de=$.el&&($.type===un||!$r($,v)||$.shapeFlag&198)?T($.el):F;J($,v,de,null,W,Y,j,X,!0)}},it=(_,N,F,W,Y)=>{if(N!==F){if(N!==Qe)for(const j in N)!ni(j)&&!(j in F)&&d(_,j,N[j],null,Y,W);for(const j in F){if(ni(j))continue;const X=F[j],G=N[j];X!==G&&j!=="value"&&d(_,j,G,X,Y,W)}"value"in F&&d(_,"value",N.value,F.value,Y)}},he=(_,N,F,W,Y,j,X,G,$)=>{const v=N.el=_?_.el:m(""),de=N.anchor=_?_.anchor:m("");let{patchFlag:ie,dynamicChildren:le,slotScopeIds:we}=N;we&&(G=G?G.concat(we):we),_==null?(u(v,F,W),u(de,F,W),K(N.children||[],F,de,Y,j,X,G,$)):ie>0&&ie&64&&le&&_.dynamicChildren&&_.dynamicChildren.length===le.length?(gt(_.dynamicChildren,le,F,Y,j,X,G),(N.key!=null||Y&&N===Y.subTree)&&rc(_,N,!0)):De(_,N,F,de,Y,j,X,G,$)},Re=(_,N,F,W,Y,j,X,G,$)=>{N.slotScopeIds=G,_==null?N.shapeFlag&512?Y.ctx.activate(N,F,W,X,$):Xe(N,F,W,Y,j,X,$):L(_,N,$)},Xe=(_,N,F,W,Y,j,X)=>{const G=_.component=K0(_,W,Y);if(Vl(_)&&(G.ctx.renderer=on),q0(G,!1,X),G.asyncDep){if(Y&&Y.registerDep(G,_e,X),!_.el){const $=G.subTree=Bn(rr);pe(null,$,N,F),_.placeholder=$.el}}else _e(G,_,N,F,Y,j,X)},L=(_,N,F)=>{const W=N.component=_.component;if(O0(_,N,F))if(W.asyncDep&&!W.asyncResolved){se(W,N,F);return}else W.next=N,W.update();else N.el=_.el,W.vnode=N},_e=(_,N,F,W,Y,j,X)=>{const G=()=>{if(_.isMounted){let{next:ie,bu:le,u:we,parent:Ce,vnode:We}=_;{const qt=ic(_);if(qt){ie&&(ie.el=We.el,se(_,ie,X)),qt.asyncDep.then(()=>{_.isUnmounted||G()});return}}let Oe=ie,He;dr(_,!1),ie?(ie.el=We.el,se(_,ie,X)):ie=We,le&&Li(le),(He=ie.props&&ie.props.onVnodeBeforeUpdate)&&In(He,Ce,ie,We),dr(_,!0);const It=na(_),vt=_.subTree;_.subTree=It,J(vt,It,T(vt.el),Hn(vt),_,Y,j),ie.el=It.el,Oe===null&&M0(_,It.el),we&&Yt(we,Y),(He=ie.props&&ie.props.onVnodeUpdated)&&Yt(()=>In(He,Ce,ie,We),Y)}else{let ie;const{el:le,props:we}=N,{bm:Ce,m:We,parent:Oe,root:He,type:It}=_,vt=oi(N);dr(_,!1),Ce&&Li(Ce),!vt&&(ie=we&&we.onVnodeBeforeMount)&&In(ie,Oe,N),dr(_,!0);{He.ce&&He.ce._def.shadowRoot!==!1&&He.ce._injectChildStyle(It);const qt=_.subTree=na(_);J(null,qt,F,W,_,Y,j),N.el=qt.el}if(We&&Yt(We,Y),!vt&&(ie=we&&we.onVnodeMounted)){const qt=N;Yt(()=>In(ie,Oe,qt),Y)}(N.shapeFlag&256||Oe&&oi(Oe.vnode)&&Oe.vnode.shapeFlag&256)&&_.a&&Yt(_.a,Y),_.isMounted=!0,N=F=W=null}};_.scope.on();const $=_.effect=new wl(G);_.scope.off();const v=_.update=$.run.bind($),de=_.job=$.runIfDirty.bind($);de.i=_,de.id=_.uid,$.scheduler=()=>mo(de),dr(_,!0),v()},se=(_,N,F)=>{N.component=_;const W=_.vnode.props;_.vnode=N,_.next=null,D0(_,N.props,W,F),P0(_,N.children,F),Pn(),Qo(_),Fn()},De=(_,N,F,W,Y,j,X,G,$=!1)=>{const v=_&&_.children,de=_?_.shapeFlag:0,ie=N.children,{patchFlag:le,shapeFlag:we}=N;if(le>0){if(le&128){pt(v,ie,F,W,Y,j,X,G,$);return}else if(le&256){lt(v,ie,F,W,Y,j,X,G,$);return}}we&8?(de&16&&ue(v,Y,j),ie!==v&&y(F,ie)):de&16?we&16?pt(v,ie,F,W,Y,j,X,G,$):ue(v,Y,j,!0):(de&8&&y(F,""),we&16&&K(ie,F,W,Y,j,X,G,$))},lt=(_,N,F,W,Y,j,X,G,$)=>{_=_||Pr,N=N||Pr;const v=_.length,de=N.length,ie=Math.min(v,de);let le;for(le=0;le<ie;le++){const we=N[le]=$?Jn(N[le]):Sn(N[le]);J(_[le],we,F,null,Y,j,X,G,$)}v>de?ue(_,Y,j,!0,!1,ie):K(N,F,W,Y,j,X,G,$,ie)},pt=(_,N,F,W,Y,j,X,G,$)=>{let v=0;const de=N.length;let ie=_.length-1,le=de-1;for(;v<=ie&&v<=le;){const we=_[v],Ce=N[v]=$?Jn(N[v]):Sn(N[v]);if($r(we,Ce))J(we,Ce,F,null,Y,j,X,G,$);else break;v++}for(;v<=ie&&v<=le;){const we=_[ie],Ce=N[le]=$?Jn(N[le]):Sn(N[le]);if($r(we,Ce))J(we,Ce,F,null,Y,j,X,G,$);else break;ie--,le--}if(v>ie){if(v<=le){const we=le+1,Ce=we<de?N[we].el:W;for(;v<=le;)J(null,N[v]=$?Jn(N[v]):Sn(N[v]),F,Ce,Y,j,X,G,$),v++}}else if(v>le)for(;v<=ie;)qe(_[v],Y,j,!0),v++;else{const we=v,Ce=v,We=new Map;for(v=Ce;v<=le;v++){const Be=N[v]=$?Jn(N[v]):Sn(N[v]);Be.key!=null&&We.set(Be.key,v)}let Oe,He=0;const It=le-Ce+1;let vt=!1,qt=0;const Je=new Array(It);for(v=0;v<It;v++)Je[v]=0;for(v=we;v<=ie;v++){const Be=_[v];if(He>=It){qe(Be,Y,j,!0);continue}let Me;if(Be.key!=null)Me=We.get(Be.key);else for(Oe=Ce;Oe<=le;Oe++)if(Je[Oe-Ce]===0&&$r(Be,N[Oe])){Me=Oe;break}Me===void 0?qe(Be,Y,j,!0):(Je[Me-Ce]=v+1,Me>=qt?qt=Me:vt=!0,J(Be,N[Me],F,null,Y,j,X,G,$),He++)}const ee=vt?H0(Je):Pr;for(Oe=ee.length-1,v=It-1;v>=0;v--){const Be=Ce+v,Me=N[Be],nt=N[Be+1],jn=Be+1<de?nt.el||sc(nt):W;Je[v]===0?J(null,Me,F,jn,Y,j,X,G,$):vt&&(Oe<0||v!==ee[Oe]?dn(Me,F,jn,2):Oe--)}}},dn=(_,N,F,W,Y=null)=>{const{el:j,type:X,transition:G,children:$,shapeFlag:v}=_;if(v&6){dn(_.component.subTree,N,F,W);return}if(v&128){_.suspense.move(N,F,W);return}if(v&64){X.move(_,N,F,on);return}if(X===un){u(j,N,F);for(let ie=0;ie<$.length;ie++)dn($[ie],N,F,W);u(_.anchor,N,F);return}if(X===Fs){ne(_,N,F);return}if(W!==2&&v&1&&G)if(W===0)G.beforeEnter(j),u(j,N,F),Yt(()=>G.enter(j),Y);else{const{leave:ie,delayLeave:le,afterLeave:we}=G,Ce=()=>{_.ctx.isUnmounted?h(j):u(j,N,F)},We=()=>{j._isLeaving&&j[n0](!0),ie(j,()=>{Ce(),we&&we()})};le?le(j,Ce,We):We()}else u(j,N,F)},qe=(_,N,F,W=!1,Y=!1)=>{const{type:j,props:X,ref:G,children:$,dynamicChildren:v,shapeFlag:de,patchFlag:ie,dirs:le,cacheIndex:we}=_;if(ie===-2&&(Y=!1),G!=null&&(Pn(),si(G,null,F,_,!0),Fn()),we!=null&&(N.renderCache[we]=void 0),de&256){N.ctx.deactivate(_);return}const Ce=de&1&&le,We=!oi(_);let Oe;if(We&&(Oe=X&&X.onVnodeBeforeUnmount)&&In(Oe,N,_),de&6)Gr(_.component,F,W);else{if(de&128){_.suspense.unmount(F,W);return}Ce&&hr(_,null,N,"beforeUnmount"),de&64?_.type.remove(_,N,F,on,W):v&&!v.hasOnce&&(j!==un||ie>0&&ie&64)?ue(v,N,F,!1,!0):(j===un&&ie&384||!Y&&de&16)&&ue($,N,F),W&&gn(_)}(We&&(Oe=X&&X.onVnodeUnmounted)||Ce)&&Yt(()=>{Oe&&In(Oe,N,_),Ce&&hr(_,null,N,"unmounted")},F)},gn=_=>{const{type:N,el:F,anchor:W,transition:Y}=_;if(N===un){Et(F,W);return}if(N===Fs){te(_);return}const j=()=>{h(F),Y&&!Y.persisted&&Y.afterLeave&&Y.afterLeave()};if(_.shapeFlag&1&&Y&&!Y.persisted){const{leave:X,delayLeave:G}=Y,$=()=>X(F,j);G?G(_.el,j,$):$()}else j()},Et=(_,N)=>{let F;for(;_!==N;)F=U(_),h(_),_=F;h(N)},Gr=(_,N,F)=>{const{bum:W,scope:Y,job:j,subTree:X,um:G,m:$,a:v}=_;sa($),sa(v),W&&Li(W),Y.stop(),j&&(j.flags|=8,qe(X,_,N,F)),G&&Yt(G,N),Yt(()=>{_.isUnmounted=!0},N)},ue=(_,N,F,W=!1,Y=!1,j=0)=>{for(let X=j;X<_.length;X++)qe(_[X],N,F,W,Y)},Hn=_=>{if(_.shapeFlag&6)return Hn(_.component.subTree);if(_.shapeFlag&128)return _.suspense.next();const N=U(_.anchor||_.el),F=N&&N[e0];return F?U(F):N};let ct=!1;const Vn=(_,N,F)=>{let W;_==null?N._vnode&&(qe(N._vnode,null,null,!0),W=N._vnode.component):J(N._vnode||null,_,N,null,null,null,F),N._vnode=_,ct||(ct=!0,Qo(W),Bl(),ct=!1)},on={p:J,um:qe,m:dn,r:gn,mt:Xe,mc:K,pc:De,pbc:gt,n:Hn,o:r};return{render:Vn,hydrate:void 0,createApp:y0(Vn)}}function Ps({type:r,props:s},a){return a==="svg"&&r==="foreignObject"||a==="mathml"&&r==="annotation-xml"&&s&&s.encoding&&s.encoding.includes("html")?void 0:a}function dr({effect:r,job:s},a){a?(r.flags|=32,s.flags|=4):(r.flags&=-33,s.flags&=-5)}function U0(r,s){return(!r||r&&!r.pendingBranch)&&s&&!s.persisted}function rc(r,s,a=!1){const u=r.children,h=s.children;if(Ee(u)&&Ee(h))for(let d=0;d<u.length;d++){const x=u[d];let m=h[d];m.shapeFlag&1&&!m.dynamicChildren&&((m.patchFlag<=0||m.patchFlag===32)&&(m=h[d]=Jn(h[d]),m.el=x.el),!a&&m.patchFlag!==-2&&rc(x,m)),m.type===as&&(m.patchFlag!==-1?m.el=x.el:m.__elIndex=d+(r.type===un?1:0)),m.type===rr&&!m.el&&(m.el=x.el)}}function H0(r){const s=r.slice(),a=[0];let u,h,d,x,m;const I=r.length;for(u=0;u<I;u++){const w=r[u];if(w!==0){if(h=a[a.length-1],r[h]<w){s[u]=h,a.push(u);continue}for(d=0,x=a.length-1;d<x;)m=d+x>>1,r[a[m]]<w?d=m+1:x=m;w<r[a[d]]&&(d>0&&(s[u]=a[d-1]),a[d]=u)}}for(d=a.length,x=a[d-1];d-- >0;)a[d]=x,x=s[x];return a}function ic(r){const s=r.subTree.component;if(s)return s.asyncDep&&!s.asyncResolved?s:ic(s)}function sa(r){if(r)for(let s=0;s<r.length;s++)r[s].flags|=8}function sc(r){if(r.placeholder)return r.placeholder;const s=r.component;return s?sc(s.subTree):null}const oc=r=>r.__isSuspense;function V0(r,s){s&&s.pendingBranch?Ee(r)?s.effects.push(...r):s.effects.push(r):Z1(r)}const un=Symbol.for("v-fgt"),as=Symbol.for("v-txt"),rr=Symbol.for("v-cmt"),Fs=Symbol.for("v-stc"),li=[];let Qt=null;function zt(r=!1){li.push(Qt=r?null:[])}function j0(){li.pop(),Qt=li[li.length-1]||null}let di=1;function oa(r,s=!1){di+=r,r<0&&Qt&&s&&(Qt.hasOnce=!0)}function ac(r){return r.dynamicChildren=di>0?Qt||Pr:null,j0(),di>0&&Qt&&Qt.push(r),r}function nn(r,s,a,u,h,d){return ac(me(r,s,a,u,h,d,!0))}function G0(r,s,a,u,h){return ac(Bn(r,s,a,u,h,!0))}function lc(r){return r?r.__v_isVNode===!0:!1}function $r(r,s){return r.type===s.type&&r.key===s.key}const cc=({key:r})=>r??null,Pi=({ref:r,ref_key:s,ref_for:a})=>(typeof r=="number"&&(r=""+r),r!=null?xt(r)||Mt(r)||be(r)?{i:rn,r,k:s,f:!!a}:r:null);function me(r,s=null,a=null,u=0,h=null,d=r===un?0:1,x=!1,m=!1){const I={__v_isVNode:!0,__v_skip:!0,type:r,props:s,key:s&&cc(s),ref:s&&Pi(s),scopeId:Fl,slotScopeIds:null,children:a,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:d,patchFlag:u,dynamicProps:h,dynamicChildren:null,appContext:null,ctx:rn};return m?(bo(I,a),d&128&&r.normalize(I)):a&&(I.shapeFlag|=xt(a)?8:16),di>0&&!x&&Qt&&(I.patchFlag>0||d&6)&&I.patchFlag!==32&&Qt.push(I),I}const Bn=W0;function W0(r,s=null,a=null,u=0,h=null,d=!1){if((!r||r===g0)&&(r=rr),lc(r)){const m=jr(r,s,!0);return a&&bo(m,a),di>0&&!d&&Qt&&(m.shapeFlag&6?Qt[Qt.indexOf(r)]=m:Qt.push(m)),m.patchFlag=-2,m}if(tu(r)&&(r=r.__vccOpts),s){s=z0(s);let{class:m,style:I}=s;m&&!xt(m)&&(s.class=ts(m)),tt(I)&&(Co(I)&&!Ee(I)&&(I=Rt({},I)),s.style=uo(I))}const x=xt(r)?1:oc(r)?128:t0(r)?64:tt(r)?4:be(r)?2:0;return me(r,s,a,u,h,x,d,!0)}function z0(r){return r?Co(r)||ql(r)?Rt({},r):r:null}function jr(r,s,a=!1,u=!1){const{props:h,ref:d,patchFlag:x,children:m,transition:I}=r,w=s?Y0(h||{},s):h,y={__v_isVNode:!0,__v_skip:!0,type:r.type,props:w,key:w&&cc(w),ref:s&&s.ref?a&&d?Ee(d)?d.concat(Pi(s)):[d,Pi(s)]:Pi(s):d,scopeId:r.scopeId,slotScopeIds:r.slotScopeIds,children:m,target:r.target,targetStart:r.targetStart,targetAnchor:r.targetAnchor,staticCount:r.staticCount,shapeFlag:r.shapeFlag,patchFlag:s&&r.type!==un?x===-1?16:x|16:x,dynamicProps:r.dynamicProps,dynamicChildren:r.dynamicChildren,appContext:r.appContext,dirs:r.dirs,transition:I,component:r.component,suspense:r.suspense,ssContent:r.ssContent&&jr(r.ssContent),ssFallback:r.ssFallback&&jr(r.ssFallback),placeholder:r.placeholder,el:r.el,anchor:r.anchor,ctx:r.ctx,ce:r.ce};return I&&u&&Eo(y,I.clone(y)),y}function Fi(r=" ",s=0){return Bn(as,null,r,s)}function gr(r="",s=!1){return s?(zt(),G0(rr,null,r)):Bn(rr,null,r)}function Sn(r){return r==null||typeof r=="boolean"?Bn(rr):Ee(r)?Bn(un,null,r.slice()):lc(r)?Jn(r):Bn(as,null,String(r))}function Jn(r){return r.el===null&&r.patchFlag!==-1||r.memo?r:jr(r)}function bo(r,s){let a=0;const{shapeFlag:u}=r;if(s==null)s=null;else if(Ee(s))a=16;else if(typeof s=="object")if(u&65){const h=s.default;h&&(h._c&&(h._d=!1),bo(r,h()),h._c&&(h._d=!0));return}else{a=32;const h=s._;!h&&!ql(s)?s._ctx=rn:h===3&&rn&&(rn.slots._===1?s._=1:(s._=2,r.patchFlag|=1024))}else be(s)?(s={default:s,_ctx:rn},a=32):(s=String(s),u&64?(a=16,s=[Fi(s)]):a=8);r.children=s,r.shapeFlag|=a}function Y0(...r){const s={};for(let a=0;a<r.length;a++){const u=r[a];for(const h in u)if(h==="class")s.class!==u.class&&(s.class=ts([s.class,u.class]));else if(h==="style")s.style=uo([s.style,u.style]);else if(Qi(h)){const d=s[h],x=u[h];x&&d!==x&&!(Ee(d)&&d.includes(x))&&(s[h]=d?[].concat(d,x):x)}else h!==""&&(s[h]=u[h])}return s}function In(r,s,a,u=null){Nn(r,s,7,[a,u])}const X0=Xl();let Z0=0;function K0(r,s,a){const u=r.type,h=(s?s.appContext:r.appContext)||X0,d={uid:Z0++,vnode:r,type:u,parent:s,appContext:h,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new p1(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:s?s.provides:Object.create(h.provides),ids:s?s.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:$l(u,h),emitsOptions:Zl(u,h),emit:null,emitted:null,propsDefaults:Qe,inheritAttrs:u.inheritAttrs,ctx:Qe,data:Qe,props:Qe,attrs:Qe,slots:Qe,refs:Qe,setupState:Qe,setupContext:null,suspense:a,suspenseId:a?a.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return d.ctx={_:d},d.root=s?s.root:d,d.emit=S0.bind(null,d),r.ce&&r.ce(d),d}let Ft=null;const Q0=()=>Ft||rn;let zi,qs;{const r=es(),s=(a,u)=>{let h;return(h=r[a])||(h=r[a]=[]),h.push(u),d=>{h.length>1?h.forEach(x=>x(d)):h[0](d)}};zi=s("__VUE_INSTANCE_SETTERS__",a=>Ft=a),qs=s("__VUE_SSR_SETTERS__",a=>gi=a)}const mi=r=>{const s=Ft;return zi(r),r.scope.on(),()=>{r.scope.off(),zi(s)}},aa=()=>{Ft&&Ft.scope.off(),zi(null)};function uc(r){return r.vnode.shapeFlag&4}let gi=!1;function q0(r,s=!1,a=!1){s&&qs(s);const{props:u,children:h}=r.vnode,d=uc(r);R0(r,u,d,s),B0(r,h,a||s);const x=d?J0(r,s):void 0;return s&&qs(!1),x}function J0(r,s){const a=r.type;r.accessCache=Object.create(null),r.proxy=new Proxy(r.ctx,p0);const{setup:u}=a;if(u){Pn();const h=r.setupContext=u.length>1?eu(r):null,d=mi(r),x=Ci(u,r,0,[r.props,h]),m=cl(x);if(Fn(),d(),(m||r.sp)&&!oi(r)&&Hl(r),m){if(x.then(aa,aa),s)return x.then(I=>{la(r,I)}).catch(I=>{is(I,r,0)});r.asyncDep=x}else la(r,x)}else fc(r)}function la(r,s,a){be(s)?r.type.__ssrInlineRender?r.ssrRender=s:r.render=s:tt(s)&&(r.setupState=Rl(s)),fc(r)}function fc(r,s,a){const u=r.type;r.render||(r.render=u.render||Tn);{const h=mi(r);Pn();try{w0(r)}finally{Fn(),h()}}}const $0={get(r,s){return Nt(r,"get",""),r[s]}};function eu(r){const s=a=>{r.exposed=a||{}};return{attrs:new Proxy(r.attrs,$0),slots:r.slots,emit:r.emit,expose:s}}function ls(r){return r.exposed?r.exposeProxy||(r.exposeProxy=new Proxy(Rl(F1(r.exposed)),{get(s,a){if(a in s)return s[a];if(a in ai)return ai[a](r)},has(s,a){return a in s||a in ai}})):r.proxy}function tu(r){return be(r)&&"__vccOpts"in r}const hc=(r,s)=>G1(r,s,gi),nu="3.5.27";/**
* @vue/runtime-dom v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Js;const ca=typeof window<"u"&&window.trustedTypes;if(ca)try{Js=ca.createPolicy("vue",{createHTML:r=>r})}catch{}const dc=Js?r=>Js.createHTML(r):r=>r,ru="http://www.w3.org/2000/svg",iu="http://www.w3.org/1998/Math/MathML",Rn=typeof document<"u"?document:null,ua=Rn&&Rn.createElement("template"),su={insert:(r,s,a)=>{s.insertBefore(r,a||null)},remove:r=>{const s=r.parentNode;s&&s.removeChild(r)},createElement:(r,s,a,u)=>{const h=s==="svg"?Rn.createElementNS(ru,r):s==="mathml"?Rn.createElementNS(iu,r):a?Rn.createElement(r,{is:a}):Rn.createElement(r);return r==="select"&&u&&u.multiple!=null&&h.setAttribute("multiple",u.multiple),h},createText:r=>Rn.createTextNode(r),createComment:r=>Rn.createComment(r),setText:(r,s)=>{r.nodeValue=s},setElementText:(r,s)=>{r.textContent=s},parentNode:r=>r.parentNode,nextSibling:r=>r.nextSibling,querySelector:r=>Rn.querySelector(r),setScopeId(r,s){r.setAttribute(s,"")},insertStaticContent(r,s,a,u,h,d){const x=a?a.previousSibling:s.lastChild;if(h&&(h===d||h.nextSibling))for(;s.insertBefore(h.cloneNode(!0),a),!(h===d||!(h=h.nextSibling)););else{ua.innerHTML=dc(u==="svg"?`<svg>${r}</svg>`:u==="mathml"?`<math>${r}</math>`:r);const m=ua.content;if(u==="svg"||u==="mathml"){const I=m.firstChild;for(;I.firstChild;)m.appendChild(I.firstChild);m.removeChild(I)}s.insertBefore(m,a)}return[x?x.nextSibling:s.firstChild,a?a.previousSibling:s.lastChild]}},ou=Symbol("_vtc");function au(r,s,a){const u=r[ou];u&&(s=(s?[s,...u]:[...u]).join(" ")),s==null?r.removeAttribute("class"):a?r.setAttribute("class",s):r.className=s}const fa=Symbol("_vod"),lu=Symbol("_vsh"),cu=Symbol(""),uu=/(?:^|;)\s*display\s*:/;function fu(r,s,a){const u=r.style,h=xt(a);let d=!1;if(a&&!h){if(s)if(xt(s))for(const x of s.split(";")){const m=x.slice(0,x.indexOf(":")).trim();a[m]==null&&ki(u,m,"")}else for(const x in s)a[x]==null&&ki(u,x,"");for(const x in a)x==="display"&&(d=!0),ki(u,x,a[x])}else if(h){if(s!==a){const x=u[cu];x&&(a+=";"+x),u.cssText=a,d=uu.test(a)}}else s&&r.removeAttribute("style");fa in r&&(r[fa]=d?u.display:"",r[lu]&&(u.display="none"))}const ha=/\s*!important$/;function ki(r,s,a){if(Ee(a))a.forEach(u=>ki(r,s,u));else if(a==null&&(a=""),s.startsWith("--"))r.setProperty(s,a);else{const u=hu(r,s);ha.test(a)?r.setProperty(Er(u),a.replace(ha,""),"important"):r[u]=a}}const da=["Webkit","Moz","ms"],ks={};function hu(r,s){const a=ks[s];if(a)return a;let u=nr(s);if(u!=="filter"&&u in r)return ks[s]=u;u=hl(u);for(let h=0;h<da.length;h++){const d=da[h]+u;if(d in r)return ks[s]=d}return s}const ga="http://www.w3.org/1999/xlink";function xa(r,s,a,u,h,d=d1(s)){u&&s.startsWith("xlink:")?a==null?r.removeAttributeNS(ga,s.slice(6,s.length)):r.setAttributeNS(ga,s,a):a==null||d&&!gl(a)?r.removeAttribute(s):r.setAttribute(s,d?"":_n(a)?String(a):a)}function pa(r,s,a,u,h){if(s==="innerHTML"||s==="textContent"){a!=null&&(r[s]=s==="innerHTML"?dc(a):a);return}const d=r.tagName;if(s==="value"&&d!=="PROGRESS"&&!d.includes("-")){const m=d==="OPTION"?r.getAttribute("value")||"":r.value,I=a==null?r.type==="checkbox"?"on":"":String(a);(m!==I||!("_value"in r))&&(r.value=I),a==null&&r.removeAttribute(s),r._value=a;return}let x=!1;if(a===""||a==null){const m=typeof r[s];m==="boolean"?a=gl(a):a==null&&m==="string"?(a="",x=!0):m==="number"&&(a=0,x=!0)}try{r[s]=a}catch{}x&&r.removeAttribute(h||s)}function pr(r,s,a,u){r.addEventListener(s,a,u)}function du(r,s,a,u){r.removeEventListener(s,a,u)}const wa=Symbol("_vei");function gu(r,s,a,u,h=null){const d=r[wa]||(r[wa]={}),x=d[s];if(u&&x)x.value=u;else{const[m,I]=xu(s);if(u){const w=d[s]=Au(u,h);pr(r,m,w,I)}else x&&(du(r,m,x,I),d[s]=void 0)}}const Aa=/(?:Once|Passive|Capture)$/;function xu(r){let s;if(Aa.test(r)){s={};let u;for(;u=r.match(Aa);)r=r.slice(0,r.length-u[0].length),s[u[0].toLowerCase()]=!0}return[r[2]===":"?r.slice(3):Er(r.slice(2)),s]}let Us=0;const pu=Promise.resolve(),wu=()=>Us||(pu.then(()=>Us=0),Us=Date.now());function Au(r,s){const a=u=>{if(!u._vts)u._vts=Date.now();else if(u._vts<=a.attached)return;Nn(Cu(u,a.value),s,5,[u])};return a.value=r,a.attached=wu(),a}function Cu(r,s){if(Ee(s)){const a=r.stopImmediatePropagation;return r.stopImmediatePropagation=()=>{a.call(r),r._stopped=!0},s.map(u=>h=>!h._stopped&&u&&u(h))}else return s}const Ca=r=>r.charCodeAt(0)===111&&r.charCodeAt(1)===110&&r.charCodeAt(2)>96&&r.charCodeAt(2)<123,mu=(r,s,a,u,h,d)=>{const x=h==="svg";s==="class"?au(r,u,x):s==="style"?fu(r,a,u):Qi(s)?ao(s)||gu(r,s,a,u,d):(s[0]==="."?(s=s.slice(1),!0):s[0]==="^"?(s=s.slice(1),!1):Eu(r,s,u,x))?(pa(r,s,u),!r.tagName.includes("-")&&(s==="value"||s==="checked"||s==="selected")&&xa(r,s,u,x,d,s!=="value")):r._isVueCE&&(/[A-Z]/.test(s)||!xt(u))?pa(r,nr(s),u,d,s):(s==="true-value"?r._trueValue=u:s==="false-value"&&(r._falseValue=u),xa(r,s,u,x))};function Eu(r,s,a,u){if(u)return!!(s==="innerHTML"||s==="textContent"||s in r&&Ca(s)&&be(a));if(s==="spellcheck"||s==="draggable"||s==="translate"||s==="autocorrect"||s==="sandbox"&&r.tagName==="IFRAME"||s==="form"||s==="list"&&r.tagName==="INPUT"||s==="type"&&r.tagName==="TEXTAREA")return!1;if(s==="width"||s==="height"){const h=r.tagName;if(h==="IMG"||h==="VIDEO"||h==="CANVAS"||h==="SOURCE")return!1}return Ca(s)&&xt(a)?!1:s in r}const Yi=r=>{const s=r.props["onUpdate:modelValue"]||!1;return Ee(s)?a=>Li(s,a):s};function Iu(r){r.target.composing=!0}function ma(r){const s=r.target;s.composing&&(s.composing=!1,s.dispatchEvent(new Event("input")))}const Hr=Symbol("_assign");function Ea(r,s,a){return s&&(r=r.trim()),a&&(r=$i(r)),r}const Dr={created(r,{modifiers:{lazy:s,trim:a,number:u}},h){r[Hr]=Yi(h);const d=u||h.props&&h.props.type==="number";pr(r,s?"change":"input",x=>{x.target.composing||r[Hr](Ea(r.value,a,d))}),(a||d)&&pr(r,"change",()=>{r.value=Ea(r.value,a,d)}),s||(pr(r,"compositionstart",Iu),pr(r,"compositionend",ma),pr(r,"change",ma))},mounted(r,{value:s}){r.value=s??""},beforeUpdate(r,{value:s,oldValue:a,modifiers:{lazy:u,trim:h,number:d}},x){if(r[Hr]=Yi(x),r.composing)return;const m=(d||r.type==="number")&&!/^0\d/.test(r.value)?$i(r.value):r.value,I=s??"";m!==I&&(document.activeElement===r&&r.type!=="range"&&(u&&s===a||h&&r.value.trim()===I)||(r.value=I))}},yu={deep:!0,created(r,{value:s,modifiers:{number:a}},u){const h=qi(s);pr(r,"change",()=>{const d=Array.prototype.filter.call(r.options,x=>x.selected).map(x=>a?$i(Xi(x)):Xi(x));r[Hr](r.multiple?h?new Set(d):d:d[0]),r._assigning=!0,vl(()=>{r._assigning=!1})}),r[Hr]=Yi(u)},mounted(r,{value:s}){Ia(r,s)},beforeUpdate(r,s,a){r[Hr]=Yi(a)},updated(r,{value:s}){r._assigning||Ia(r,s)}};function Ia(r,s){const a=r.multiple,u=Ee(s);if(!(a&&!u&&!qi(s))){for(let h=0,d=r.options.length;h<d;h++){const x=r.options[h],m=Xi(x);if(a)if(u){const I=typeof m;I==="string"||I==="number"?x.selected=s.some(w=>String(w)===String(m)):x.selected=x1(s,m)>-1}else x.selected=s.has(m);else if(ns(Xi(x),s)){r.selectedIndex!==h&&(r.selectedIndex=h);return}}!a&&r.selectedIndex!==-1&&(r.selectedIndex=-1)}}function Xi(r){return"_value"in r?r._value:r.value}const bu=["ctrl","shift","alt","meta"],Su={stop:r=>r.stopPropagation(),prevent:r=>r.preventDefault(),self:r=>r.target!==r.currentTarget,ctrl:r=>!r.ctrlKey,shift:r=>!r.shiftKey,alt:r=>!r.altKey,meta:r=>!r.metaKey,left:r=>"button"in r&&r.button!==0,middle:r=>"button"in r&&r.button!==1,right:r=>"button"in r&&r.button!==2,exact:(r,s)=>bu.some(a=>r[`${a}Key`]&&!s.includes(a))},Tu=(r,s)=>{const a=r._withMods||(r._withMods={}),u=s.join(".");return a[u]||(a[u]=(h,...d)=>{for(let x=0;x<s.length;x++){const m=Su[s[x]];if(m&&m(h,s))return}return r(h,...d)})},_u=Rt({patchProp:mu},su);let ya;function Nu(){return ya||(ya=F0(_u))}const Ou=(...r)=>{const s=Nu().createApp(...r),{mount:a}=s;return s.mount=u=>{const h=Ru(u);if(!h)return;const d=s._component;!be(d)&&!d.render&&!d.template&&(d.template=h.innerHTML),h.nodeType===1&&(h.textContent="");const x=a(h,!1,Mu(h));return h instanceof Element&&(h.removeAttribute("v-cloak"),h.setAttribute("data-v-app","")),x},s};function Mu(r){if(r instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&r instanceof MathMLElement)return"mathml"}function Ru(r){return xt(r)?document.querySelector(r):r}var ae;(function(r){r[r.QR_CODE=0]="QR_CODE",r[r.AZTEC=1]="AZTEC",r[r.CODABAR=2]="CODABAR",r[r.CODE_39=3]="CODE_39",r[r.CODE_93=4]="CODE_93",r[r.CODE_128=5]="CODE_128",r[r.DATA_MATRIX=6]="DATA_MATRIX",r[r.MAXICODE=7]="MAXICODE",r[r.ITF=8]="ITF",r[r.EAN_13=9]="EAN_13",r[r.EAN_8=10]="EAN_8",r[r.PDF_417=11]="PDF_417",r[r.RSS_14=12]="RSS_14",r[r.RSS_EXPANDED=13]="RSS_EXPANDED",r[r.UPC_A=14]="UPC_A",r[r.UPC_E=15]="UPC_E",r[r.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ae||(ae={}));var ba=new Map([[ae.QR_CODE,"QR_CODE"],[ae.AZTEC,"AZTEC"],[ae.CODABAR,"CODABAR"],[ae.CODE_39,"CODE_39"],[ae.CODE_93,"CODE_93"],[ae.CODE_128,"CODE_128"],[ae.DATA_MATRIX,"DATA_MATRIX"],[ae.MAXICODE,"MAXICODE"],[ae.ITF,"ITF"],[ae.EAN_13,"EAN_13"],[ae.EAN_8,"EAN_8"],[ae.PDF_417,"PDF_417"],[ae.RSS_14,"RSS_14"],[ae.RSS_EXPANDED,"RSS_EXPANDED"],[ae.UPC_A,"UPC_A"],[ae.UPC_E,"UPC_E"],[ae.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Sa;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.URL=1]="URL"})(Sa||(Sa={}));function Du(r){return Object.values(ae).includes(r)}var ir;(function(r){r[r.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",r[r.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(ir||(ir={}));var cn=function(){function r(){}return r.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",r.SCAN_DEFAULT_FPS=2,r.DEFAULT_DISABLE_FLIP=!1,r.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,r.DEFAULT_SUPPORTED_SCAN_TYPE=[ir.SCAN_TYPE_CAMERA,ir.SCAN_TYPE_FILE],r}(),gc=function(){function r(s,a){this.format=s,this.formatName=a}return r.prototype.toString=function(){return this.formatName},r.create=function(s){if(!ba.has(s))throw"".concat(s," not in html5QrcodeSupportedFormatsTextMap");return new r(s,ba.get(s))},r}(),Ta=function(){function r(){}return r.createFromText=function(s){var a={text:s};return{decodedText:s,result:a}},r.createFromQrcodeResult=function(s){return{decodedText:s.text,result:s}},r}(),$s;(function(r){r[r.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",r[r.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",r[r.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})($s||($s={}));var xc=function(){function r(){}return r.createFrom=function(s){return{errorMessage:s,type:$s.UNKWOWN_ERROR}},r}(),pc=function(){function r(s){this.verbose=s}return r.prototype.log=function(s){this.verbose&&console.log(s)},r.prototype.warn=function(s){this.verbose&&console.warn(s)},r.prototype.logError=function(s,a){(this.verbose||a===!0)&&console.error(s)},r.prototype.logErrors=function(s){if(s.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(s)},r}();function bn(r){return typeof r>"u"||r===null}function vu(r,s,a){return r>a?a:r<s?s:r}var Br=function(){function r(){}return r.codeParseError=function(s){return"QR code parse error, error = ".concat(s)},r.errorGettingUserMedia=function(s){return"Error getting userMedia, error = ".concat(s)},r.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},r.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},r.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},r.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},r.scannerPaused=function(){return"Scanner paused"},r}(),ze=function(){function r(){}return r.scanningStatus=function(){return"Scanning"},r.idleStatus=function(){return"Idle"},r.errorStatus=function(){return"Error"},r.permissionStatus=function(){return"Permission"},r.noCameraFoundErrorStatus=function(){return"No Cameras"},r.lastMatch=function(s){return"Last Match: ".concat(s)},r.codeScannerTitle=function(){return"Code Scanner"},r.cameraPermissionTitle=function(){return"Request Camera Permissions"},r.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},r.noCameraFound=function(){return"No camera found"},r.scanButtonStopScanningText=function(){return"Stop Scanning"},r.scanButtonStartScanningText=function(){return"Start Scanning"},r.torchOnButton=function(){return"Switch On Torch"},r.torchOffButton=function(){return"Switch Off Torch"},r.torchOnFailedMessage=function(){return"Failed to turn on torch"},r.torchOffFailedMessage=function(){return"Failed to turn off torch"},r.scanButtonScanningStarting=function(){return"Launching Camera..."},r.textIfCameraScanSelected=function(){return"Scan an Image File"},r.textIfFileScanSelected=function(){return"Scan using camera directly"},r.selectCamera=function(){return"Select Camera"},r.fileSelectionChooseImage=function(){return"Choose Image"},r.fileSelectionChooseAnother=function(){return"Choose Another"},r.fileSelectionNoImageSelected=function(){return"No image choosen"},r.anonymousCameraPrefix=function(){return"Anonymous Camera"},r.dragAndDropMessage=function(){return"Or drop an image to scan"},r.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},r.zoom=function(){return"zoom"},r.loadingImage=function(){return"Loading image..."},r.cameraScanAltText=function(){return"Camera based scan"},r.fileScanAltText=function(){return"Fule based scan"},r}(),_a=function(){function r(){}return r.poweredBy=function(){return"Powered by "},r.reportIssues=function(){return"Report issues"},r}(),wc=function(){function r(){}return r.isMediaStreamConstraintsValid=function(s,a){if(typeof s!="object"){var u=typeof s;return a.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(u,"."),!0),!1}for(var h=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],d=new Set(h),x=Object.keys(s),m=0,I=x;m<I.length;m++){var w=I[m];if(d.has(w))return a.logError("".concat(w," is not supported videoConstaints."),!0),!1}return!0},r}(),ei=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},eo={exports:{}};(function(r,s){(function(a,u){u(s)})(ei,function(a){function u(A){return A==null}var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,e){A.__proto__=e}||function(A,e){for(var t in e)e.hasOwnProperty(t)&&(A[t]=e[t])};function d(A,e){h(A,e);function t(){this.constructor=A}A.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function x(A,e){var t=Object.setPrototypeOf;t?t(A,e):A.__proto__=e}function m(A,e){e===void 0&&(e=A.constructor);var t=Error.captureStackTrace;t&&t(A,e)}var I=function(A){d(e,A);function e(t){var n=this.constructor,i=A.call(this,t)||this;return Object.defineProperty(i,"name",{value:n.name,enumerable:!1}),x(i,n.prototype),m(i),i}return e}(Error);class w extends I{constructor(e=void 0){super(e),this.message=e}getKind(){return this.constructor.kind}}w.kind="Exception";class y extends w{}y.kind="ArgumentException";class T extends w{}T.kind="IllegalArgumentException";class U{constructor(e){if(this.binarizer=e,e===null)throw new T("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(e,t){return this.binarizer.getBlackRow(e,t)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(e,t,n,i){const o=this.binarizer.getLuminanceSource().crop(e,t,n,i);return new U(this.binarizer.createBinarizer(o))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new U(this.binarizer.createBinarizer(e))}rotateCounterClockwise45(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new U(this.binarizer.createBinarizer(e))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class H extends w{static getChecksumInstance(){return new H}}H.kind="ChecksumException";class re{constructor(e){this.source=e}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class J{static arraycopy(e,t,n,i,o){for(;o--;)n[i++]=e[t++]}static currentTimeMillis(){return Date.now()}}class Ie extends w{}Ie.kind="IndexOutOfBoundsException";class pe extends Ie{constructor(e=void 0,t=void 0){super(t),this.index=e,this.message=t}}pe.kind="ArrayIndexOutOfBoundsException";class ce{static fill(e,t){for(let n=0,i=e.length;n<i;n++)e[n]=t}static fillWithin(e,t,n,i){ce.rangeCheck(e.length,t,n);for(let o=t;o<n;o++)e[o]=i}static rangeCheck(e,t,n){if(t>n)throw new T("fromIndex("+t+") > toIndex("+n+")");if(t<0)throw new pe(t);if(n>e)throw new pe(n)}static asList(...e){return e}static create(e,t,n){return Array.from({length:e}).map(o=>Array.from({length:t}).fill(n))}static createInt32Array(e,t,n){return Array.from({length:e}).map(o=>Int32Array.from({length:t}).fill(n))}static equals(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(let n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0}static hashCode(e){if(e===null)return 0;let t=1;for(const n of e)t=31*t+n;return t}static fillUint8Array(e,t){for(let n=0;n!==e.length;n++)e[n]=t}static copyOf(e,t){return e.slice(0,t)}static copyOfUint8Array(e,t){if(e.length<=t){const n=new Uint8Array(t);return n.set(e),n}return e.slice(0,t)}static copyOfRange(e,t,n){const i=n-t,o=new Int32Array(i);return J.arraycopy(e,t,o,0,i),o}static binarySearch(e,t,n){n===void 0&&(n=ce.numberComparator);let i=0,o=e.length-1;for(;i<=o;){const l=o+i>>1,c=n(t,e[l]);if(c>0)i=l+1;else if(c<0)o=l-1;else return l}return-i-1}static numberComparator(e,t){return e-t}}class ne{static numberOfTrailingZeros(e){let t;if(e===0)return 32;let n=31;return t=e<<16,t!==0&&(n-=16,e=t),t=e<<8,t!==0&&(n-=8,e=t),t=e<<4,t!==0&&(n-=4,e=t),t=e<<2,t!==0&&(n-=2,e=t),n-(e<<1>>>31)}static numberOfLeadingZeros(e){if(e===0)return 32;let t=1;return e>>>16||(t+=16,e<<=16),e>>>24||(t+=8,e<<=8),e>>>28||(t+=4,e<<=4),e>>>30||(t+=2,e<<=2),t-=e>>>31,t}static toHexString(e){return e.toString(16)}static toBinaryString(e){return String(parseInt(String(e),2))}static bitCount(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63}static truncDivision(e,t){return Math.trunc(e/t)}static parseInt(e,t=void 0){return parseInt(e,t)}}ne.MIN_VALUE_32_BITS=-2147483648,ne.MAX_VALUE=Number.MAX_SAFE_INTEGER;class te{constructor(e,t){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,t==null?this.bits=te.makeArray(e):this.bits=t)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(e){if(e>this.bits.length*32){const t=te.makeArray(e);J.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}}get(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0}set(e){this.bits[Math.floor(e/32)]|=1<<(e&31)}flip(e){this.bits[Math.floor(e/32)]^=1<<(e&31)}getNextSet(e){const t=this.size;if(e>=t)return t;const n=this.bits;let i=Math.floor(e/32),o=n[i];o&=~((1<<(e&31))-1);const l=n.length;for(;o===0;){if(++i===l)return t;o=n[i]}const c=i*32+ne.numberOfTrailingZeros(o);return c>t?t:c}getNextUnset(e){const t=this.size;if(e>=t)return t;const n=this.bits;let i=Math.floor(e/32),o=~n[i];o&=~((1<<(e&31))-1);const l=n.length;for(;o===0;){if(++i===l)return t;o=~n[i]}const c=i*32+ne.numberOfTrailingZeros(o);return c>t?t:c}setBulk(e,t){this.bits[Math.floor(e/32)]=t}setRange(e,t){if(t<e||e<0||t>this.size)throw new T;if(t===e)return;t--;const n=Math.floor(e/32),i=Math.floor(t/32),o=this.bits;for(let l=n;l<=i;l++){const c=l>n?0:e&31,g=(2<<(l<i?31:t&31))-(1<<c);o[l]|=g}}clear(){const e=this.bits.length,t=this.bits;for(let n=0;n<e;n++)t[n]=0}isRange(e,t,n){if(t<e||e<0||t>this.size)throw new T;if(t===e)return!0;t--;const i=Math.floor(e/32),o=Math.floor(t/32),l=this.bits;for(let c=i;c<=o;c++){const f=c>i?0:e&31,p=(2<<(c<o?31:t&31))-(1<<f)&4294967295;if((l[c]&p)!==(n?p:0))return!1}return!0}appendBit(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(e,t){if(t<0||t>32)throw new T("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(let n=t;n>0;n--)this.appendBit((e>>n-1&1)===1)}appendBitArray(e){const t=e.size;this.ensureCapacity(this.size+t);for(let n=0;n<t;n++)this.appendBit(e.get(n))}xor(e){if(this.size!==e.size)throw new T("Sizes don't match");const t=this.bits;for(let n=0,i=t.length;n<i;n++)t[n]^=e.bits[n]}toBytes(e,t,n,i){for(let o=0;o<i;o++){let l=0;for(let c=0;c<8;c++)this.get(e)&&(l|=1<<7-c),e++;t[n+o]=l}}getBitArray(){return this.bits}reverse(){const e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),n=t+1,i=this.bits;for(let o=0;o<n;o++){let l=i[o];l=l>>1&1431655765|(l&1431655765)<<1,l=l>>2&858993459|(l&858993459)<<2,l=l>>4&252645135|(l&252645135)<<4,l=l>>8&16711935|(l&16711935)<<8,l=l>>16&65535|(l&65535)<<16,e[t-o]=l}if(this.size!==n*32){const o=n*32-this.size;let l=e[0]>>>o;for(let c=1;c<n;c++){const f=e[c];l|=f<<32-o,e[c-1]=l,l=f>>>o}e[n-1]=l}this.bits=e}static makeArray(e){return new Int32Array(Math.floor((e+31)/32))}equals(e){if(!(e instanceof te))return!1;const t=e;return this.size===t.size&&ce.equals(this.bits,t.bits)}hashCode(){return 31*this.size+ce.hashCode(this.bits)}toString(){let e="";for(let t=0,n=this.size;t<n;t++)t&7||(e+=" "),e+=this.get(t)?"X":".";return e}clone(){return new te(this.size,this.bits.slice())}}var Ue;(function(A){A[A.OTHER=0]="OTHER",A[A.PURE_BARCODE=1]="PURE_BARCODE",A[A.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",A[A.TRY_HARDER=3]="TRY_HARDER",A[A.CHARACTER_SET=4]="CHARACTER_SET",A[A.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",A[A.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",A[A.ASSUME_GS1=7]="ASSUME_GS1",A[A.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",A[A.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",A[A.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(Ue||(Ue={}));var Te=Ue;class k extends w{static getFormatInstance(){return new k}}k.kind="FormatException";var K;(function(A){A[A.Cp437=0]="Cp437",A[A.ISO8859_1=1]="ISO8859_1",A[A.ISO8859_2=2]="ISO8859_2",A[A.ISO8859_3=3]="ISO8859_3",A[A.ISO8859_4=4]="ISO8859_4",A[A.ISO8859_5=5]="ISO8859_5",A[A.ISO8859_6=6]="ISO8859_6",A[A.ISO8859_7=7]="ISO8859_7",A[A.ISO8859_8=8]="ISO8859_8",A[A.ISO8859_9=9]="ISO8859_9",A[A.ISO8859_10=10]="ISO8859_10",A[A.ISO8859_11=11]="ISO8859_11",A[A.ISO8859_13=12]="ISO8859_13",A[A.ISO8859_14=13]="ISO8859_14",A[A.ISO8859_15=14]="ISO8859_15",A[A.ISO8859_16=15]="ISO8859_16",A[A.SJIS=16]="SJIS",A[A.Cp1250=17]="Cp1250",A[A.Cp1251=18]="Cp1251",A[A.Cp1252=19]="Cp1252",A[A.Cp1256=20]="Cp1256",A[A.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",A[A.UTF8=22]="UTF8",A[A.ASCII=23]="ASCII",A[A.Big5=24]="Big5",A[A.GB18030=25]="GB18030",A[A.EUC_KR=26]="EUC_KR"})(K||(K={}));class V{constructor(e,t,n,...i){this.valueIdentifier=e,this.name=n,typeof t=="number"?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=i,V.VALUE_IDENTIFIER_TO_ECI.set(e,this),V.NAME_TO_ECI.set(n,this);const o=this.values;for(let l=0,c=o.length;l!==c;l++){const f=o[l];V.VALUES_TO_ECI.set(f,this)}for(const l of i)V.NAME_TO_ECI.set(l,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(e){if(e<0||e>=900)throw new k("incorect value");const t=V.VALUES_TO_ECI.get(e);if(t===void 0)throw new k("incorect value");return t}static getCharacterSetECIByName(e){const t=V.NAME_TO_ECI.get(e);if(t===void 0)throw new k("incorect value");return t}equals(e){if(!(e instanceof V))return!1;const t=e;return this.getName()===t.getName()}}V.VALUE_IDENTIFIER_TO_ECI=new Map,V.VALUES_TO_ECI=new Map,V.NAME_TO_ECI=new Map,V.Cp437=new V(K.Cp437,Int32Array.from([0,2]),"Cp437"),V.ISO8859_1=new V(K.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),V.ISO8859_2=new V(K.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),V.ISO8859_3=new V(K.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),V.ISO8859_4=new V(K.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),V.ISO8859_5=new V(K.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),V.ISO8859_6=new V(K.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),V.ISO8859_7=new V(K.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),V.ISO8859_8=new V(K.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),V.ISO8859_9=new V(K.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),V.ISO8859_10=new V(K.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),V.ISO8859_11=new V(K.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),V.ISO8859_13=new V(K.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),V.ISO8859_14=new V(K.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),V.ISO8859_15=new V(K.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),V.ISO8859_16=new V(K.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),V.SJIS=new V(K.SJIS,20,"SJIS","Shift_JIS"),V.Cp1250=new V(K.Cp1250,21,"Cp1250","windows-1250"),V.Cp1251=new V(K.Cp1251,22,"Cp1251","windows-1251"),V.Cp1252=new V(K.Cp1252,23,"Cp1252","windows-1252"),V.Cp1256=new V(K.Cp1256,24,"Cp1256","windows-1256"),V.UnicodeBigUnmarked=new V(K.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),V.UTF8=new V(K.UTF8,26,"UTF8","UTF-8"),V.ASCII=new V(K.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),V.Big5=new V(K.Big5,28,"Big5"),V.GB18030=new V(K.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),V.EUC_KR=new V(K.EUC_KR,30,"EUC_KR","EUC-KR");class gt extends w{}gt.kind="UnsupportedOperationException";class it{static decode(e,t){const n=this.encodingName(t);return this.customDecoder?this.customDecoder(e,n):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)}static shouldDecodeOnFallback(e){return!it.isBrowser()&&e==="ISO-8859-1"}static encode(e,t){const n=this.encodingName(t);return this.customEncoder?this.customEncoder(e,n):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(e){return typeof e=="string"?e:e.getName()}static encodingCharacterSet(e){return e instanceof V?e:V.getCharacterSetECIByName(e)}static decodeFallback(e,t){const n=this.encodingCharacterSet(t);if(it.isDecodeFallbackSupported(n)){let i="";for(let o=0,l=e.length;o<l;o++){let c=e[o].toString(16);c.length<2&&(c="0"+c),i+="%"+c}return decodeURIComponent(i)}if(n.equals(V.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new gt(`Encoding ${this.encodingName(t)} not supported by fallback.`)}static isDecodeFallbackSupported(e){return e.equals(V.UTF8)||e.equals(V.ISO8859_1)||e.equals(V.ASCII)}static encodeFallback(e){const n=btoa(unescape(encodeURIComponent(e))).split(""),i=[];for(let o=0;o<n.length;o++)i.push(n[o].charCodeAt(0));return new Uint8Array(i)}}class he{static castAsNonUtf8Char(e,t=null){const n=t?t.getName():this.ISO88591;return it.decode(new Uint8Array([e]),n)}static guessEncoding(e,t){if(t!=null&&t.get(Te.CHARACTER_SET)!==void 0)return t.get(Te.CHARACTER_SET).toString();const n=e.length;let i=!0,o=!0,l=!0,c=0,f=0,g=0,p=0,C=0,E=0,S=0,O=0,M=0,R=0,P=0;const Q=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191;for(let q=0;q<n&&(i||o||l);q++){const Z=e[q]&255;l&&(c>0?Z&128?c--:l=!1:Z&128&&(Z&64?(c++,Z&32?(c++,Z&16?(c++,Z&8?l=!1:p++):g++):f++):l=!1)),i&&(Z>127&&Z<160?i=!1:Z>159&&(Z<192||Z===215||Z===247)&&P++),o&&(C>0?Z<64||Z===127||Z>252?o=!1:C--:Z===128||Z===160||Z>239?o=!1:Z>160&&Z<224?(E++,O=0,S++,S>M&&(M=S)):Z>127?(C++,S=0,O++,O>R&&(R=O)):(S=0,O=0))}return l&&c>0&&(l=!1),o&&C>0&&(o=!1),l&&(Q||f+g+p>0)?he.UTF8:o&&(he.ASSUME_SHIFT_JIS||M>=3||R>=3)?he.SHIFT_JIS:i&&o?M===2&&E===2||P*10>=n?he.SHIFT_JIS:he.ISO88591:i?he.ISO88591:o?he.SHIFT_JIS:l?he.UTF8:he.PLATFORM_DEFAULT_ENCODING}static format(e,...t){let n=-1;function i(l,c,f,g,p,C){if(l==="%%")return"%";if(t[++n]===void 0)return;l=g?parseInt(g.substr(1)):void 0;let E=p?parseInt(p.substr(1)):void 0,S;switch(C){case"s":S=t[n];break;case"c":S=t[n][0];break;case"f":S=parseFloat(t[n]).toFixed(l);break;case"p":S=parseFloat(t[n]).toPrecision(l);break;case"e":S=parseFloat(t[n]).toExponential(l);break;case"x":S=parseInt(t[n]).toString(E||16);break;case"d":S=parseFloat(parseInt(t[n],E||10).toPrecision(l)).toFixed(0);break}S=typeof S=="object"?JSON.stringify(S):(+S).toString(E);let O=parseInt(f),M=f&&f[0]+""=="0"?"0":" ";for(;S.length<O;)S=c!==void 0?S+M:M+S;return S}let o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,i)}static getBytes(e,t){return it.encode(e,t)}static getCharCode(e,t=0){return e.charCodeAt(t)}static getCharAt(e){return String.fromCharCode(e)}}he.SHIFT_JIS=V.SJIS.getName(),he.GB2312="GB2312",he.ISO88591=V.ISO8859_1.getName(),he.EUC_JP="EUC_JP",he.UTF8=V.UTF8.getName(),he.PLATFORM_DEFAULT_ENCODING=he.UTF8,he.ASSUME_SHIFT_JIS=!1;class Re{constructor(e=""){this.value=e}enableDecoding(e){return this.encoding=e,this}append(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=he.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this}appendChars(e,t,n){for(let i=t;t<t+n;i++)this.append(e[i]);return this}length(){return this.value.length}charAt(e){return this.value.charAt(e)}deleteCharAt(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)}setCharAt(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)}substring(e,t){return this.value.substring(e,t)}setLengthToZero(){this.value=""}toString(){return this.value}insert(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+t.length)}}class Xe{constructor(e,t,n,i){if(this.width=e,this.height=t,this.rowSize=n,this.bits=i,t==null&&(t=e),this.height=t,e<1||t<1)throw new T("Both dimensions must be greater than 0");n==null&&(n=Math.floor((e+31)/32)),this.rowSize=n,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(e){const t=e.length,n=e[0].length,i=new Xe(n,t);for(let o=0;o<t;o++){const l=e[o];for(let c=0;c<n;c++)l[c]&&i.set(c,o)}return i}static parseFromString(e,t,n){if(e===null)throw new T("stringRepresentation cannot be null");const i=new Array(e.length);let o=0,l=0,c=-1,f=0,g=0;for(;g<e.length;)if(e.charAt(g)===`
`||e.charAt(g)==="\r"){if(o>l){if(c===-1)c=o-l;else if(o-l!==c)throw new T("row lengths do not match");l=o,f++}g++}else if(e.substring(g,g+t.length)===t)g+=t.length,i[o]=!0,o++;else if(e.substring(g,g+n.length)===n)g+=n.length,i[o]=!1,o++;else throw new T("illegal character encountered: "+e.substring(g));if(o>l){if(c===-1)c=o-l;else if(o-l!==c)throw new T("row lengths do not match");f++}const p=new Xe(c,f);for(let C=0;C<o;C++)i[C]&&p.set(Math.floor(C%c),Math.floor(C/c));return p}get(e,t){const n=t*this.rowSize+Math.floor(e/32);return(this.bits[n]>>>(e&31)&1)!==0}set(e,t){const n=t*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(e&31)&4294967295}unset(e,t){const n=t*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(e&31)&4294967295)}flip(e,t){const n=t*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(e&31)&4294967295}xor(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new T("input matrix dimensions do not match");const t=new te(Math.floor(this.width/32)+1),n=this.rowSize,i=this.bits;for(let o=0,l=this.height;o<l;o++){const c=o*n,f=e.getRow(o,t).getBitArray();for(let g=0;g<n;g++)i[c+g]^=f[g]}}clear(){const e=this.bits,t=e.length;for(let n=0;n<t;n++)e[n]=0}setRegion(e,t,n,i){if(t<0||e<0)throw new T("Left and top must be nonnegative");if(i<1||n<1)throw new T("Height and width must be at least 1");const o=e+n,l=t+i;if(l>this.height||o>this.width)throw new T("The region must fit inside the matrix");const c=this.rowSize,f=this.bits;for(let g=t;g<l;g++){const p=g*c;for(let C=e;C<o;C++)f[p+Math.floor(C/32)]|=1<<(C&31)&4294967295}}getRow(e,t){t==null||t.getSize()<this.width?t=new te(this.width):t.clear();const n=this.rowSize,i=this.bits,o=e*n;for(let l=0;l<n;l++)t.setBulk(l*32,i[o+l]);return t}setRow(e,t){J.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)}rotate180(){const e=this.getWidth(),t=this.getHeight();let n=new te(e),i=new te(e);for(let o=0,l=Math.floor((t+1)/2);o<l;o++)n=this.getRow(o,n),i=this.getRow(t-1-o,i),n.reverse(),i.reverse(),this.setRow(o,i),this.setRow(t-1-o,n)}getEnclosingRectangle(){const e=this.width,t=this.height,n=this.rowSize,i=this.bits;let o=e,l=t,c=-1,f=-1;for(let g=0;g<t;g++)for(let p=0;p<n;p++){const C=i[g*n+p];if(C!==0){if(g<l&&(l=g),g>f&&(f=g),p*32<o){let E=0;for(;!(C<<31-E&4294967295);)E++;p*32+E<o&&(o=p*32+E)}if(p*32+31>c){let E=31;for(;!(C>>>E);)E--;p*32+E>c&&(c=p*32+E)}}}return c<o||f<l?null:Int32Array.from([o,l,c-o+1,f-l+1])}getTopLeftOnBit(){const e=this.rowSize,t=this.bits;let n=0;for(;n<t.length&&t[n]===0;)n++;if(n===t.length)return null;const i=n/e;let o=n%e*32;const l=t[n];let c=0;for(;!(l<<31-c&4294967295);)c++;return o+=c,Int32Array.from([o,i])}getBottomRightOnBit(){const e=this.rowSize,t=this.bits;let n=t.length-1;for(;n>=0&&t[n]===0;)n--;if(n<0)return null;const i=Math.floor(n/e);let o=Math.floor(n%e)*32;const l=t[n];let c=31;for(;!(l>>>c);)c--;return o+=c,Int32Array.from([o,i])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(e){if(!(e instanceof Xe))return!1;const t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&ce.equals(this.bits,t.bits)}hashCode(){let e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+ce.hashCode(this.bits),e}toString(e="X ",t="  ",n=`
`){return this.buildToString(e,t,n)}buildToString(e,t,n){let i=new Re;for(let o=0,l=this.height;o<l;o++){for(let c=0,f=this.width;c<f;c++)i.append(this.get(c,o)?e:t);i.append(n)}return i.toString()}clone(){return new Xe(this.width,this.height,this.rowSize,this.bits.slice())}}class L extends w{static getNotFoundInstance(){return new L}}L.kind="NotFoundException";class _e extends re{constructor(e){super(e),this.luminances=_e.EMPTY,this.buckets=new Int32Array(_e.LUMINANCE_BUCKETS)}getBlackRow(e,t){const n=this.getLuminanceSource(),i=n.getWidth();t==null||t.getSize()<i?t=new te(i):t.clear(),this.initArrays(i);const o=n.getRow(e,this.luminances),l=this.buckets;for(let f=0;f<i;f++)l[(o[f]&255)>>_e.LUMINANCE_SHIFT]++;const c=_e.estimateBlackPoint(l);if(i<3)for(let f=0;f<i;f++)(o[f]&255)<c&&t.set(f);else{let f=o[0]&255,g=o[1]&255;for(let p=1;p<i-1;p++){const C=o[p+1]&255;(g*4-f-C)/2<c&&t.set(p),f=g,g=C}}return t}getBlackMatrix(){const e=this.getLuminanceSource(),t=e.getWidth(),n=e.getHeight(),i=new Xe(t,n);this.initArrays(t);const o=this.buckets;for(let f=1;f<5;f++){const g=Math.floor(n*f/5),p=e.getRow(g,this.luminances),C=Math.floor(t*4/5);for(let E=Math.floor(t/5);E<C;E++){const S=p[E]&255;o[S>>_e.LUMINANCE_SHIFT]++}}const l=_e.estimateBlackPoint(o),c=e.getMatrix();for(let f=0;f<n;f++){const g=f*t;for(let p=0;p<t;p++)(c[g+p]&255)<l&&i.set(p,f)}return i}createBinarizer(e){return new _e(e)}initArrays(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));const t=this.buckets;for(let n=0;n<_e.LUMINANCE_BUCKETS;n++)t[n]=0}static estimateBlackPoint(e){const t=e.length;let n=0,i=0,o=0;for(let p=0;p<t;p++)e[p]>o&&(i=p,o=e[p]),e[p]>n&&(n=e[p]);let l=0,c=0;for(let p=0;p<t;p++){const C=p-i,E=e[p]*C*C;E>c&&(l=p,c=E)}if(i>l){const p=i;i=l,l=p}if(l-i<=t/16)throw new L;let f=l-1,g=-1;for(let p=l-1;p>i;p--){const C=p-i,E=C*C*(l-p)*(n-e[p]);E>g&&(f=p,g=E)}return f<<_e.LUMINANCE_SHIFT}}_e.LUMINANCE_BITS=5,_e.LUMINANCE_SHIFT=8-_e.LUMINANCE_BITS,_e.LUMINANCE_BUCKETS=1<<_e.LUMINANCE_BITS,_e.EMPTY=Uint8ClampedArray.from([0]);class se extends _e{constructor(e){super(e),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const e=this.getLuminanceSource(),t=e.getWidth(),n=e.getHeight();if(t>=se.MINIMUM_DIMENSION&&n>=se.MINIMUM_DIMENSION){const i=e.getMatrix();let o=t>>se.BLOCK_SIZE_POWER;t&se.BLOCK_SIZE_MASK&&o++;let l=n>>se.BLOCK_SIZE_POWER;n&se.BLOCK_SIZE_MASK&&l++;const c=se.calculateBlackPoints(i,o,l,t,n),f=new Xe(t,n);se.calculateThresholdForBlock(i,o,l,t,n,c,f),this.matrix=f}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(e){return new se(e)}static calculateThresholdForBlock(e,t,n,i,o,l,c){const f=o-se.BLOCK_SIZE,g=i-se.BLOCK_SIZE;for(let p=0;p<n;p++){let C=p<<se.BLOCK_SIZE_POWER;C>f&&(C=f);const E=se.cap(p,2,n-3);for(let S=0;S<t;S++){let O=S<<se.BLOCK_SIZE_POWER;O>g&&(O=g);const M=se.cap(S,2,t-3);let R=0;for(let Q=-2;Q<=2;Q++){const q=l[E+Q];R+=q[M-2]+q[M-1]+q[M]+q[M+1]+q[M+2]}const P=R/25;se.thresholdBlock(e,O,C,P,i,c)}}}static cap(e,t,n){return e<t?t:e>n?n:e}static thresholdBlock(e,t,n,i,o,l){for(let c=0,f=n*o+t;c<se.BLOCK_SIZE;c++,f+=o)for(let g=0;g<se.BLOCK_SIZE;g++)(e[f+g]&255)<=i&&l.set(t+g,n+c)}static calculateBlackPoints(e,t,n,i,o){const l=o-se.BLOCK_SIZE,c=i-se.BLOCK_SIZE,f=new Array(n);for(let g=0;g<n;g++){f[g]=new Int32Array(t);let p=g<<se.BLOCK_SIZE_POWER;p>l&&(p=l);for(let C=0;C<t;C++){let E=C<<se.BLOCK_SIZE_POWER;E>c&&(E=c);let S=0,O=255,M=0;for(let P=0,Q=p*i+E;P<se.BLOCK_SIZE;P++,Q+=i){for(let q=0;q<se.BLOCK_SIZE;q++){const Z=e[Q+q]&255;S+=Z,Z<O&&(O=Z),Z>M&&(M=Z)}if(M-O>se.MIN_DYNAMIC_RANGE)for(P++,Q+=i;P<se.BLOCK_SIZE;P++,Q+=i)for(let q=0;q<se.BLOCK_SIZE;q++)S+=e[Q+q]&255}let R=S>>se.BLOCK_SIZE_POWER*2;if(M-O<=se.MIN_DYNAMIC_RANGE&&(R=O/2,g>0&&C>0)){const P=(f[g-1][C]+2*f[g][C-1]+f[g-1][C-1])/4;O<P&&(R=P)}f[g][C]=R}}return f}}se.BLOCK_SIZE_POWER=3,se.BLOCK_SIZE=1<<se.BLOCK_SIZE_POWER,se.BLOCK_SIZE_MASK=se.BLOCK_SIZE-1,se.MINIMUM_DIMENSION=se.BLOCK_SIZE*5,se.MIN_DYNAMIC_RANGE=24;class De{constructor(e,t){this.width=e,this.height=t}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(e,t,n,i){throw new gt("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new gt("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new gt("This luminance source does not support rotation by 45 degrees.")}toString(){const e=new Uint8ClampedArray(this.width);let t=new Re;for(let n=0;n<this.height;n++){const i=this.getRow(n,e);for(let o=0;o<this.width;o++){const l=i[o]&255;let c;l<64?c="#":l<128?c="+":l<192?c=".":c=" ",t.append(c)}t.append(`
`)}return t.toString()}}class lt extends De{constructor(e){super(e.getWidth(),e.getHeight()),this.delegate=e}getRow(e,t){const n=this.delegate.getRow(e,t),i=this.getWidth();for(let o=0;o<i;o++)n[o]=255-(n[o]&255);return n}getMatrix(){const e=this.delegate.getMatrix(),t=this.getWidth()*this.getHeight(),n=new Uint8ClampedArray(t);for(let i=0;i<t;i++)n[i]=255-(e[i]&255);return n}isCropSupported(){return this.delegate.isCropSupported()}crop(e,t,n,i){return new lt(this.delegate.crop(e,t,n,i))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new lt(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new lt(this.delegate.rotateCounterClockwise45())}}class pt extends De{constructor(e){super(e.width,e.height),this.canvas=e,this.tempCanvasElement=null,this.buffer=pt.makeBufferFromCanvasImageData(e)}static makeBufferFromCanvasImageData(e){const t=e.getContext("2d").getImageData(0,0,e.width,e.height);return pt.toGrayscaleBuffer(t.data,e.width,e.height)}static toGrayscaleBuffer(e,t,n){const i=new Uint8ClampedArray(t*n);for(let o=0,l=0,c=e.length;o<c;o+=4,l++){let f;if(e[o+3]===0)f=255;else{const p=e[o],C=e[o+1],E=e[o+2];f=306*p+601*C+117*E+512>>10}i[l]=f}return i}getRow(e,t){if(e<0||e>=this.getHeight())throw new T("Requested row is outside the image: "+e);const n=this.getWidth(),i=e*n;return t===null?t=this.buffer.slice(i,i+n):(t.length<n&&(t=new Uint8ClampedArray(n)),t.set(this.buffer.slice(i,i+n))),t}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(e,t,n,i){return super.crop(e,t,n,i),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement}rotate(e){const t=this.getTempCanvasElement(),n=t.getContext("2d"),i=e*pt.DEGREE_TO_RADIANS,o=this.canvas.width,l=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(i))*o+Math.abs(Math.sin(i))*l),f=Math.ceil(Math.abs(Math.sin(i))*o+Math.abs(Math.cos(i))*l);return t.width=c,t.height=f,n.translate(c/2,f/2),n.rotate(i),n.drawImage(this.canvas,o/-2,l/-2),this.buffer=pt.makeBufferFromCanvasImageData(t),this}invert(){return new lt(this)}}pt.DEGREE_TO_RADIANS=Math.PI/180;class dn{constructor(e,t,n){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=n||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var qe=(globalThis||ei||self||window||void 0)&&(globalThis||ei||self||window||void 0).__awaiter||function(A,e,t,n){function i(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function c(p){try{g(n.next(p))}catch(C){l(C)}}function f(p){try{g(n.throw(p))}catch(C){l(C)}}function g(p){p.done?o(p.value):i(p.value).then(c,f)}g((n=n.apply(A,e||[])).next())})};class gn{constructor(e,t=500,n){this.reader=e,this.timeBetweenScansMillis=t,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(e){this._timeBetweenDecodingAttempts=e<0?0:e}set hints(e){this._hints=e||null}get hints(){return this._hints}listVideoInputDevices(){return qe(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const e=yield navigator.mediaDevices.enumerateDevices(),t=[];for(const n of e){const i=n.kind==="video"?"videoinput":n.kind;if(i!=="videoinput")continue;const o=n.deviceId||n.id,l=n.label||`Video device ${t.length+1}`,c=n.groupId,f={deviceId:o,label:l,kind:i,groupId:c};t.push(f)}return t})}getVideoInputDevices(){return qe(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(t=>new dn(t.deviceId,t.label))})}findDeviceById(e){return qe(this,void 0,void 0,function*(){const t=yield this.listVideoInputDevices();return t?t.find(n=>n.deviceId===e):null})}decodeFromInputVideoDevice(e,t){return qe(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(e,t)})}decodeOnceFromVideoDevice(e,t){return qe(this,void 0,void 0,function*(){this.reset();let n;e?n={deviceId:{exact:e}}:n={facingMode:"environment"};const i={video:n};return yield this.decodeOnceFromConstraints(i,t)})}decodeOnceFromConstraints(e,t){return qe(this,void 0,void 0,function*(){const n=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeOnceFromStream(n,t)})}decodeOnceFromStream(e,t){return qe(this,void 0,void 0,function*(){this.reset();const n=yield this.attachStreamToVideo(e,t);return yield this.decodeOnce(n)})}decodeFromInputVideoDeviceContinuously(e,t,n){return qe(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(e,t,n)})}decodeFromVideoDevice(e,t,n){return qe(this,void 0,void 0,function*(){let i;e?i={deviceId:{exact:e}}:i={facingMode:"environment"};const o={video:i};return yield this.decodeFromConstraints(o,t,n)})}decodeFromConstraints(e,t,n){return qe(this,void 0,void 0,function*(){const i=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeFromStream(i,t,n)})}decodeFromStream(e,t,n){return qe(this,void 0,void 0,function*(){this.reset();const i=yield this.attachStreamToVideo(e,t);return yield this.decodeContinuously(i,n)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(e,t){return qe(this,void 0,void 0,function*(){const n=this.prepareVideoElement(t);return this.addVideoSource(n,e),this.videoElement=n,this.stream=e,yield this.playVideoOnLoadAsync(n),n})}playVideoOnLoadAsync(e){return new Promise((t,n)=>this.playVideoOnLoad(e,()=>t()))}playVideoOnLoad(e,t){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(e),e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)}isVideoPlaying(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2}tryPlayVideo(e){return qe(this,void 0,void 0,function*(){if(this.isVideoPlaying(e)){console.warn("Trying to play video that is already playing.");return}try{yield e.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(e,t){const n=document.getElementById(e);if(!n)throw new y(`element with id '${e}' not found`);if(n.nodeName.toLowerCase()!==t.toLowerCase())throw new y(`element with id '${e}' must be an ${t} element`);return n}decodeFromImage(e,t){if(!e&&!t)throw new y("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)}decodeFromVideo(e,t){if(!e&&!t)throw new y("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)}decodeFromVideoContinuously(e,t,n){if(e===void 0&&t===void 0)throw new y("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,n):this.decodeFromVideoElementContinuously(e,n)}decodeFromImageElement(e){if(!e)throw new y("An image element must be provided.");this.reset();const t=this.prepareImageElement(e);this.imageElement=t;let n;return this.isImageLoaded(t)?n=this.decodeOnce(t,!1,!0):n=this._decodeOnLoadImage(t),n}decodeFromVideoElement(e){const t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)}decodeFromVideoElementContinuously(e,t){const n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,t)}_decodeFromVideoElementSetup(e){if(!e)throw new y("A video element must be provided.");this.reset();const t=this.prepareVideoElement(e);return this.videoElement=t,t}decodeFromImageUrl(e){if(!e)throw new y("An URL must be provided.");this.reset();const t=this.prepareImageElement();this.imageElement=t;const n=this._decodeOnLoadImage(t);return t.src=e,n}decodeFromVideoUrl(e){if(!e)throw new y("An URL must be provided.");this.reset();const t=this.prepareVideoElement(),n=this.decodeFromVideoElement(t);return t.src=e,n}decodeFromVideoUrlContinuously(e,t){if(!e)throw new y("An URL must be provided.");this.reset();const n=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(n,t);return n.src=e,i}_decodeOnLoadImage(e){return new Promise((t,n)=>{this.imageLoadedListener=()=>this.decodeOnce(e,!1,!0).then(t,n),e.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(e){return qe(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(e),yield this.decodeOnce(e)})}_decodeOnLoadVideoContinuously(e,t){return qe(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(e),this.decodeContinuously(e,t)})}isImageLoaded(e){return!(!e.complete||e.naturalWidth===0)}prepareImageElement(e){let t;return typeof e>"u"&&(t=document.createElement("img"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t}prepareVideoElement(e){let t;return!e&&typeof document<"u"&&(t=document.createElement("video"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t}decodeOnce(e,t=!0,n=!0){this._stopAsyncDecode=!1;const i=(o,l)=>{if(this._stopAsyncDecode){l(new L("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const c=this.decode(e);o(c)}catch(c){const f=t&&c instanceof L,p=(c instanceof H||c instanceof k)&&n;if(f||p)return setTimeout(i,this._timeBetweenDecodingAttempts,o,l);l(c)}};return new Promise((o,l)=>i(o,l))}decodeContinuously(e,t){this._stopContinuousDecode=!1;const n=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const i=this.decode(e);t(i,null),setTimeout(n,this.timeBetweenScansMillis)}catch(i){t(null,i);const o=i instanceof H||i instanceof k,l=i instanceof L;(o||l)&&setTimeout(n,this._timeBetweenDecodingAttempts)}};n()}decode(e){const t=this.createBinaryBitmap(e);return this.decodeBitmap(t)}_isHTMLVideoElement(e){return e.videoWidth!==0}drawFrameOnCanvas(e,t,n){t||(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n||(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}drawImageOnCanvas(e,t,n=this.captureCanvasContext){t||(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n||(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}createBinaryBitmap(e){this.getCaptureCanvasContext(e),this._isHTMLVideoElement(e)?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);const t=this.getCaptureCanvas(e),n=new pt(t),i=new se(n);return new U(i)}getCaptureCanvasContext(e){if(!this.captureCanvasContext){const n=this.getCaptureCanvas(e).getContext("2d");this.captureCanvasContext=n}return this.captureCanvasContext}getCaptureCanvas(e){if(!this.captureCanvas){const t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas}decodeBitmap(e){return this.reader.decode(e,this._hints)}createCaptureCanvas(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const t=document.createElement("canvas");let n,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(n=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),t.style.width=n+"px",t.style.height=i+"px",t.width=n,t.height=i,t}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(e=>e.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}}cleanVideoSource(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")}}class Et{constructor(e,t,n=t==null?0:8*t.length,i,o,l=J.currentTimeMillis()){this.text=e,this.rawBytes=t,this.numBits=n,this.resultPoints=i,this.format=o,this.timestamp=l,this.text=e,this.rawBytes=t,n==null?this.numBits=t==null?0:8*t.length:this.numBits=n,this.resultPoints=i,this.format=o,this.resultMetadata=null,l==null?this.timestamp=J.currentTimeMillis():this.timestamp=l}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(e,t){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)}putAllMetadata(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))}addResultPoints(e){const t=this.resultPoints;if(t===null)this.resultPoints=e;else if(e!==null&&e.length>0){const n=new Array(t.length+e.length);J.arraycopy(t,0,n,0,t.length),J.arraycopy(e,0,n,t.length,e.length),this.resultPoints=n}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Gr;(function(A){A[A.AZTEC=0]="AZTEC",A[A.CODABAR=1]="CODABAR",A[A.CODE_39=2]="CODE_39",A[A.CODE_93=3]="CODE_93",A[A.CODE_128=4]="CODE_128",A[A.DATA_MATRIX=5]="DATA_MATRIX",A[A.EAN_8=6]="EAN_8",A[A.EAN_13=7]="EAN_13",A[A.ITF=8]="ITF",A[A.MAXICODE=9]="MAXICODE",A[A.PDF_417=10]="PDF_417",A[A.QR_CODE=11]="QR_CODE",A[A.RSS_14=12]="RSS_14",A[A.RSS_EXPANDED=13]="RSS_EXPANDED",A[A.UPC_A=14]="UPC_A",A[A.UPC_E=15]="UPC_E",A[A.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Gr||(Gr={}));var ue=Gr,Hn;(function(A){A[A.OTHER=0]="OTHER",A[A.ORIENTATION=1]="ORIENTATION",A[A.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",A[A.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",A[A.ISSUE_NUMBER=4]="ISSUE_NUMBER",A[A.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",A[A.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",A[A.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",A[A.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",A[A.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",A[A.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Hn||(Hn={}));var ct=Hn;class Vn{constructor(e,t,n,i,o=-1,l=-1){this.rawBytes=e,this.text=t,this.byteSegments=n,this.ecLevel=i,this.structuredAppendSequenceNumber=o,this.structuredAppendParity=l,this.numBits=e==null?0:8*e.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(e){this.numBits=e}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(e){this.errorsCorrected=e}getErasures(){return this.erasures}setErasures(e){this.erasures=e}getOther(){return this.other}setOther(e){this.other=e}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class on{exp(e){return this.expTable[e]}log(e){if(e===0)throw new T;return this.logTable[e]}static addOrSubtract(e,t){return e^t}}class Dt{constructor(e,t){if(t.length===0)throw new T;this.field=e;const n=t.length;if(n>1&&t[0]===0){let i=1;for(;i<n&&t[i]===0;)i++;i===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-i),J.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);const t=this.coefficients;let n;if(e===1){n=0;for(let l=0,c=t.length;l!==c;l++){const f=t[l];n=on.addOrSubtract(n,f)}return n}n=t[0];const i=t.length,o=this.field;for(let l=1;l<i;l++)n=on.addOrSubtract(o.multiply(e,n),t[l]);return n}addOrSubtract(e){if(!this.field.equals(e.field))throw new T("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,n=e.coefficients;if(t.length>n.length){const l=t;t=n,n=l}let i=new Int32Array(n.length);const o=n.length-t.length;J.arraycopy(n,0,i,0,o);for(let l=o;l<n.length;l++)i[l]=on.addOrSubtract(t[l-o],n[l]);return new Dt(this.field,i)}multiply(e){if(!this.field.equals(e.field))throw new T("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();const t=this.coefficients,n=t.length,i=e.coefficients,o=i.length,l=new Int32Array(n+o-1),c=this.field;for(let f=0;f<n;f++){const g=t[f];for(let p=0;p<o;p++)l[f+p]=on.addOrSubtract(l[f+p],c.multiply(g,i[p]))}return new Dt(c,l)}multiplyScalar(e){if(e===0)return this.field.getZero();if(e===1)return this;const t=this.coefficients.length,n=this.field,i=new Int32Array(t),o=this.coefficients;for(let l=0;l<t;l++)i[l]=n.multiply(o[l],e);return new Dt(n,i)}multiplyByMonomial(e,t){if(e<0)throw new T;if(t===0)return this.field.getZero();const n=this.coefficients,i=n.length,o=new Int32Array(i+e),l=this.field;for(let c=0;c<i;c++)o[c]=l.multiply(n[c],t);return new Dt(l,o)}divide(e){if(!this.field.equals(e.field))throw new T("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new T("Divide by 0");const t=this.field;let n=t.getZero(),i=this;const o=e.getCoefficient(e.getDegree()),l=t.inverse(o);for(;i.getDegree()>=e.getDegree()&&!i.isZero();){const c=i.getDegree()-e.getDegree(),f=t.multiply(i.getCoefficient(i.getDegree()),l),g=e.multiplyByMonomial(c,f),p=t.buildMonomial(c,f);n=n.addOrSubtract(p),i=i.addOrSubtract(g)}return[n,i]}toString(){let e="";for(let t=this.getDegree();t>=0;t--){let n=this.getCoefficient(t);if(n!==0){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),t===0||n!==1){const i=this.field.log(n);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}t!==0&&(t===1?e+="x":(e+="x^",e+=t))}}return e}}class _ extends w{}_.kind="ArithmeticException";class N extends on{constructor(e,t,n){super(),this.primitive=e,this.size=t,this.generatorBase=n;const i=new Int32Array(t);let o=1;for(let c=0;c<t;c++)i[c]=o,o*=2,o>=t&&(o^=e,o&=t-1);this.expTable=i;const l=new Int32Array(t);for(let c=0;c<t-1;c++)l[i[c]]=c;this.logTable=l,this.zero=new Dt(this,Int32Array.from([0])),this.one=new Dt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new T;if(t===0)return this.zero;const n=new Int32Array(e+1);return n[0]=t,new Dt(this,n)}inverse(e){if(e===0)throw new _;return this.expTable[this.size-this.logTable[e]-1]}multiply(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+ne.toHexString(this.primitive)+","+this.size+")"}equals(e){return e===this}}N.AZTEC_DATA_12=new N(4201,4096,1),N.AZTEC_DATA_10=new N(1033,1024,1),N.AZTEC_DATA_6=new N(67,64,1),N.AZTEC_PARAM=new N(19,16,1),N.QR_CODE_FIELD_256=new N(285,256,0),N.DATA_MATRIX_FIELD_256=new N(301,256,1),N.AZTEC_DATA_8=N.DATA_MATRIX_FIELD_256,N.MAXICODE_FIELD_64=N.AZTEC_DATA_6;class F extends w{}F.kind="ReedSolomonException";class W extends w{}W.kind="IllegalStateException";class Y{constructor(e){this.field=e}decode(e,t){const n=this.field,i=new Dt(n,e),o=new Int32Array(t);let l=!0;for(let S=0;S<t;S++){const O=i.evaluateAt(n.exp(S+n.getGeneratorBase()));o[o.length-1-S]=O,O!==0&&(l=!1)}if(l)return;const c=new Dt(n,o),f=this.runEuclideanAlgorithm(n.buildMonomial(t,1),c,t),g=f[0],p=f[1],C=this.findErrorLocations(g),E=this.findErrorMagnitudes(p,C);for(let S=0;S<C.length;S++){const O=e.length-1-n.log(C[S]);if(O<0)throw new F("Bad error location");e[O]=N.addOrSubtract(e[O],E[S])}}runEuclideanAlgorithm(e,t,n){if(e.getDegree()<t.getDegree()){const S=e;e=t,t=S}const i=this.field;let o=e,l=t,c=i.getZero(),f=i.getOne();for(;l.getDegree()>=(n/2|0);){let S=o,O=c;if(o=l,c=f,o.isZero())throw new F("r_{i-1} was zero");l=S;let M=i.getZero();const R=o.getCoefficient(o.getDegree()),P=i.inverse(R);for(;l.getDegree()>=o.getDegree()&&!l.isZero();){const Q=l.getDegree()-o.getDegree(),q=i.multiply(l.getCoefficient(l.getDegree()),P);M=M.addOrSubtract(i.buildMonomial(Q,q)),l=l.addOrSubtract(o.multiplyByMonomial(Q,q))}if(f=M.multiply(c).addOrSubtract(O),l.getDegree()>=o.getDegree())throw new W("Division algorithm failed to reduce polynomial?")}const g=f.getCoefficient(0);if(g===0)throw new F("sigmaTilde(0) was zero");const p=i.inverse(g),C=f.multiplyScalar(p),E=l.multiplyScalar(p);return[C,E]}findErrorLocations(e){const t=e.getDegree();if(t===1)return Int32Array.from([e.getCoefficient(1)]);const n=new Int32Array(t);let i=0;const o=this.field;for(let l=1;l<o.getSize()&&i<t;l++)e.evaluateAt(l)===0&&(n[i]=o.inverse(l),i++);if(i!==t)throw new F("Error locator degree does not match number of roots");return n}findErrorMagnitudes(e,t){const n=t.length,i=new Int32Array(n),o=this.field;for(let l=0;l<n;l++){const c=o.inverse(t[l]);let f=1;for(let g=0;g<n;g++)if(l!==g){const p=o.multiply(t[g],c),C=p&1?p&-2:p|1;f=o.multiply(f,C)}i[l]=o.multiply(e.evaluateAt(c),o.inverse(f)),o.getGeneratorBase()!==0&&(i[l]=o.multiply(i[l],c))}return i}}var j;(function(A){A[A.UPPER=0]="UPPER",A[A.LOWER=1]="LOWER",A[A.MIXED=2]="MIXED",A[A.DIGIT=3]="DIGIT",A[A.PUNCT=4]="PUNCT",A[A.BINARY=5]="BINARY"})(j||(j={}));class X{decode(e){this.ddata=e;let t=e.getBits(),n=this.extractBits(t),i=this.correctBits(n),o=X.convertBoolArrayToByteArray(i),l=X.getEncodedData(i),c=new Vn(o,l,null,null);return c.setNumBits(i.length),c}static highLevelDecode(e){return this.getEncodedData(e)}static getEncodedData(e){let t=e.length,n=j.UPPER,i=j.UPPER,o="",l=0;for(;l<t;)if(i===j.BINARY){if(t-l<5)break;let c=X.readCode(e,l,5);if(l+=5,c===0){if(t-l<11)break;c=X.readCode(e,l,11)+31,l+=11}for(let f=0;f<c;f++){if(t-l<8){l=t;break}const g=X.readCode(e,l,8);o+=he.castAsNonUtf8Char(g),l+=8}i=n}else{let c=i===j.DIGIT?4:5;if(t-l<c)break;let f=X.readCode(e,l,c);l+=c;let g=X.getCharacter(i,f);g.startsWith("CTRL_")?(n=i,i=X.getTable(g.charAt(5)),g.charAt(6)==="L"&&(n=i)):(o+=g,i=n)}return o}static getTable(e){switch(e){case"L":return j.LOWER;case"P":return j.PUNCT;case"M":return j.MIXED;case"D":return j.DIGIT;case"B":return j.BINARY;case"U":default:return j.UPPER}}static getCharacter(e,t){switch(e){case j.UPPER:return X.UPPER_TABLE[t];case j.LOWER:return X.LOWER_TABLE[t];case j.MIXED:return X.MIXED_TABLE[t];case j.PUNCT:return X.PUNCT_TABLE[t];case j.DIGIT:return X.DIGIT_TABLE[t];default:throw new W("Bad table")}}correctBits(e){let t,n;this.ddata.getNbLayers()<=2?(n=6,t=N.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,t=N.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,t=N.AZTEC_DATA_10):(n=12,t=N.AZTEC_DATA_12);let i=this.ddata.getNbDatablocks(),o=e.length/n;if(o<i)throw new k;let l=e.length%n,c=new Int32Array(o);for(let E=0;E<o;E++,l+=n)c[E]=X.readCode(e,l,n);try{new Y(t).decode(c,o-i)}catch(E){throw new k(E)}let f=(1<<n)-1,g=0;for(let E=0;E<i;E++){let S=c[E];if(S===0||S===f)throw new k;(S===1||S===f-1)&&g++}let p=new Array(i*n-g),C=0;for(let E=0;E<i;E++){let S=c[E];if(S===1||S===f-1)p.fill(S>1,C,C+n-1),C+=n-1;else for(let O=n-1;O>=0;--O)p[C++]=(S&1<<O)!==0}return p}extractBits(e){let t=this.ddata.isCompact(),n=this.ddata.getNbLayers(),i=(t?11:14)+n*4,o=new Int32Array(i),l=new Array(this.totalBitsInLayer(n,t));if(t)for(let c=0;c<o.length;c++)o[c]=c;else{let c=i+1+2*ne.truncDivision(ne.truncDivision(i,2)-1,15),f=i/2,g=ne.truncDivision(c,2);for(let p=0;p<f;p++){let C=p+ne.truncDivision(p,15);o[f-p-1]=g-C-1,o[f+p]=g+C+1}}for(let c=0,f=0;c<n;c++){let g=(n-c)*4+(t?9:12),p=c*2,C=i-1-p;for(let E=0;E<g;E++){let S=E*2;for(let O=0;O<2;O++)l[f+S+O]=e.get(o[p+O],o[p+E]),l[f+2*g+S+O]=e.get(o[p+E],o[C-O]),l[f+4*g+S+O]=e.get(o[C-O],o[C-E]),l[f+6*g+S+O]=e.get(o[C-E],o[p+O])}f+=g*8}return l}static readCode(e,t,n){let i=0;for(let o=t;o<t+n;o++)i<<=1,e[o]&&(i|=1);return i}static readByte(e,t){let n=e.length-t;return n>=8?X.readCode(e,t,8):X.readCode(e,t,n)<<8-n}static convertBoolArrayToByteArray(e){let t=new Uint8Array((e.length+7)/8);for(let n=0;n<t.length;n++)t[n]=X.readByte(e,8*n);return t}totalBitsInLayer(e,t){return((t?88:112)+16*e)*e}}X.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],X.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],X.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],X.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],X.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class G{constructor(){}static round(e){return e===NaN?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0}static distance(e,t,n,i){const o=e-n,l=t-i;return Math.sqrt(o*o+l*l)}static sum(e){let t=0;for(let n=0,i=e.length;n!==i;n++){const o=e[n];t+=o}return t}}class ${static floatToIntBits(e){return e}}$.MAX_VALUE=Number.MAX_SAFE_INTEGER;class v{constructor(e,t){this.x=e,this.y=t}getX(){return this.x}getY(){return this.y}equals(e){if(e instanceof v){const t=e;return this.x===t.x&&this.y===t.y}return!1}hashCode(){return 31*$.floatToIntBits(this.x)+$.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(e){const t=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]);let o,l,c;if(n>=t&&n>=i?(l=e[0],o=e[1],c=e[2]):i>=n&&i>=t?(l=e[1],o=e[0],c=e[2]):(l=e[2],o=e[0],c=e[1]),this.crossProductZ(o,l,c)<0){const f=o;o=c,c=f}e[0]=o,e[1]=l,e[2]=c}static distance(e,t){return G.distance(e.x,e.y,t.x,t.y)}static crossProductZ(e,t,n){const i=t.x,o=t.y;return(n.x-i)*(e.y-o)-(n.y-o)*(e.x-i)}}class de{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class ie extends de{constructor(e,t,n,i,o){super(e,t),this.compact=n,this.nbDatablocks=i,this.nbLayers=o}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class le{constructor(e,t,n,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),t==null&&(t=le.INIT_SIZE),n==null&&(n=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);const o=t/2|0;if(this.leftInit=n-o,this.rightInit=n+o,this.upInit=i-o,this.downInit=i+o,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new L}detect(){let e=this.leftInit,t=this.rightInit,n=this.upInit,i=this.downInit,o=!1,l=!0,c=!1,f=!1,g=!1,p=!1,C=!1;const E=this.width,S=this.height;for(;l;){l=!1;let O=!0;for(;(O||!f)&&t<E;)O=this.containsBlackPoint(n,i,t,!1),O?(t++,l=!0,f=!0):f||t++;if(t>=E){o=!0;break}let M=!0;for(;(M||!g)&&i<S;)M=this.containsBlackPoint(e,t,i,!0),M?(i++,l=!0,g=!0):g||i++;if(i>=S){o=!0;break}let R=!0;for(;(R||!p)&&e>=0;)R=this.containsBlackPoint(n,i,e,!1),R?(e--,l=!0,p=!0):p||e--;if(e<0){o=!0;break}let P=!0;for(;(P||!C)&&n>=0;)P=this.containsBlackPoint(e,t,n,!0),P?(n--,l=!0,C=!0):C||n--;if(n<0){o=!0;break}l&&(c=!0)}if(!o&&c){const O=t-e;let M=null;for(let q=1;M===null&&q<O;q++)M=this.getBlackPointOnSegment(e,i-q,e+q,i);if(M==null)throw new L;let R=null;for(let q=1;R===null&&q<O;q++)R=this.getBlackPointOnSegment(e,n+q,e+q,n);if(R==null)throw new L;let P=null;for(let q=1;P===null&&q<O;q++)P=this.getBlackPointOnSegment(t,n+q,t-q,n);if(P==null)throw new L;let Q=null;for(let q=1;Q===null&&q<O;q++)Q=this.getBlackPointOnSegment(t,i-q,t-q,i);if(Q==null)throw new L;return this.centerEdges(Q,M,P,R)}else throw new L}getBlackPointOnSegment(e,t,n,i){const o=G.round(G.distance(e,t,n,i)),l=(n-e)/o,c=(i-t)/o,f=this.image;for(let g=0;g<o;g++){const p=G.round(e+g*l),C=G.round(t+g*c);if(f.get(p,C))return new v(p,C)}return null}centerEdges(e,t,n,i){const o=e.getX(),l=e.getY(),c=t.getX(),f=t.getY(),g=n.getX(),p=n.getY(),C=i.getX(),E=i.getY(),S=le.CORR;return o<this.width/2?[new v(C-S,E+S),new v(c+S,f+S),new v(g-S,p-S),new v(o+S,l-S)]:[new v(C+S,E+S),new v(c+S,f-S),new v(g-S,p+S),new v(o-S,l-S)]}containsBlackPoint(e,t,n,i){const o=this.image;if(i){for(let l=e;l<=t;l++)if(o.get(l,n))return!0}else for(let l=e;l<=t;l++)if(o.get(n,l))return!0;return!1}}le.INIT_SIZE=10,le.CORR=1;class we{static checkAndNudgePoints(e,t){const n=e.getWidth(),i=e.getHeight();let o=!0;for(let l=0;l<t.length&&o;l+=2){const c=Math.floor(t[l]),f=Math.floor(t[l+1]);if(c<-1||c>n||f<-1||f>i)throw new L;o=!1,c===-1?(t[l]=0,o=!0):c===n&&(t[l]=n-1,o=!0),f===-1?(t[l+1]=0,o=!0):f===i&&(t[l+1]=i-1,o=!0)}o=!0;for(let l=t.length-2;l>=0&&o;l-=2){const c=Math.floor(t[l]),f=Math.floor(t[l+1]);if(c<-1||c>n||f<-1||f>i)throw new L;o=!1,c===-1?(t[l]=0,o=!0):c===n&&(t[l]=n-1,o=!0),f===-1?(t[l+1]=0,o=!0):f===i&&(t[l+1]=i-1,o=!0)}}}class Ce{constructor(e,t,n,i,o,l,c,f,g){this.a11=e,this.a21=t,this.a31=n,this.a12=i,this.a22=o,this.a32=l,this.a13=c,this.a23=f,this.a33=g}static quadrilateralToQuadrilateral(e,t,n,i,o,l,c,f,g,p,C,E,S,O,M,R){const P=Ce.quadrilateralToSquare(e,t,n,i,o,l,c,f);return Ce.squareToQuadrilateral(g,p,C,E,S,O,M,R).times(P)}transformPoints(e){const t=e.length,n=this.a11,i=this.a12,o=this.a13,l=this.a21,c=this.a22,f=this.a23,g=this.a31,p=this.a32,C=this.a33;for(let E=0;E<t;E+=2){const S=e[E],O=e[E+1],M=o*S+f*O+C;e[E]=(n*S+l*O+g)/M,e[E+1]=(i*S+c*O+p)/M}}transformPointsWithValues(e,t){const n=this.a11,i=this.a12,o=this.a13,l=this.a21,c=this.a22,f=this.a23,g=this.a31,p=this.a32,C=this.a33,E=e.length;for(let S=0;S<E;S++){const O=e[S],M=t[S],R=o*O+f*M+C;e[S]=(n*O+l*M+g)/R,t[S]=(i*O+c*M+p)/R}}static squareToQuadrilateral(e,t,n,i,o,l,c,f){const g=e-n+o-c,p=t-i+l-f;if(g===0&&p===0)return new Ce(n-e,o-n,e,i-t,l-i,t,0,0,1);{const C=n-o,E=c-o,S=i-l,O=f-l,M=C*O-E*S,R=(g*O-E*p)/M,P=(C*p-g*S)/M;return new Ce(n-e+R*n,c-e+P*c,e,i-t+R*i,f-t+P*f,t,R,P,1)}}static quadrilateralToSquare(e,t,n,i,o,l,c,f){return Ce.squareToQuadrilateral(e,t,n,i,o,l,c,f).buildAdjoint()}buildAdjoint(){return new Ce(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(e){return new Ce(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}class We extends we{sampleGrid(e,t,n,i,o,l,c,f,g,p,C,E,S,O,M,R,P,Q,q){const Z=Ce.quadrilateralToQuadrilateral(i,o,l,c,f,g,p,C,E,S,O,M,R,P,Q,q);return this.sampleGridWithTransform(e,t,n,Z)}sampleGridWithTransform(e,t,n,i){if(t<=0||n<=0)throw new L;const o=new Xe(t,n),l=new Float32Array(2*t);for(let c=0;c<n;c++){const f=l.length,g=c+.5;for(let p=0;p<f;p+=2)l[p]=p/2+.5,l[p+1]=g;i.transformPoints(l),we.checkAndNudgePoints(e,l);try{for(let p=0;p<f;p+=2)e.get(Math.floor(l[p]),Math.floor(l[p+1]))&&o.set(p/2,c)}catch{throw new L}}return o}}class Oe{static setGridSampler(e){Oe.gridSampler=e}static getInstance(){return Oe.gridSampler}}Oe.gridSampler=new We;class He{constructor(e,t){this.x=e,this.y=t}toResultPoint(){return new v(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class It{constructor(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}detect(){return this.detectMirror(!1)}detectMirror(e){let t=this.getMatrixCenter(),n=this.getBullsEyeCorners(t);if(e){let l=n[0];n[0]=n[2],n[2]=l}this.extractParameters(n);let i=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),o=this.getMatrixCornerPoints(n);return new ie(i,o,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new L;let t=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(n,t);let i=0;for(let l=0;l<4;l++){let c=n[(this.shift+l)%4];this.compact?(i<<=7,i+=c>>1&127):(i<<=10,i+=(c>>2&992)+(c>>1&31))}let o=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(o>>6)+1,this.nbDataBlocks=(o&63)+1):(this.nbLayers=(o>>11)+1,this.nbDataBlocks=(o&2047)+1)}getRotation(e,t){let n=0;e.forEach((i,o,l)=>{let c=(i>>t-2<<1)+(i&1);n=(n<<3)+c}),n=((n&1)<<11)+(n>>1);for(let i=0;i<4;i++)if(ne.bitCount(n^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new L}getCorrectedParameterData(e,t){let n,i;t?(n=7,i=2):(n=10,i=4);let o=n-i,l=new Int32Array(n);for(let f=n-1;f>=0;--f)l[f]=e&15,e>>=4;try{new Y(N.AZTEC_PARAM).decode(l,o)}catch{throw new L}let c=0;for(let f=0;f<i;f++)c=(c<<4)+l[f];return c}getBullsEyeCorners(e){let t=e,n=e,i=e,o=e,l=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let C=this.getFirstDifferent(t,l,1,-1),E=this.getFirstDifferent(n,l,1,1),S=this.getFirstDifferent(i,l,-1,1),O=this.getFirstDifferent(o,l,-1,-1);if(this.nbCenterLayers>2){let M=this.distancePoint(O,C)*this.nbCenterLayers/(this.distancePoint(o,t)*(this.nbCenterLayers+2));if(M<.75||M>1.25||!this.isWhiteOrBlackRectangle(C,E,S,O))break}t=C,n=E,i=S,o=O,l=!l}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new L;this.compact=this.nbCenterLayers===5;let c=new v(t.getX()+.5,t.getY()-.5),f=new v(n.getX()+.5,n.getY()+.5),g=new v(i.getX()-.5,i.getY()+.5),p=new v(o.getX()-.5,o.getY()-.5);return this.expandSquare([c,f,g,p],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let e,t,n,i;try{let c=new le(this.image).detect();e=c[0],t=c[1],n=c[2],i=c[3]}catch{let f=this.image.getWidth()/2,g=this.image.getHeight()/2;e=this.getFirstDifferent(new He(f+7,g-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new He(f+7,g+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new He(f-7,g+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new He(f-7,g-7),!1,-1,-1).toResultPoint()}let o=G.round((e.getX()+i.getX()+t.getX()+n.getX())/4),l=G.round((e.getY()+i.getY()+t.getY()+n.getY())/4);try{let c=new le(this.image,15,o,l).detect();e=c[0],t=c[1],n=c[2],i=c[3]}catch{e=this.getFirstDifferent(new He(o+7,l-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new He(o+7,l+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new He(o-7,l+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new He(o-7,l-7),!1,-1,-1).toResultPoint()}return o=G.round((e.getX()+i.getX()+t.getX()+n.getX())/4),l=G.round((e.getY()+i.getY()+t.getY()+n.getY())/4),new He(o,l)}getMatrixCornerPoints(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())}sampleGrid(e,t,n,i,o){let l=Oe.getInstance(),c=this.getDimension(),f=c/2-this.nbCenterLayers,g=c/2+this.nbCenterLayers;return l.sampleGrid(e,c,c,f,f,g,f,g,g,f,g,t.getX(),t.getY(),n.getX(),n.getY(),i.getX(),i.getY(),o.getX(),o.getY())}sampleLine(e,t,n){let i=0,o=this.distanceResultPoint(e,t),l=o/n,c=e.getX(),f=e.getY(),g=l*(t.getX()-e.getX())/o,p=l*(t.getY()-e.getY())/o;for(let C=0;C<n;C++)this.image.get(G.round(c+C*g),G.round(f+C*p))&&(i|=1<<n-C-1);return i}isWhiteOrBlackRectangle(e,t,n,i){let o=3;e=new He(e.getX()-o,e.getY()+o),t=new He(t.getX()-o,t.getY()-o),n=new He(n.getX()+o,n.getY()-o),i=new He(i.getX()+o,i.getY()+o);let l=this.getColor(i,e);if(l===0)return!1;let c=this.getColor(e,t);return c!==l||(c=this.getColor(t,n),c!==l)?!1:(c=this.getColor(n,i),c===l)}getColor(e,t){let n=this.distancePoint(e,t),i=(t.getX()-e.getX())/n,o=(t.getY()-e.getY())/n,l=0,c=e.getX(),f=e.getY(),g=this.image.get(e.getX(),e.getY()),p=Math.ceil(n);for(let E=0;E<p;E++)c+=i,f+=o,this.image.get(G.round(c),G.round(f))!==g&&l++;let C=l/n;return C>.1&&C<.9?0:C<=.1===g?1:-1}getFirstDifferent(e,t,n,i){let o=e.getX()+n,l=e.getY()+i;for(;this.isValid(o,l)&&this.image.get(o,l)===t;)o+=n,l+=i;for(o-=n,l-=i;this.isValid(o,l)&&this.image.get(o,l)===t;)o+=n;for(o-=n;this.isValid(o,l)&&this.image.get(o,l)===t;)l+=i;return l-=i,new He(o,l)}expandSquare(e,t,n){let i=n/(2*t),o=e[0].getX()-e[2].getX(),l=e[0].getY()-e[2].getY(),c=(e[0].getX()+e[2].getX())/2,f=(e[0].getY()+e[2].getY())/2,g=new v(c+i*o,f+i*l),p=new v(c-i*o,f-i*l);o=e[1].getX()-e[3].getX(),l=e[1].getY()-e[3].getY(),c=(e[1].getX()+e[3].getX())/2,f=(e[1].getY()+e[3].getY())/2;let C=new v(c+i*o,f+i*l),E=new v(c-i*o,f-i*l);return[g,C,p,E]}isValid(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()}isValidPoint(e){let t=G.round(e.getX()),n=G.round(e.getY());return this.isValid(t,n)}distancePoint(e,t){return G.distance(e.getX(),e.getY(),t.getX(),t.getY())}distanceResultPoint(e,t){return G.distance(e.getX(),e.getY(),t.getX(),t.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(ne.truncDivision(this.nbLayers-4,8)+1)+15}}class vt{decode(e,t=null){let n=null,i=new It(e.getBlackMatrix()),o=null,l=null;try{let p=i.detectMirror(!1);o=p.getPoints(),this.reportFoundResultPoints(t,o),l=new X().decode(p)}catch(p){n=p}if(l==null)try{let p=i.detectMirror(!0);o=p.getPoints(),this.reportFoundResultPoints(t,o),l=new X().decode(p)}catch(p){throw n??p}let c=new Et(l.getText(),l.getRawBytes(),l.getNumBits(),o,ue.AZTEC,J.currentTimeMillis()),f=l.getByteSegments();f!=null&&c.putMetadata(ct.BYTE_SEGMENTS,f);let g=l.getECLevel();return g!=null&&c.putMetadata(ct.ERROR_CORRECTION_LEVEL,g),c}reportFoundResultPoints(e,t){if(e!=null){let n=e.get(Te.NEED_RESULT_POINT_CALLBACK);n!=null&&t.forEach((i,o,l)=>{n.foundPossibleResultPoint(i)})}}reset(){}}class qt extends gn{constructor(e=500){super(new vt,e)}}class Je{decode(e,t){try{return this.doDecode(e,t)}catch{if(t&&t.get(Te.TRY_HARDER)===!0&&e.isRotateSupported()){const o=e.rotateCounterClockwise(),l=this.doDecode(o,t),c=l.getResultMetadata();let f=270;c!==null&&c.get(ct.ORIENTATION)===!0&&(f=f+c.get(ct.ORIENTATION)%360),l.putMetadata(ct.ORIENTATION,f);const g=l.getResultPoints();if(g!==null){const p=o.getHeight();for(let C=0;C<g.length;C++)g[C]=new v(p-g[C].getY()-1,g[C].getX())}return l}else throw new L}}reset(){}doDecode(e,t){const n=e.getWidth(),i=e.getHeight();let o=new te(n);const l=t&&t.get(Te.TRY_HARDER)===!0,c=Math.max(1,i>>(l?8:5));let f;l?f=i:f=15;const g=Math.trunc(i/2);for(let p=0;p<f;p++){const C=Math.trunc((p+1)/2),E=(p&1)===0,S=g+c*(E?C:-C);if(S<0||S>=i)break;try{o=e.getBlackRow(S,o)}catch{continue}for(let O=0;O<2;O++){if(O===1&&(o.reverse(),t&&t.get(Te.NEED_RESULT_POINT_CALLBACK)===!0)){const M=new Map;t.forEach((R,P)=>M.set(P,R)),M.delete(Te.NEED_RESULT_POINT_CALLBACK),t=M}try{const M=this.decodeRow(S,o,t);if(O===1){M.putMetadata(ct.ORIENTATION,180);const R=M.getResultPoints();R!==null&&(R[0]=new v(n-R[0].getX()-1,R[0].getY()),R[1]=new v(n-R[1].getX()-1,R[1].getY()))}return M}catch{}}}throw new L}static recordPattern(e,t,n){const i=n.length;for(let g=0;g<i;g++)n[g]=0;const o=e.getSize();if(t>=o)throw new L;let l=!e.get(t),c=0,f=t;for(;f<o;){if(e.get(f)!==l)n[c]++;else{if(++c===i)break;n[c]=1,l=!l}f++}if(!(c===i||c===i-1&&f===o))throw new L}static recordPatternInReverse(e,t,n){let i=n.length,o=e.get(t);for(;t>0&&i>=0;)e.get(--t)!==o&&(i--,o=!o);if(i>=0)throw new L;Je.recordPattern(e,t+1,n)}static patternMatchVariance(e,t,n){const i=e.length;let o=0,l=0;for(let g=0;g<i;g++)o+=e[g],l+=t[g];if(o<l)return Number.POSITIVE_INFINITY;const c=o/l;n*=c;let f=0;for(let g=0;g<i;g++){const p=e[g],C=t[g]*c,E=p>C?p-C:C-p;if(E>n)return Number.POSITIVE_INFINITY;f+=E}return f/o}}class ee extends Je{static findStartPattern(e){const t=e.getSize(),n=e.getNextSet(0);let i=0,o=Int32Array.from([0,0,0,0,0,0]),l=n,c=!1;const f=6;for(let g=n;g<t;g++)if(e.get(g)!==c)o[i]++;else{if(i===f-1){let p=ee.MAX_AVG_VARIANCE,C=-1;for(let E=ee.CODE_START_A;E<=ee.CODE_START_C;E++){const S=Je.patternMatchVariance(o,ee.CODE_PATTERNS[E],ee.MAX_INDIVIDUAL_VARIANCE);S<p&&(p=S,C=E)}if(C>=0&&e.isRange(Math.max(0,l-(g-l)/2),l,!1))return Int32Array.from([l,g,C]);l+=o[0]+o[1],o=o.slice(2,o.length-1),o[i-1]=0,o[i]=0,i--}else i++;o[i]=1,c=!c}throw new L}static decodeCode(e,t,n){Je.recordPattern(e,n,t);let i=ee.MAX_AVG_VARIANCE,o=-1;for(let l=0;l<ee.CODE_PATTERNS.length;l++){const c=ee.CODE_PATTERNS[l],f=this.patternMatchVariance(t,c,ee.MAX_INDIVIDUAL_VARIANCE);f<i&&(i=f,o=l)}if(o>=0)return o;throw new L}decodeRow(e,t,n){const i=n&&n.get(Te.ASSUME_GS1)===!0,o=ee.findStartPattern(t),l=o[2];let c=0;const f=new Uint8Array(20);f[c++]=l;let g;switch(l){case ee.CODE_START_A:g=ee.CODE_CODE_A;break;case ee.CODE_START_B:g=ee.CODE_CODE_B;break;case ee.CODE_START_C:g=ee.CODE_CODE_C;break;default:throw new k}let p=!1,C=!1,E="",S=o[0],O=o[1];const M=Int32Array.from([0,0,0,0,0,0]);let R=0,P=0,Q=l,q=0,Z=!0,ve=!1,ye=!1;for(;!p;){const Mr=C;switch(C=!1,R=P,P=ee.decodeCode(t,M,O),f[c++]=P,P!==ee.CODE_STOP&&(Z=!0),P!==ee.CODE_STOP&&(q++,Q+=q*P),S=O,O+=M.reduce((n1,r1)=>n1+r1,0),P){case ee.CODE_START_A:case ee.CODE_START_B:case ee.CODE_START_C:throw new k}switch(g){case ee.CODE_CODE_A:if(P<64)ye===ve?E+=String.fromCharCode(32+P):E+=String.fromCharCode(32+P+128),ye=!1;else if(P<96)ye===ve?E+=String.fromCharCode(P-64):E+=String.fromCharCode(P+64),ye=!1;else switch(P!==ee.CODE_STOP&&(Z=!1),P){case ee.CODE_FNC_1:i&&(E.length===0?E+="]C1":E+="");break;case ee.CODE_FNC_2:case ee.CODE_FNC_3:break;case ee.CODE_FNC_4_A:!ve&&ye?(ve=!0,ye=!1):ve&&ye?(ve=!1,ye=!1):ye=!0;break;case ee.CODE_SHIFT:C=!0,g=ee.CODE_CODE_B;break;case ee.CODE_CODE_B:g=ee.CODE_CODE_B;break;case ee.CODE_CODE_C:g=ee.CODE_CODE_C;break;case ee.CODE_STOP:p=!0;break}break;case ee.CODE_CODE_B:if(P<96)ye===ve?E+=String.fromCharCode(32+P):E+=String.fromCharCode(32+P+128),ye=!1;else switch(P!==ee.CODE_STOP&&(Z=!1),P){case ee.CODE_FNC_1:i&&(E.length===0?E+="]C1":E+="");break;case ee.CODE_FNC_2:case ee.CODE_FNC_3:break;case ee.CODE_FNC_4_B:!ve&&ye?(ve=!0,ye=!1):ve&&ye?(ve=!1,ye=!1):ye=!0;break;case ee.CODE_SHIFT:C=!0,g=ee.CODE_CODE_A;break;case ee.CODE_CODE_A:g=ee.CODE_CODE_A;break;case ee.CODE_CODE_C:g=ee.CODE_CODE_C;break;case ee.CODE_STOP:p=!0;break}break;case ee.CODE_CODE_C:if(P<100)P<10&&(E+="0"),E+=P;else switch(P!==ee.CODE_STOP&&(Z=!1),P){case ee.CODE_FNC_1:i&&(E.length===0?E+="]C1":E+="");break;case ee.CODE_CODE_A:g=ee.CODE_CODE_A;break;case ee.CODE_CODE_B:g=ee.CODE_CODE_B;break;case ee.CODE_STOP:p=!0;break}break}Mr&&(g=g===ee.CODE_CODE_A?ee.CODE_CODE_B:ee.CODE_CODE_A)}const Vt=O-S;if(O=t.getNextUnset(O),!t.isRange(O,Math.min(t.getSize(),O+(O-S)/2),!1))throw new L;if(Q-=q*R,Q%103!==R)throw new H;const ln=E.length;if(ln===0)throw new L;ln>0&&Z&&(g===ee.CODE_CODE_C?E=E.substring(0,ln-2):E=E.substring(0,ln-1));const jt=(o[1]+o[0])/2,Ke=S+Vt/2,St=f.length,Wt=new Uint8Array(St);for(let Mr=0;Mr<St;Mr++)Wt[Mr]=f[Mr];const Or=[new v(jt,e),new v(Ke,e)];return new Et(E,Wt,0,Or,ue.CODE_128,new Date().getTime())}}ee.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],ee.MAX_AVG_VARIANCE=.25,ee.MAX_INDIVIDUAL_VARIANCE=.7,ee.CODE_SHIFT=98,ee.CODE_CODE_C=99,ee.CODE_CODE_B=100,ee.CODE_CODE_A=101,ee.CODE_FNC_1=102,ee.CODE_FNC_2=97,ee.CODE_FNC_3=96,ee.CODE_FNC_4_A=101,ee.CODE_FNC_4_B=100,ee.CODE_START_A=103,ee.CODE_START_B=104,ee.CODE_START_C=105,ee.CODE_STOP=106;class Be extends Je{constructor(e=!1,t=!1){super(),this.usingCheckDigit=e,this.extendedMode=t,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(e,t,n){let i=this.counters;i.fill(0),this.decodeRowResult="";let o=Be.findAsteriskPattern(t,i),l=t.getNextSet(o[1]),c=t.getSize(),f,g;do{Be.recordPattern(t,l,i);let M=Be.toNarrowWidePattern(i);if(M<0)throw new L;f=Be.patternToChar(M),this.decodeRowResult+=f,g=l;for(let R of i)l+=R;l=t.getNextSet(l)}while(f!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let p=0;for(let M of i)p+=M;let C=l-g-p;if(l!==c&&C*2<p)throw new L;if(this.usingCheckDigit){let M=this.decodeRowResult.length-1,R=0;for(let P=0;P<M;P++)R+=Be.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(P));if(this.decodeRowResult.charAt(M)!==Be.ALPHABET_STRING.charAt(R%43))throw new H;this.decodeRowResult=this.decodeRowResult.substring(0,M)}if(this.decodeRowResult.length===0)throw new L;let E;this.extendedMode?E=Be.decodeExtended(this.decodeRowResult):E=this.decodeRowResult;let S=(o[1]+o[0])/2,O=g+p/2;return new Et(E,null,0,[new v(S,e),new v(O,e)],ue.CODE_39,new Date().getTime())}static findAsteriskPattern(e,t){let n=e.getSize(),i=e.getNextSet(0),o=0,l=i,c=!1,f=t.length;for(let g=i;g<n;g++)if(e.get(g)!==c)t[o]++;else{if(o===f-1){if(this.toNarrowWidePattern(t)===Be.ASTERISK_ENCODING&&e.isRange(Math.max(0,l-Math.floor((g-l)/2)),l,!1))return[l,g];l+=t[0]+t[1],t.copyWithin(0,2,2+o-1),t[o-1]=0,t[o]=0,o--}else o++;t[o]=1,c=!c}throw new L}static toNarrowWidePattern(e){let t=e.length,n=0,i;do{let o=2147483647;for(let f of e)f<o&&f>n&&(o=f);n=o,i=0;let l=0,c=0;for(let f=0;f<t;f++){let g=e[f];g>n&&(c|=1<<t-1-f,i++,l+=g)}if(i===3){for(let f=0;f<t&&i>0;f++){let g=e[f];if(g>n&&(i--,g*2>=l))return-1}return c}}while(i>3);return-1}static patternToChar(e){for(let t=0;t<Be.CHARACTER_ENCODINGS.length;t++)if(Be.CHARACTER_ENCODINGS[t]===e)return Be.ALPHABET_STRING.charAt(t);if(e===Be.ASTERISK_ENCODING)return"*";throw new L}static decodeExtended(e){let t=e.length,n="";for(let i=0;i<t;i++){let o=e.charAt(i);if(o==="+"||o==="$"||o==="%"||o==="/"){let l=e.charAt(i+1),c="\0";switch(o){case"+":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)+32);else throw new k;break;case"$":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)-64);else throw new k;break;case"%":if(l>="A"&&l<="E")c=String.fromCharCode(l.charCodeAt(0)-38);else if(l>="F"&&l<="J")c=String.fromCharCode(l.charCodeAt(0)-11);else if(l>="K"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)+16);else if(l>="P"&&l<="T")c=String.fromCharCode(l.charCodeAt(0)+43);else if(l==="U")c="\0";else if(l==="V")c="@";else if(l==="W")c="`";else if(l==="X"||l==="Y"||l==="Z")c="";else throw new k;break;case"/":if(l>="A"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)-32);else if(l==="Z")c=":";else throw new k;break}n+=c,i++}else n+=o}return n}}Be.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Be.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Be.ASTERISK_ENCODING=148;class Me extends Je{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(e,t,n){let i=this.decodeStart(t),o=this.decodeEnd(t),l=new Re;Me.decodeMiddle(t,i[1],o[0],l);let c=l.toString(),f=null;n!=null&&(f=n.get(Te.ALLOWED_LENGTHS)),f==null&&(f=Me.DEFAULT_ALLOWED_LENGTHS);let g=c.length,p=!1,C=0;for(let O of f){if(g===O){p=!0;break}O>C&&(C=O)}if(!p&&g>C&&(p=!0),!p)throw new k;const E=[new v(i[1],e),new v(o[0],e)];return new Et(c,null,0,E,ue.ITF,new Date().getTime())}static decodeMiddle(e,t,n,i){let o=new Int32Array(10),l=new Int32Array(5),c=new Int32Array(5);for(o.fill(0),l.fill(0),c.fill(0);t<n;){Je.recordPattern(e,t,o);for(let g=0;g<5;g++){let p=2*g;l[g]=o[p],c[g]=o[p+1]}let f=Me.decodeDigit(l);i.append(f.toString()),f=this.decodeDigit(c),i.append(f.toString()),o.forEach(function(g){t+=g})}}decodeStart(e){let t=Me.skipWhiteSpace(e),n=Me.findGuardPattern(e,t,Me.START_PATTERN);return this.narrowLineWidth=(n[1]-n[0])/4,this.validateQuietZone(e,n[0]),n}validateQuietZone(e,t){let n=this.narrowLineWidth*10;n=n<t?n:t;for(let i=t-1;n>0&&i>=0&&!e.get(i);i--)n--;if(n!==0)throw new L}static skipWhiteSpace(e){const t=e.getSize(),n=e.getNextSet(0);if(n===t)throw new L;return n}decodeEnd(e){e.reverse();try{let t=Me.skipWhiteSpace(e),n;try{n=Me.findGuardPattern(e,t,Me.END_PATTERN_REVERSED[0])}catch(o){o instanceof L&&(n=Me.findGuardPattern(e,t,Me.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,n[0]);let i=n[0];return n[0]=e.getSize()-n[1],n[1]=e.getSize()-i,n}finally{e.reverse()}}static findGuardPattern(e,t,n){let i=n.length,o=new Int32Array(i),l=e.getSize(),c=!1,f=0,g=t;o.fill(0);for(let p=t;p<l;p++)if(e.get(p)!==c)o[f]++;else{if(f===i-1){if(Je.patternMatchVariance(o,n,Me.MAX_INDIVIDUAL_VARIANCE)<Me.MAX_AVG_VARIANCE)return[g,p];g+=o[0]+o[1],J.arraycopy(o,2,o,0,f-1),o[f-1]=0,o[f]=0,f--}else f++;o[f]=1,c=!c}throw new L}static decodeDigit(e){let t=Me.MAX_AVG_VARIANCE,n=-1,i=Me.PATTERNS.length;for(let o=0;o<i;o++){let l=Me.PATTERNS[o],c=Je.patternMatchVariance(e,l,Me.MAX_INDIVIDUAL_VARIANCE);c<t?(t=c,n=o):c===t&&(n=-1)}if(n>=0)return n%10;throw new L}}Me.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Me.MAX_AVG_VARIANCE=.38,Me.MAX_INDIVIDUAL_VARIANCE=.5,Me.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Me.START_PATTERN=Int32Array.from([1,1,1,1]),Me.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class nt extends Je{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(e){let t=!1,n,i=0,o=Int32Array.from([0,0,0]);for(;!t;){o=Int32Array.from([0,0,0]),n=nt.findGuardPattern(e,i,!1,this.START_END_PATTERN,o);let l=n[0];i=n[1];let c=l-(i-l);c>=0&&(t=e.isRange(c,l,!1))}return n}static checkChecksum(e){return nt.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(t===0)return!1;let n=parseInt(e.charAt(t-1),10);return nt.getStandardUPCEANChecksum(e.substring(0,t-1))===n}static getStandardUPCEANChecksum(e){let t=e.length,n=0;for(let i=t-1;i>=0;i-=2){let o=e.charAt(i).charCodeAt(0)-48;if(o<0||o>9)throw new k;n+=o}n*=3;for(let i=t-2;i>=0;i-=2){let o=e.charAt(i).charCodeAt(0)-48;if(o<0||o>9)throw new k;n+=o}return(1e3-n)%10}static decodeEnd(e,t){return nt.findGuardPattern(e,t,!1,nt.START_END_PATTERN,new Int32Array(nt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(e,t,n,i){return this.findGuardPattern(e,t,n,i,new Int32Array(i.length))}static findGuardPattern(e,t,n,i,o){let l=e.getSize();t=n?e.getNextUnset(t):e.getNextSet(t);let c=0,f=t,g=i.length,p=n;for(let C=t;C<l;C++)if(e.get(C)!==p)o[c]++;else{if(c===g-1){if(Je.patternMatchVariance(o,i,nt.MAX_INDIVIDUAL_VARIANCE)<nt.MAX_AVG_VARIANCE)return Int32Array.from([f,C]);f+=o[0]+o[1];let E=o.slice(2,o.length-1);for(let S=0;S<c-1;S++)o[S]=E[S];o[c-1]=0,o[c]=0,c--}else c++;o[c]=1,p=!p}throw new L}static decodeDigit(e,t,n,i){this.recordPattern(e,n,t);let o=this.MAX_AVG_VARIANCE,l=-1,c=i.length;for(let f=0;f<c;f++){let g=i[f],p=Je.patternMatchVariance(t,g,nt.MAX_INDIVIDUAL_VARIANCE);p<o&&(o=p,l=f)}if(l>=0)return l;throw new L}}nt.MAX_AVG_VARIANCE=.48,nt.MAX_INDIVIDUAL_VARIANCE=.7,nt.START_END_PATTERN=Int32Array.from([1,1,1]),nt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),nt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),nt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class jn{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,n){let i=this.decodeRowStringBuffer,o=this.decodeMiddle(t,n,i),l=i.toString(),c=jn.parseExtensionString(l),f=[new v((n[0]+n[1])/2,e),new v(o,e)],g=new Et(l,null,0,f,ue.UPC_EAN_EXTENSION,new Date().getTime());return c!=null&&g.putAllMetadata(c),g}decodeMiddle(e,t,n){let i=this.decodeMiddleCounters;i[0]=0,i[1]=0,i[2]=0,i[3]=0;let o=e.getSize(),l=t[1],c=0;for(let g=0;g<5&&l<o;g++){let p=nt.decodeDigit(e,i,l,nt.L_AND_G_PATTERNS);n+=String.fromCharCode(48+p%10);for(let C of i)l+=C;p>=10&&(c|=1<<4-g),g!==4&&(l=e.getNextSet(l),l=e.getNextUnset(l))}if(n.length!==5)throw new L;let f=this.determineCheckDigit(c);if(jn.extensionChecksum(n.toString())!==f)throw new L;return l}static extensionChecksum(e){let t=e.length,n=0;for(let i=t-2;i>=0;i-=2)n+=e.charAt(i).charCodeAt(0)-48;n*=3;for(let i=t-1;i>=0;i-=2)n+=e.charAt(i).charCodeAt(0)-48;return n*=3,n%10}determineCheckDigit(e){for(let t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new L}static parseExtensionString(e){if(e.length!==5)return null;let t=jn.parseExtension5String(e);return t==null?null:new Map([[ct.SUGGESTED_PRICE,t]])}static parseExtension5String(e){let t;switch(e.charAt(0)){case"0":t="";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t="";break}let n=parseInt(e.substring(1)),i=(n/100).toString(),o=n%100,l=o<10?"0"+o:o.toString();return t+i+"."+l}}class us{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,n){let i=this.decodeRowStringBuffer,o=this.decodeMiddle(t,n,i),l=i.toString(),c=us.parseExtensionString(l),f=[new v((n[0]+n[1])/2,e),new v(o,e)],g=new Et(l,null,0,f,ue.UPC_EAN_EXTENSION,new Date().getTime());return c!=null&&g.putAllMetadata(c),g}decodeMiddle(e,t,n){let i=this.decodeMiddleCounters;i[0]=0,i[1]=0,i[2]=0,i[3]=0;let o=e.getSize(),l=t[1],c=0;for(let f=0;f<2&&l<o;f++){let g=nt.decodeDigit(e,i,l,nt.L_AND_G_PATTERNS);n+=String.fromCharCode(48+g%10);for(let p of i)l+=p;g>=10&&(c|=1<<1-f),f!==1&&(l=e.getNextSet(l),l=e.getNextUnset(l))}if(n.length!==2)throw new L;if(parseInt(n.toString())%4!==c)throw new L;return l}static parseExtensionString(e){return e.length!==2?null:new Map([[ct.ISSUE_NUMBER,parseInt(e)]])}}class Oo{static decodeRow(e,t,n){let i=nt.findGuardPattern(t,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new jn().decodeRow(e,t,i)}catch{return new us().decodeRow(e,t,i)}}}Oo.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Fe extends nt{constructor(){super(),this.decodeRowStringBuffer="",Fe.L_AND_G_PATTERNS=Fe.L_PATTERNS.map(e=>Int32Array.from(e));for(let e=10;e<20;e++){let t=Fe.L_PATTERNS[e-10],n=new Int32Array(t.length);for(let i=0;i<t.length;i++)n[i]=t[t.length-i-1];Fe.L_AND_G_PATTERNS[e]=n}}decodeRow(e,t,n){let i=Fe.findStartGuardPattern(t),o=n==null?null:n.get(Te.NEED_RESULT_POINT_CALLBACK);if(o!=null){const Z=new v((i[0]+i[1])/2,e);o.foundPossibleResultPoint(Z)}let l=this.decodeMiddle(t,i,this.decodeRowStringBuffer),c=l.rowOffset,f=l.resultString;if(o!=null){const Z=new v(c,e);o.foundPossibleResultPoint(Z)}let g=this.decodeEnd(t,c);if(o!=null){const Z=new v((g[0]+g[1])/2,e);o.foundPossibleResultPoint(Z)}let p=g[1],C=p+(p-g[0]);if(C>=t.getSize()||!t.isRange(p,C,!1))throw new L;let E=f.toString();if(E.length<8)throw new k;if(!Fe.checkChecksum(E))throw new H;let S=(i[1]+i[0])/2,O=(g[1]+g[0])/2,M=this.getBarcodeFormat(),R=[new v(S,e),new v(O,e)],P=new Et(E,null,0,R,M,new Date().getTime()),Q=0;try{let Z=Oo.decodeRow(e,t,g[1]);P.putMetadata(ct.UPC_EAN_EXTENSION,Z.getText()),P.putAllMetadata(Z.getResultMetadata()),P.addResultPoints(Z.getResultPoints()),Q=Z.getText().length}catch{}let q=n==null?null:n.get(Te.ALLOWED_EAN_EXTENSIONS);if(q!=null){let Z=!1;for(let ve in q)if(Q.toString()===ve){Z=!0;break}if(!Z)throw new L}return P}decodeEnd(e,t){return Fe.findGuardPattern(e,t,!1,Fe.START_END_PATTERN,new Int32Array(Fe.START_END_PATTERN.length).fill(0))}static checkChecksum(e){return Fe.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(t===0)return!1;let n=parseInt(e.charAt(t-1),10);return Fe.getStandardUPCEANChecksum(e.substring(0,t-1))===n}static getStandardUPCEANChecksum(e){let t=e.length,n=0;for(let i=t-1;i>=0;i-=2){let o=e.charAt(i).charCodeAt(0)-48;if(o<0||o>9)throw new k;n+=o}n*=3;for(let i=t-2;i>=0;i-=2){let o=e.charAt(i).charCodeAt(0)-48;if(o<0||o>9)throw new k;n+=o}return(1e3-n)%10}}class sr extends Fe{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,t,n){let i=this.decodeMiddleCounters;i[0]=0,i[1]=0,i[2]=0,i[3]=0;let o=e.getSize(),l=t[1],c=0;for(let g=0;g<6&&l<o;g++){let p=Fe.decodeDigit(e,i,l,Fe.L_AND_G_PATTERNS);n+=String.fromCharCode(48+p%10);for(let C of i)l+=C;p>=10&&(c|=1<<5-g)}n=sr.determineFirstDigit(n,c),l=Fe.findGuardPattern(e,l,!0,Fe.MIDDLE_PATTERN,new Int32Array(Fe.MIDDLE_PATTERN.length).fill(0))[1];for(let g=0;g<6&&l<o;g++){let p=Fe.decodeDigit(e,i,l,Fe.L_PATTERNS);n+=String.fromCharCode(48+p);for(let C of i)l+=C}return{rowOffset:l,resultString:n}}getBarcodeFormat(){return ue.EAN_13}static determineFirstDigit(e,t){for(let n=0;n<10;n++)if(t===this.FIRST_DIGIT_ENCODINGS[n])return e=String.fromCharCode(48+n)+e,e;throw new L}}sr.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Mo extends Fe{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,t,n){const i=this.decodeMiddleCounters;i[0]=0,i[1]=0,i[2]=0,i[3]=0;let o=e.getSize(),l=t[1];for(let f=0;f<4&&l<o;f++){let g=Fe.decodeDigit(e,i,l,Fe.L_PATTERNS);n+=String.fromCharCode(48+g);for(let p of i)l+=p}l=Fe.findGuardPattern(e,l,!0,Fe.MIDDLE_PATTERN,new Int32Array(Fe.MIDDLE_PATTERN.length).fill(0))[1];for(let f=0;f<4&&l<o;f++){let g=Fe.decodeDigit(e,i,l,Fe.L_PATTERNS);n+=String.fromCharCode(48+g);for(let p of i)l+=p}return{rowOffset:l,resultString:n}}getBarcodeFormat(){return ue.EAN_8}}class Ro extends Fe{constructor(){super(...arguments),this.ean13Reader=new sr}getBarcodeFormat(){return ue.UPC_A}decode(e,t){return this.maybeReturnResult(this.ean13Reader.decode(e))}decodeRow(e,t,n){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,t,n))}decodeMiddle(e,t,n){return this.ean13Reader.decodeMiddle(e,t,n)}maybeReturnResult(e){let t=e.getText();if(t.charAt(0)==="0"){let n=new Et(t.substring(1),null,null,e.getResultPoints(),ue.UPC_A);return e.getResultMetadata()!=null&&n.putAllMetadata(e.getResultMetadata()),n}else throw new L}reset(){this.ean13Reader.reset()}}class an extends Fe{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(e,t,n){const i=this.decodeMiddleCounters.map(g=>g);i[0]=0,i[1]=0,i[2]=0,i[3]=0;const o=e.getSize();let l=t[1],c=0;for(let g=0;g<6&&l<o;g++){const p=an.decodeDigit(e,i,l,an.L_AND_G_PATTERNS);n+=String.fromCharCode(48+p%10);for(let C of i)l+=C;p>=10&&(c|=1<<5-g)}let f=an.determineNumSysAndCheckDigit(n,c);return{rowOffset:l,resultString:f}}decodeEnd(e,t){return an.findGuardPatternWithoutCounters(e,t,!0,an.MIDDLE_END_PATTERN)}checkChecksum(e){return Fe.checkChecksum(an.convertUPCEtoUPCA(e))}static determineNumSysAndCheckDigit(e,t){for(let n=0;n<=1;n++)for(let i=0;i<10;i++)if(t===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[n][i]){let o=String.fromCharCode(48+n),l=String.fromCharCode(48+i);return o+e+l}throw L.getNotFoundInstance()}getBarcodeFormat(){return ue.UPC_E}static convertUPCEtoUPCA(e){const t=e.slice(1,7).split("").map(o=>o.charCodeAt(0)),n=new Re;n.append(e.charAt(0));let i=t[5];switch(i){case 0:case 1:case 2:n.appendChars(t,0,2),n.append(i),n.append("0000"),n.appendChars(t,2,3);break;case 3:n.appendChars(t,0,3),n.append("00000"),n.appendChars(t,3,2);break;case 4:n.appendChars(t,0,4),n.append("00000"),n.append(t[4]);break;default:n.appendChars(t,0,5),n.append("0000"),n.append(i);break}return e.length>=8&&n.append(e.charAt(7)),n.toString()}}an.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),an.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class fs extends Je{constructor(e){super();let t=e==null?null:e.get(Te.POSSIBLE_FORMATS),n=[];u(t)?(n.push(new sr),n.push(new Ro),n.push(new Mo),n.push(new an)):(t.indexOf(ue.EAN_13)>-1&&n.push(new sr),t.indexOf(ue.UPC_A)>-1&&n.push(new Ro),t.indexOf(ue.EAN_8)>-1&&n.push(new Mo),t.indexOf(ue.UPC_E)>-1&&n.push(new an)),this.readers=n}decodeRow(e,t,n){for(let i of this.readers)try{const o=i.decodeRow(e,t,n),l=o.getBarcodeFormat()===ue.EAN_13&&o.getText().charAt(0)==="0",c=n==null?null:n.get(Te.POSSIBLE_FORMATS),f=c==null||c.includes(ue.UPC_A);if(l&&f){const g=o.getRawBytes(),p=new Et(o.getText().substring(1),g,g?g.length:null,o.getResultPoints(),ue.UPC_A);return p.putAllMetadata(o.getResultMetadata()),p}return o}catch{}throw new L}reset(){for(let e of this.readers)e.reset()}}class Tt extends Je{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(e,t){for(let n=0;n<t.length;n++)if(Je.patternMatchVariance(e,t[n],Tt.MAX_INDIVIDUAL_VARIANCE)<Tt.MAX_AVG_VARIANCE)return n;throw new L}static count(e){return G.sum(new Int32Array(e))}static increment(e,t){let n=0,i=t[0];for(let o=1;o<e.length;o++)t[o]>i&&(i=t[o],n=o);e[n]++}static decrement(e,t){let n=0,i=t[0];for(let o=1;o<e.length;o++)t[o]<i&&(i=t[o],n=o);e[n]--}static isFinderPattern(e){let t=e[0]+e[1],n=t+e[2]+e[3],i=t/n;if(i>=Tt.MIN_FINDER_PATTERN_RATIO&&i<=Tt.MAX_FINDER_PATTERN_RATIO){let o=Number.MAX_SAFE_INTEGER,l=Number.MIN_SAFE_INTEGER;for(let c of e)c>l&&(l=c),c<o&&(o=c);return l<10*o}return!1}}Tt.MAX_AVG_VARIANCE=.2,Tt.MAX_INDIVIDUAL_VARIANCE=.45,Tt.MIN_FINDER_PATTERN_RATIO=9.5/12,Tt.MAX_FINDER_PATTERN_RATIO=12.5/14;class Ir{constructor(e,t){this.value=e,this.checksumPortion=t}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(e){if(!(e instanceof Ir))return!1;const t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Ii{constructor(e,t,n,i,o){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new v(n,o)),this.resultPoints.push(new v(i,o))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(e){if(!(e instanceof Ii))return!1;const t=e;return this.value===t.value}hashCode(){return this.value}}class xn{constructor(){}static getRSSvalue(e,t,n){let i=0;for(let f of e)i+=f;let o=0,l=0,c=e.length;for(let f=0;f<c-1;f++){let g;for(g=1,l|=1<<f;g<e[f];g++,l&=~(1<<f)){let p=xn.combins(i-g-1,c-f-2);if(n&&l===0&&i-g-(c-f-1)>=c-f-1&&(p-=xn.combins(i-g-(c-f),c-f-2)),c-f-1>1){let C=0;for(let E=i-g-(c-f-2);E>t;E--)C+=xn.combins(i-g-E-1,c-f-3);p-=C*(c-1-f)}else i-g>t&&p--;o+=p}i-=g}return o}static combins(e,t){let n,i;e-t>t?(i=t,n=e-t):(i=e-t,n=t);let o=1,l=1;for(let c=e;c>n;c--)o*=c,l<=i&&(o/=l,l++);for(;l<=i;)o/=l,l++;return o}}class Nc{static buildBitArray(e){let t=e.length*2-1;e[e.length-1].getRightChar()==null&&(t-=1);let n=12*t,i=new te(n),o=0,c=e[0].getRightChar().getValue();for(let f=11;f>=0;--f)c&1<<f&&i.set(o),o++;for(let f=1;f<e.length;++f){let g=e[f],p=g.getLeftChar().getValue();for(let C=11;C>=0;--C)p&1<<C&&i.set(o),o++;if(g.getRightChar()!=null){let C=g.getRightChar().getValue();for(let E=11;E>=0;--E)C&1<<E&&i.set(o),o++}}return i}}class or{constructor(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class hs{constructor(e){this.newPosition=e}getNewPosition(){return this.newPosition}}class kt extends hs{constructor(e,t){super(e),this.value=t}getValue(){return this.value}isFNC1(){return this.value===kt.FNC1}}kt.FNC1="$";class ar extends hs{constructor(e,t,n){super(e),n?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=t}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Jt extends hs{constructor(e,t,n){if(super(e),t<0||t>10||n<0||n>10)throw new k;this.firstDigit=t,this.secondDigit=n}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Jt.FNC1}isSecondDigitFNC1(){return this.secondDigit===Jt.FNC1}isAnyFNC1(){return this.firstDigit===Jt.FNC1||this.secondDigit===Jt.FNC1}}Jt.FNC1=10;class oe{constructor(){}static parseFieldsInGeneralPurpose(e){if(!e)return null;if(e.length<2)throw new L;let t=e.substring(0,2);for(let o of oe.TWO_DIGIT_DATA_LENGTH)if(o[0]===t)return o[1]===oe.VARIABLE_LENGTH?oe.processVariableAI(2,o[2],e):oe.processFixedAI(2,o[1],e);if(e.length<3)throw new L;let n=e.substring(0,3);for(let o of oe.THREE_DIGIT_DATA_LENGTH)if(o[0]===n)return o[1]===oe.VARIABLE_LENGTH?oe.processVariableAI(3,o[2],e):oe.processFixedAI(3,o[1],e);for(let o of oe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(o[0]===n)return o[1]===oe.VARIABLE_LENGTH?oe.processVariableAI(4,o[2],e):oe.processFixedAI(4,o[1],e);if(e.length<4)throw new L;let i=e.substring(0,4);for(let o of oe.FOUR_DIGIT_DATA_LENGTH)if(o[0]===i)return o[1]===oe.VARIABLE_LENGTH?oe.processVariableAI(4,o[2],e):oe.processFixedAI(4,o[1],e);throw new L}static processFixedAI(e,t,n){if(n.length<e)throw new L;let i=n.substring(0,e);if(n.length<e+t)throw new L;let o=n.substring(e,e+t),l=n.substring(e+t),c="("+i+")"+o,f=oe.parseFieldsInGeneralPurpose(l);return f==null?c:c+f}static processVariableAI(e,t,n){let i=n.substring(0,e),o;n.length<e+t?o=n.length:o=e+t;let l=n.substring(e,o),c=n.substring(o),f="("+i+")"+l,g=oe.parseFieldsInGeneralPurpose(c);return g==null?f:f+g}}oe.VARIABLE_LENGTH=[],oe.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",oe.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",oe.VARIABLE_LENGTH,20],["22",oe.VARIABLE_LENGTH,29],["30",oe.VARIABLE_LENGTH,8],["37",oe.VARIABLE_LENGTH,8],["90",oe.VARIABLE_LENGTH,30],["91",oe.VARIABLE_LENGTH,30],["92",oe.VARIABLE_LENGTH,30],["93",oe.VARIABLE_LENGTH,30],["94",oe.VARIABLE_LENGTH,30],["95",oe.VARIABLE_LENGTH,30],["96",oe.VARIABLE_LENGTH,30],["97",oe.VARIABLE_LENGTH,3],["98",oe.VARIABLE_LENGTH,30],["99",oe.VARIABLE_LENGTH,30]],oe.THREE_DIGIT_DATA_LENGTH=[["240",oe.VARIABLE_LENGTH,30],["241",oe.VARIABLE_LENGTH,30],["242",oe.VARIABLE_LENGTH,6],["250",oe.VARIABLE_LENGTH,30],["251",oe.VARIABLE_LENGTH,30],["253",oe.VARIABLE_LENGTH,17],["254",oe.VARIABLE_LENGTH,20],["400",oe.VARIABLE_LENGTH,30],["401",oe.VARIABLE_LENGTH,30],["402",17],["403",oe.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",oe.VARIABLE_LENGTH,20],["421",oe.VARIABLE_LENGTH,15],["422",3],["423",oe.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],oe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",oe.VARIABLE_LENGTH,15],["391",oe.VARIABLE_LENGTH,18],["392",oe.VARIABLE_LENGTH,15],["393",oe.VARIABLE_LENGTH,18],["703",oe.VARIABLE_LENGTH,30]],oe.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",oe.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",oe.VARIABLE_LENGTH,20],["8003",oe.VARIABLE_LENGTH,30],["8004",oe.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",oe.VARIABLE_LENGTH,30],["8008",oe.VARIABLE_LENGTH,12],["8018",18],["8020",oe.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",oe.VARIABLE_LENGTH,70],["8200",oe.VARIABLE_LENGTH,70]];class yr{constructor(e){this.buffer=new Re,this.information=e}decodeAllCodes(e,t){let n=t,i=null;do{let o=this.decodeGeneralPurposeField(n,i),l=oe.parseFieldsInGeneralPurpose(o.getNewString());if(l!=null&&e.append(l),o.isRemaining()?i=""+o.getRemainingValue():i=null,n===o.getNewPosition())break;n=o.getNewPosition()}while(!0);return e.toString()}isStillNumeric(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(let t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)}decodeNumeric(e){if(e+7>this.information.getSize()){let o=this.extractNumericValueFromBitArray(e,4);return o===0?new Jt(this.information.getSize(),Jt.FNC1,Jt.FNC1):new Jt(this.information.getSize(),o-1,Jt.FNC1)}let t=this.extractNumericValueFromBitArray(e,7),n=(t-8)/11,i=(t-8)%11;return new Jt(e+7,n,i)}extractNumericValueFromBitArray(e,t){return yr.extractNumericValueFromBitArray(this.information,e,t)}static extractNumericValueFromBitArray(e,t,n){let i=0;for(let o=0;o<n;++o)e.get(t+o)&&(i|=1<<n-o-1);return i}decodeGeneralPurposeField(e,t){this.buffer.setLengthToZero(),t!=null&&this.buffer.append(t),this.current.setPosition(e);let n=this.parseBlocks();return n!=null&&n.isRemaining()?new ar(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new ar(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let e,t;do{let n=this.current.getPosition();if(this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished()),!(n!==this.current.getPosition())&&!e)break}while(!e);return t.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){let t;return e.isSecondDigitFNC1()?t=new ar(this.current.getPosition(),this.buffer.toString()):t=new ar(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new or(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){let t=new ar(this.current.getPosition(),this.buffer.toString());return new or(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new or(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let t=new ar(this.current.getPosition(),this.buffer.toString());return new or(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new or(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let t=new ar(this.current.getPosition(),this.buffer.toString());return new or(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new or(!1)}isStillIsoIec646(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253}decodeIsoIec646(e){let t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new kt(e+5,kt.FNC1);if(t>=5&&t<15)return new kt(e+5,"0"+(t-5));let n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<90)return new kt(e+7,""+(n+1));if(n>=90&&n<116)return new kt(e+7,""+(n+7));let i=this.extractNumericValueFromBitArray(e,8),o;switch(i){case 232:o="!";break;case 233:o='"';break;case 234:o="%";break;case 235:o="&";break;case 236:o="'";break;case 237:o="(";break;case 238:o=")";break;case 239:o="*";break;case 240:o="+";break;case 241:o=",";break;case 242:o="-";break;case 243:o=".";break;case 244:o="/";break;case 245:o=":";break;case 246:o=";";break;case 247:o="<";break;case 248:o="=";break;case 249:o=">";break;case 250:o="?";break;case 251:o="_";break;case 252:o=" ";break;default:throw new k}return new kt(e+8,o)}isStillAlpha(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63}decodeAlphanumeric(e){let t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new kt(e+5,kt.FNC1);if(t>=5&&t<15)return new kt(e+5,"0"+(t-5));let n=this.extractNumericValueFromBitArray(e,6);if(n>=32&&n<58)return new kt(e+6,""+(n+33));let i;switch(n){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new W("Decoding invalid alphanumeric value: "+n)}return new kt(e+6,i)}isAlphaTo646ToAlphaLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<5&&t+e<this.information.getSize();++t)if(t===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0}isAlphaOr646ToNumericLatch(e){if(e+3>this.information.getSize())return!1;for(let t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0}isNumericToAlphaNumericLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0}}class ds{constructor(e){this.information=e,this.generalDecoder=new yr(e)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Ut extends ds{constructor(e){super(e)}encodeCompressedGtin(e,t){e.append("(01)");let n=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,t,n)}encodeCompressedGtinWithoutAI(e,t,n){for(let i=0;i<4;++i){let o=this.getGeneralDecoder().extractNumericValueFromBitArray(t+10*i,10);o/100===0&&e.append("0"),o/10===0&&e.append("0"),e.append(o)}Ut.appendCheckDigit(e,n)}static appendCheckDigit(e,t){let n=0;for(let i=0;i<13;i++){let o=e.charAt(i+t).charCodeAt(0)-48;n+=i&1?o:3*o}n=10-n%10,n===10&&(n=0),e.append(n)}}Ut.GTIN_SIZE=40;class br extends Ut{constructor(e){super(e)}parseInformation(){let e=new Re;e.append("(01)");let t=e.length(),n=this.getGeneralDecoder().extractNumericValueFromBitArray(br.HEADER_SIZE,4);return e.append(n),this.encodeCompressedGtinWithoutAI(e,br.HEADER_SIZE+4,t),this.getGeneralDecoder().decodeAllCodes(e,br.HEADER_SIZE+44)}}br.HEADER_SIZE=4;class yi extends ds{constructor(e){super(e)}parseInformation(){let e=new Re;return this.getGeneralDecoder().decodeAllCodes(e,yi.HEADER_SIZE)}}yi.HEADER_SIZE=5;class bi extends Ut{constructor(e){super(e)}encodeCompressedWeight(e,t,n){let i=this.getGeneralDecoder().extractNumericValueFromBitArray(t,n);this.addWeightCode(e,i);let o=this.checkWeight(i),l=1e5;for(let c=0;c<5;++c)o/l===0&&e.append("0"),l/=10;e.append(o)}}class pn extends bi{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()!=pn.HEADER_SIZE+bi.GTIN_SIZE+pn.WEIGHT_SIZE)throw new L;let e=new Re;return this.encodeCompressedGtin(e,pn.HEADER_SIZE),this.encodeCompressedWeight(e,pn.HEADER_SIZE+bi.GTIN_SIZE,pn.WEIGHT_SIZE),e.toString()}}pn.HEADER_SIZE=5,pn.WEIGHT_SIZE=15;class Oc extends pn{constructor(e){super(e)}addWeightCode(e,t){e.append("(3103)")}checkWeight(e){return e}}class Mc extends pn{constructor(e){super(e)}addWeightCode(e,t){t<1e4?e.append("(3202)"):e.append("(3203)")}checkWeight(e){return e<1e4?e:e-1e4}}class wn extends Ut{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<wn.HEADER_SIZE+Ut.GTIN_SIZE)throw new L;let e=new Re;this.encodeCompressedGtin(e,wn.HEADER_SIZE);let t=this.getGeneralDecoder().extractNumericValueFromBitArray(wn.HEADER_SIZE+Ut.GTIN_SIZE,wn.LAST_DIGIT_SIZE);e.append("(392"),e.append(t),e.append(")");let n=this.getGeneralDecoder().decodeGeneralPurposeField(wn.HEADER_SIZE+Ut.GTIN_SIZE+wn.LAST_DIGIT_SIZE,null);return e.append(n.getNewString()),e.toString()}}wn.HEADER_SIZE=8,wn.LAST_DIGIT_SIZE=2;class Lt extends Ut{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<Lt.HEADER_SIZE+Ut.GTIN_SIZE)throw new L;let e=new Re;this.encodeCompressedGtin(e,Lt.HEADER_SIZE);let t=this.getGeneralDecoder().extractNumericValueFromBitArray(Lt.HEADER_SIZE+Ut.GTIN_SIZE,Lt.LAST_DIGIT_SIZE);e.append("(393"),e.append(t),e.append(")");let n=this.getGeneralDecoder().extractNumericValueFromBitArray(Lt.HEADER_SIZE+Ut.GTIN_SIZE+Lt.LAST_DIGIT_SIZE,Lt.FIRST_THREE_DIGITS_SIZE);n/100==0&&e.append("0"),n/10==0&&e.append("0"),e.append(n);let i=this.getGeneralDecoder().decodeGeneralPurposeField(Lt.HEADER_SIZE+Ut.GTIN_SIZE+Lt.LAST_DIGIT_SIZE+Lt.FIRST_THREE_DIGITS_SIZE,null);return e.append(i.getNewString()),e.toString()}}Lt.HEADER_SIZE=8,Lt.LAST_DIGIT_SIZE=2,Lt.FIRST_THREE_DIGITS_SIZE=10;class st extends bi{constructor(e,t,n){super(e),this.dateCode=n,this.firstAIdigits=t}parseInformation(){if(this.getInformation().getSize()!=st.HEADER_SIZE+st.GTIN_SIZE+st.WEIGHT_SIZE+st.DATE_SIZE)throw new L;let e=new Re;return this.encodeCompressedGtin(e,st.HEADER_SIZE),this.encodeCompressedWeight(e,st.HEADER_SIZE+st.GTIN_SIZE,st.WEIGHT_SIZE),this.encodeCompressedDate(e,st.HEADER_SIZE+st.GTIN_SIZE+st.WEIGHT_SIZE),e.toString()}encodeCompressedDate(e,t){let n=this.getGeneralDecoder().extractNumericValueFromBitArray(t,st.DATE_SIZE);if(n==38400)return;e.append("("),e.append(this.dateCode),e.append(")");let i=n%32;n/=32;let o=n%12+1;n/=12;let l=n;l/10==0&&e.append("0"),e.append(l),o/10==0&&e.append("0"),e.append(o),i/10==0&&e.append("0"),e.append(i)}addWeightCode(e,t){e.append("("),e.append(this.firstAIdigits),e.append(t/1e5),e.append(")")}checkWeight(e){return e%1e5}}st.HEADER_SIZE=8,st.WEIGHT_SIZE=20,st.DATE_SIZE=16;function Do(A){try{if(A.get(1))return new br(A);if(!A.get(2))return new yi(A);switch(yr.extractNumericValueFromBitArray(A,1,4)){case 4:return new Oc(A);case 5:return new Mc(A)}switch(yr.extractNumericValueFromBitArray(A,1,5)){case 12:return new wn(A);case 13:return new Lt(A)}switch(yr.extractNumericValueFromBitArray(A,1,7)){case 56:return new st(A,"310","11");case 57:return new st(A,"320","11");case 58:return new st(A,"310","13");case 59:return new st(A,"320","13");case 60:return new st(A,"310","15");case 61:return new st(A,"320","15");case 62:return new st(A,"310","17");case 63:return new st(A,"320","17")}}catch(e){throw console.log(e),new W("unknown decoder: "+A)}}class Gn{constructor(e,t,n,i){this.leftchar=e,this.rightchar=t,this.finderpattern=n,this.maybeLast=i}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(e,t){return e instanceof Gn?Gn.equalsOrNull(e.leftchar,t.leftchar)&&Gn.equalsOrNull(e.rightchar,t.rightchar)&&Gn.equalsOrNull(e.finderpattern,t.finderpattern):!1}static equalsOrNull(e,t){return e===null?t===null:Gn.equals(e,t)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class gs{constructor(e,t,n){this.pairs=e,this.rowNumber=t,this.wasReversed=n}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(e){return this.checkEqualitity(this,e)}toString(){return"{ "+this.pairs+" }"}equals(e,t){return e instanceof gs?this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed:!1}checkEqualitity(e,t){if(!e||!t)return;let n;return e.forEach((i,o)=>{t.forEach(l=>{i.getLeftChar().getValue()===l.getLeftChar().getValue()&&i.getRightChar().getValue()===l.getRightChar().getValue()&&i.getFinderPatter().getValue()===l.getFinderPatter().getValue()&&(n=!0)})}),n}}class z extends Tt{constructor(e){super(...arguments),this.pairs=new Array(z.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=e===!0}decodeRow(e,t,n){this.pairs.length=0,this.startFromEven=!1;try{return z.constructResult(this.decodeRow2pairs(e,t))}catch(i){this.verbose&&console.log(i)}return this.pairs.length=0,this.startFromEven=!0,z.constructResult(this.decodeRow2pairs(e,t))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(e,t){let n=!1;for(;!n;)try{this.pairs.push(this.retrieveNextPair(t,this.pairs,e))}catch(o){if(o instanceof L){if(!this.pairs.length)throw new L;n=!0}}if(this.checkChecksum())return this.pairs;let i;if(this.rows.length?i=!0:i=!1,this.storeRow(e,!1),i){let o=this.checkRowsBoolean(!1);if(o!=null||(o=this.checkRowsBoolean(!0),o!=null))return o}throw new L}checkRowsBoolean(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());let t=null;try{t=this.checkRows(new Array,0)}catch(n){this.verbose&&console.log(n)}return e&&(this.rows=this.rows.reverse()),t}checkRows(e,t){for(let n=t;n<this.rows.length;n++){let i=this.rows[n];this.pairs.length=0;for(let l of e)this.pairs.push(l.getPairs());if(this.pairs.push(i.getPairs()),!z.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let o=new Array(e);o.push(i);try{return this.checkRows(o,n+1)}catch(l){this.verbose&&console.log(l)}}throw new L}static isValidSequence(e){for(let t of z.FINDER_PATTERN_SEQUENCES){if(e.length>t.length)continue;let n=!0;for(let i=0;i<e.length;i++)if(e[i].getFinderPattern().getValue()!=t[i]){n=!1;break}if(n)return!0}return!1}storeRow(e,t){let n=0,i=!1,o=!1;for(;n<this.rows.length;){let l=this.rows[n];if(l.getRowNumber()>e){o=l.isEquivalent(this.pairs);break}i=l.isEquivalent(this.pairs),n++}o||i||z.isPartialRow(this.pairs,this.rows)||(this.rows.push(n,new gs(this.pairs,e,t)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(e,t){for(let n of t)if(n.getPairs().length!==e.length){for(let i of n.getPairs())for(let o of e)if(Gn.equals(i,o))break}}static isPartialRow(e,t){for(let n of t){let i=!0;for(let o of e){let l=!1;for(let c of n.getPairs())if(o.equals(c)){l=!0;break}if(!l){i=!1;break}}if(i)return!0}return!1}getRows(){return this.rows}static constructResult(e){let t=Nc.buildBitArray(e),i=Do(t).parseInformation(),o=e[0].getFinderPattern().getResultPoints(),l=e[e.length-1].getFinderPattern().getResultPoints(),c=[o[0],o[1],l[0],l[1]];return new Et(i,null,null,c,ue.RSS_EXPANDED,null)}checkChecksum(){let e=this.pairs.get(0),t=e.getLeftChar(),n=e.getRightChar();if(n==null)return!1;let i=n.getChecksumPortion(),o=2;for(let c=1;c<this.pairs.size();++c){let f=this.pairs.get(c);i+=f.getLeftChar().getChecksumPortion(),o++;let g=f.getRightChar();g!=null&&(i+=g.getChecksumPortion(),o++)}return i%=211,211*(o-4)+i==t.getValue()}static getNextSecondBar(e,t){let n;return e.get(t)?(n=e.getNextUnset(t),n=e.getNextSet(n)):(n=e.getNextSet(t),n=e.getNextUnset(n)),n}retrieveNextPair(e,t,n){let i=t.length%2==0;this.startFromEven&&(i=!i);let o,l=!0,c=-1;do this.findNextPair(e,t,c),o=this.parseFoundFinderPattern(e,n,i),o==null?c=z.getNextSecondBar(e,this.startEnd[0]):l=!1;while(l);let f=this.decodeDataCharacter(e,o,i,!0);if(!this.isEmptyPair(t)&&t[t.length-1].mustBeLast())throw new L;let g;try{g=this.decodeDataCharacter(e,o,i,!1)}catch(p){g=null,this.verbose&&console.log(p)}return new Gn(f,g,o,!0)}isEmptyPair(e){return e.length===0}findNextPair(e,t,n){let i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;let o=e.getSize(),l;n>=0?l=n:this.isEmptyPair(t)?l=0:l=t[t.length-1].getFinderPattern().getStartEnd()[1];let c=t.length%2!=0;this.startFromEven&&(c=!c);let f=!1;for(;l<o&&(f=!e.get(l),!!f);)l++;let g=0,p=l;for(let C=l;C<o;C++)if(e.get(C)!=f)i[g]++;else{if(g==3){if(c&&z.reverseCounters(i),z.isFinderPattern(i)){this.startEnd[0]=p,this.startEnd[1]=C;return}c&&z.reverseCounters(i),p+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,g--}else g++;i[g]=1,f=!f}throw new L}static reverseCounters(e){let t=e.length;for(let n=0;n<t/2;++n){let i=e[n];e[n]=e[t-n-1],e[t-n-1]=i}}parseFoundFinderPattern(e,t,n){let i,o,l;if(n){let g=this.startEnd[0]-1;for(;g>=0&&!e.get(g);)g--;g++,i=this.startEnd[0]-g,o=g,l=this.startEnd[1]}else o=this.startEnd[0],l=e.getNextUnset(this.startEnd[1]+1),i=l-this.startEnd[1];let c=this.getDecodeFinderCounters();J.arraycopy(c,0,c,1,c.length-1),c[0]=i;let f;try{f=this.parseFinderValue(c,z.FINDER_PATTERNS)}catch{return null}return new Ii(f,[o,l],o,l,t)}decodeDataCharacter(e,t,n,i){let o=this.getDataCharacterCounters();for(let Ke=0;Ke<o.length;Ke++)o[Ke]=0;if(i)z.recordPatternInReverse(e,t.getStartEnd()[0],o);else{z.recordPattern(e,t.getStartEnd()[1],o);for(let Ke=0,St=o.length-1;Ke<St;Ke++,St--){let Wt=o[Ke];o[Ke]=o[St],o[St]=Wt}}let l=17,c=G.sum(new Int32Array(o))/l,f=(t.getStartEnd()[1]-t.getStartEnd()[0])/15;if(Math.abs(c-f)/f>.3)throw new L;let g=this.getOddCounts(),p=this.getEvenCounts(),C=this.getOddRoundingErrors(),E=this.getEvenRoundingErrors();for(let Ke=0;Ke<o.length;Ke++){let St=1*o[Ke]/c,Wt=St+.5;if(Wt<1){if(St<.3)throw new L;Wt=1}else if(Wt>8){if(St>8.7)throw new L;Wt=8}let Or=Ke/2;Ke&1?(p[Or]=Wt,E[Or]=St-Wt):(g[Or]=Wt,C[Or]=St-Wt)}this.adjustOddEvenCounts(l);let S=4*t.getValue()+(n?0:2)+(i?0:1)-1,O=0,M=0;for(let Ke=g.length-1;Ke>=0;Ke--){if(z.isNotA1left(t,n,i)){let St=z.WEIGHTS[S][2*Ke];M+=g[Ke]*St}O+=g[Ke]}let R=0;for(let Ke=p.length-1;Ke>=0;Ke--)if(z.isNotA1left(t,n,i)){let St=z.WEIGHTS[S][2*Ke+1];R+=p[Ke]*St}let P=M+R;if(O&1||O>13||O<4)throw new L;let Q=(13-O)/2,q=z.SYMBOL_WIDEST[Q],Z=9-q,ve=xn.getRSSvalue(g,q,!0),ye=xn.getRSSvalue(p,Z,!1),Vt=z.EVEN_TOTAL_SUBSET[Q],ln=z.GSUM[Q],jt=ve*Vt+ye+ln;return new Ir(jt,P)}static isNotA1left(e,t,n){return!(e.getValue()==0&&t&&n)}adjustOddEvenCounts(e){let t=G.sum(new Int32Array(this.getOddCounts())),n=G.sum(new Int32Array(this.getEvenCounts())),i=!1,o=!1;t>13?o=!0:t<4&&(i=!0);let l=!1,c=!1;n>13?c=!0:n<4&&(l=!0);let f=t+n-e,g=(t&1)==1,p=(n&1)==0;if(f==1)if(g){if(p)throw new L;o=!0}else{if(!p)throw new L;c=!0}else if(f==-1)if(g){if(p)throw new L;i=!0}else{if(!p)throw new L;l=!0}else if(f==0){if(g){if(!p)throw new L;t<n?(i=!0,c=!0):(o=!0,l=!0)}else if(p)throw new L}else throw new L;if(i){if(o)throw new L;z.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&z.decrement(this.getOddCounts(),this.getOddRoundingErrors()),l){if(c)throw new L;z.increment(this.getEvenCounts(),this.getOddRoundingErrors())}c&&z.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}z.SYMBOL_WIDEST=[7,5,4,3,1],z.EVEN_TOTAL_SUBSET=[4,20,52,104,204],z.GSUM=[0,348,1388,2948,3988],z.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],z.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],z.FINDER_PAT_A=0,z.FINDER_PAT_B=1,z.FINDER_PAT_C=2,z.FINDER_PAT_D=3,z.FINDER_PAT_E=4,z.FINDER_PAT_F=5,z.FINDER_PATTERN_SEQUENCES=[[z.FINDER_PAT_A,z.FINDER_PAT_A],[z.FINDER_PAT_A,z.FINDER_PAT_B,z.FINDER_PAT_B],[z.FINDER_PAT_A,z.FINDER_PAT_C,z.FINDER_PAT_B,z.FINDER_PAT_D],[z.FINDER_PAT_A,z.FINDER_PAT_E,z.FINDER_PAT_B,z.FINDER_PAT_D,z.FINDER_PAT_C],[z.FINDER_PAT_A,z.FINDER_PAT_E,z.FINDER_PAT_B,z.FINDER_PAT_D,z.FINDER_PAT_D,z.FINDER_PAT_F],[z.FINDER_PAT_A,z.FINDER_PAT_E,z.FINDER_PAT_B,z.FINDER_PAT_D,z.FINDER_PAT_E,z.FINDER_PAT_F,z.FINDER_PAT_F],[z.FINDER_PAT_A,z.FINDER_PAT_A,z.FINDER_PAT_B,z.FINDER_PAT_B,z.FINDER_PAT_C,z.FINDER_PAT_C,z.FINDER_PAT_D,z.FINDER_PAT_D],[z.FINDER_PAT_A,z.FINDER_PAT_A,z.FINDER_PAT_B,z.FINDER_PAT_B,z.FINDER_PAT_C,z.FINDER_PAT_C,z.FINDER_PAT_D,z.FINDER_PAT_E,z.FINDER_PAT_E],[z.FINDER_PAT_A,z.FINDER_PAT_A,z.FINDER_PAT_B,z.FINDER_PAT_B,z.FINDER_PAT_C,z.FINDER_PAT_C,z.FINDER_PAT_D,z.FINDER_PAT_E,z.FINDER_PAT_F,z.FINDER_PAT_F],[z.FINDER_PAT_A,z.FINDER_PAT_A,z.FINDER_PAT_B,z.FINDER_PAT_B,z.FINDER_PAT_C,z.FINDER_PAT_D,z.FINDER_PAT_D,z.FINDER_PAT_E,z.FINDER_PAT_E,z.FINDER_PAT_F,z.FINDER_PAT_F]],z.MAX_PAIRS=11;class Rc extends Ir{constructor(e,t,n){super(e,t),this.count=0,this.finderPattern=n}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class ut extends Tt{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(e,t,n){const i=this.decodePair(t,!1,e,n);ut.addOrTally(this.possibleLeftPairs,i),t.reverse();let o=this.decodePair(t,!0,e,n);ut.addOrTally(this.possibleRightPairs,o),t.reverse();for(let l of this.possibleLeftPairs)if(l.getCount()>1){for(let c of this.possibleRightPairs)if(c.getCount()>1&&ut.checkChecksum(l,c))return ut.constructResult(l,c)}throw new L}static addOrTally(e,t){if(t==null)return;let n=!1;for(let i of e)if(i.getValue()===t.getValue()){i.incrementCount(),n=!0;break}n||e.push(t)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(e,t){let n=4537077*e.getValue()+t.getValue(),i=new String(n).toString(),o=new Re;for(let g=13-i.length;g>0;g--)o.append("0");o.append(i);let l=0;for(let g=0;g<13;g++){let p=o.charAt(g).charCodeAt(0)-48;l+=g&1?p:3*p}l=10-l%10,l===10&&(l=0),o.append(l.toString());let c=e.getFinderPattern().getResultPoints(),f=t.getFinderPattern().getResultPoints();return new Et(o.toString(),null,0,[c[0],c[1],f[0],f[1]],ue.RSS_14,new Date().getTime())}static checkChecksum(e,t){let n=(e.getChecksumPortion()+16*t.getChecksumPortion())%79,i=9*e.getFinderPattern().getValue()+t.getFinderPattern().getValue();return i>72&&i--,i>8&&i--,n===i}decodePair(e,t,n,i){try{let o=this.findFinderPattern(e,t),l=this.parseFoundFinderPattern(e,n,t,o),c=i==null?null:i.get(Te.NEED_RESULT_POINT_CALLBACK);if(c!=null){let p=(o[0]+o[1])/2;t&&(p=e.getSize()-1-p),c.foundPossibleResultPoint(new v(p,n))}let f=this.decodeDataCharacter(e,l,!0),g=this.decodeDataCharacter(e,l,!1);return new Rc(1597*f.getValue()+g.getValue(),f.getChecksumPortion()+4*g.getChecksumPortion(),l)}catch{return null}}decodeDataCharacter(e,t,n){let i=this.getDataCharacterCounters();for(let R=0;R<i.length;R++)i[R]=0;if(n)Je.recordPatternInReverse(e,t.getStartEnd()[0],i);else{Je.recordPattern(e,t.getStartEnd()[1]+1,i);for(let R=0,P=i.length-1;R<P;R++,P--){let Q=i[R];i[R]=i[P],i[P]=Q}}let o=n?16:15,l=G.sum(new Int32Array(i))/o,c=this.getOddCounts(),f=this.getEvenCounts(),g=this.getOddRoundingErrors(),p=this.getEvenRoundingErrors();for(let R=0;R<i.length;R++){let P=i[R]/l,Q=Math.floor(P+.5);Q<1?Q=1:Q>8&&(Q=8);let q=Math.floor(R/2);R&1?(f[q]=Q,p[q]=P-Q):(c[q]=Q,g[q]=P-Q)}this.adjustOddEvenCounts(n,o);let C=0,E=0;for(let R=c.length-1;R>=0;R--)E*=9,E+=c[R],C+=c[R];let S=0,O=0;for(let R=f.length-1;R>=0;R--)S*=9,S+=f[R],O+=f[R];let M=E+3*S;if(n){if(C&1||C>12||C<4)throw new L;let R=(12-C)/2,P=ut.OUTSIDE_ODD_WIDEST[R],Q=9-P,q=xn.getRSSvalue(c,P,!1),Z=xn.getRSSvalue(f,Q,!0),ve=ut.OUTSIDE_EVEN_TOTAL_SUBSET[R],ye=ut.OUTSIDE_GSUM[R];return new Ir(q*ve+Z+ye,M)}else{if(O&1||O>10||O<4)throw new L;let R=(10-O)/2,P=ut.INSIDE_ODD_WIDEST[R],Q=9-P,q=xn.getRSSvalue(c,P,!0),Z=xn.getRSSvalue(f,Q,!1),ve=ut.INSIDE_ODD_TOTAL_SUBSET[R],ye=ut.INSIDE_GSUM[R];return new Ir(Z*ve+q+ye,M)}}findFinderPattern(e,t){let n=this.getDecodeFinderCounters();n[0]=0,n[1]=0,n[2]=0,n[3]=0;let i=e.getSize(),o=!1,l=0;for(;l<i&&(o=!e.get(l),t!==o);)l++;let c=0,f=l;for(let g=l;g<i;g++)if(e.get(g)!==o)n[c]++;else{if(c===3){if(Tt.isFinderPattern(n))return[f,g];f+=n[0]+n[1],n[0]=n[2],n[1]=n[3],n[2]=0,n[3]=0,c--}else c++;n[c]=1,o=!o}throw new L}parseFoundFinderPattern(e,t,n,i){let o=e.get(i[0]),l=i[0]-1;for(;l>=0&&o!==e.get(l);)l--;l++;const c=i[0]-l,f=this.getDecodeFinderCounters(),g=new Int32Array(f.length);J.arraycopy(f,0,g,1,f.length-1),g[0]=c;const p=this.parseFinderValue(g,ut.FINDER_PATTERNS);let C=l,E=i[1];return n&&(C=e.getSize()-1-C,E=e.getSize()-1-E),new Ii(p,[l,i[1]],C,E,t)}adjustOddEvenCounts(e,t){let n=G.sum(new Int32Array(this.getOddCounts())),i=G.sum(new Int32Array(this.getEvenCounts())),o=!1,l=!1,c=!1,f=!1;e?(n>12?l=!0:n<4&&(o=!0),i>12?f=!0:i<4&&(c=!0)):(n>11?l=!0:n<5&&(o=!0),i>10?f=!0:i<4&&(c=!0));let g=n+i-t,p=(n&1)===(e?1:0),C=(i&1)===1;if(g===1)if(p){if(C)throw new L;l=!0}else{if(!C)throw new L;f=!0}else if(g===-1)if(p){if(C)throw new L;o=!0}else{if(!C)throw new L;c=!0}else if(g===0){if(p){if(!C)throw new L;n<i?(o=!0,f=!0):(l=!0,c=!0)}else if(C)throw new L}else throw new L;if(o){if(l)throw new L;Tt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(l&&Tt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(f)throw new L;Tt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}f&&Tt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ut.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],ut.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],ut.OUTSIDE_GSUM=[0,161,961,2015,2715],ut.INSIDE_GSUM=[0,336,1036,1516],ut.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],ut.INSIDE_ODD_WIDEST=[2,4,6,8],ut.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Sr extends Je{constructor(e,t){super(),this.readers=[],this.verbose=t===!0;const n=e?e.get(Te.POSSIBLE_FORMATS):null,i=e&&e.get(Te.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;n?((n.includes(ue.EAN_13)||n.includes(ue.UPC_A)||n.includes(ue.EAN_8)||n.includes(ue.UPC_E))&&this.readers.push(new fs(e)),n.includes(ue.CODE_39)&&this.readers.push(new Be(i)),n.includes(ue.CODE_128)&&this.readers.push(new ee),n.includes(ue.ITF)&&this.readers.push(new Me),n.includes(ue.RSS_14)&&this.readers.push(new ut),n.includes(ue.RSS_EXPANDED)&&this.readers.push(new z(this.verbose))):(this.readers.push(new fs(e)),this.readers.push(new Be),this.readers.push(new fs(e)),this.readers.push(new ee),this.readers.push(new Me),this.readers.push(new ut),this.readers.push(new z(this.verbose)))}decodeRow(e,t,n){for(let i=0;i<this.readers.length;i++)try{return this.readers[i].decodeRow(e,t,n)}catch{}throw new L}reset(){this.readers.forEach(e=>e.reset())}}class Dc extends gn{constructor(e=500,t){super(new Sr(t),e,t)}}class Ve{constructor(e,t,n){this.ecCodewords=e,this.ecBlocks=[t],n&&this.ecBlocks.push(n)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class ke{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Le{constructor(e,t,n,i,o,l){this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=n,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=o,this.ecBlocks=l;let c=0;const f=l.getECCodewords(),g=l.getECBlocks();for(let p of g)c+=p.getCount()*(p.getDataCodewords()+f);this.totalCodewords=c}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(e,t){if(e&1||t&1)throw new k;for(let n of Le.VERSIONS)if(n.symbolSizeRows===e&&n.symbolSizeColumns===t)return n;throw new k}toString(){return""+this.versionNumber}static buildVersions(){return[new Le(1,10,10,8,8,new Ve(5,new ke(1,3))),new Le(2,12,12,10,10,new Ve(7,new ke(1,5))),new Le(3,14,14,12,12,new Ve(10,new ke(1,8))),new Le(4,16,16,14,14,new Ve(12,new ke(1,12))),new Le(5,18,18,16,16,new Ve(14,new ke(1,18))),new Le(6,20,20,18,18,new Ve(18,new ke(1,22))),new Le(7,22,22,20,20,new Ve(20,new ke(1,30))),new Le(8,24,24,22,22,new Ve(24,new ke(1,36))),new Le(9,26,26,24,24,new Ve(28,new ke(1,44))),new Le(10,32,32,14,14,new Ve(36,new ke(1,62))),new Le(11,36,36,16,16,new Ve(42,new ke(1,86))),new Le(12,40,40,18,18,new Ve(48,new ke(1,114))),new Le(13,44,44,20,20,new Ve(56,new ke(1,144))),new Le(14,48,48,22,22,new Ve(68,new ke(1,174))),new Le(15,52,52,24,24,new Ve(42,new ke(2,102))),new Le(16,64,64,14,14,new Ve(56,new ke(2,140))),new Le(17,72,72,16,16,new Ve(36,new ke(4,92))),new Le(18,80,80,18,18,new Ve(48,new ke(4,114))),new Le(19,88,88,20,20,new Ve(56,new ke(4,144))),new Le(20,96,96,22,22,new Ve(68,new ke(4,174))),new Le(21,104,104,24,24,new Ve(56,new ke(6,136))),new Le(22,120,120,18,18,new Ve(68,new ke(6,175))),new Le(23,132,132,20,20,new Ve(62,new ke(8,163))),new Le(24,144,144,22,22,new Ve(62,new ke(8,156),new ke(2,155))),new Le(25,8,18,6,16,new Ve(7,new ke(1,5))),new Le(26,8,32,6,14,new Ve(11,new ke(1,10))),new Le(27,12,26,10,24,new Ve(14,new ke(1,16))),new Le(28,12,36,10,16,new Ve(18,new ke(1,22))),new Le(29,16,36,14,16,new Ve(24,new ke(1,32))),new Le(30,16,48,14,22,new Ve(28,new ke(1,49)))]}}Le.VERSIONS=Le.buildVersions();class xs{constructor(e){const t=e.getHeight();if(t<8||t>144||t&1)throw new k;this.version=xs.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new Xe(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(e){const t=e.getHeight(),n=e.getWidth();return Le.getVersionForDimensions(t,n)}readCodewords(){const e=new Int8Array(this.version.getTotalCodewords());let t=0,n=4,i=0;const o=this.mappingBitMatrix.getHeight(),l=this.mappingBitMatrix.getWidth();let c=!1,f=!1,g=!1,p=!1;do if(n===o&&i===0&&!c)e[t++]=this.readCorner1(o,l)&255,n-=2,i+=2,c=!0;else if(n===o-2&&i===0&&l&3&&!f)e[t++]=this.readCorner2(o,l)&255,n-=2,i+=2,f=!0;else if(n===o+4&&i===2&&!(l&7)&&!g)e[t++]=this.readCorner3(o,l)&255,n-=2,i+=2,g=!0;else if(n===o-2&&i===0&&(l&7)===4&&!p)e[t++]=this.readCorner4(o,l)&255,n-=2,i+=2,p=!0;else{do n<o&&i>=0&&!this.readMappingMatrix.get(i,n)&&(e[t++]=this.readUtah(n,i,o,l)&255),n-=2,i+=2;while(n>=0&&i<l);n+=1,i+=3;do n>=0&&i<l&&!this.readMappingMatrix.get(i,n)&&(e[t++]=this.readUtah(n,i,o,l)&255),n+=2,i-=2;while(n<o&&i>=0);n+=3,i+=1}while(n<o||i<l);if(t!==this.version.getTotalCodewords())throw new k;return e}readModule(e,t,n,i){return e<0&&(e+=n,t+=4-(n+4&7)),t<0&&(t+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)}readUtah(e,t,n,i){let o=0;return this.readModule(e-2,t-2,n,i)&&(o|=1),o<<=1,this.readModule(e-2,t-1,n,i)&&(o|=1),o<<=1,this.readModule(e-1,t-2,n,i)&&(o|=1),o<<=1,this.readModule(e-1,t-1,n,i)&&(o|=1),o<<=1,this.readModule(e-1,t,n,i)&&(o|=1),o<<=1,this.readModule(e,t-2,n,i)&&(o|=1),o<<=1,this.readModule(e,t-1,n,i)&&(o|=1),o<<=1,this.readModule(e,t,n,i)&&(o|=1),o}readCorner1(e,t){let n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,1,e,t)&&(n|=1),n<<=1,this.readModule(e-1,2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n}readCorner2(e,t){let n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-4,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n}readCorner3(e,t){let n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-3,e,t)&&(n|=1),n<<=1,this.readModule(1,t-2,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n}readCorner4(e,t){let n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n}extractDataRegion(e){const t=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new T("Dimension of bitMatrix must match the version size");const i=this.version.getDataRegionSizeRows(),o=this.version.getDataRegionSizeColumns(),l=t/i|0,c=n/o|0,f=l*i,g=c*o,p=new Xe(g,f);for(let C=0;C<l;++C){const E=C*i;for(let S=0;S<c;++S){const O=S*o;for(let M=0;M<i;++M){const R=C*(i+2)+1+M,P=E+M;for(let Q=0;Q<o;++Q){const q=S*(o+2)+1+Q;if(e.get(q,R)){const Z=O+Q;p.set(Z,P)}}}}}return p}}class ps{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t){const n=t.getECBlocks();let i=0;const o=n.getECBlocks();for(let M of o)i+=M.getCount();const l=new Array(i);let c=0;for(let M of o)for(let R=0;R<M.getCount();R++){const P=M.getDataCodewords(),Q=n.getECCodewords()+P;l[c++]=new ps(P,new Uint8Array(Q))}const g=l[0].codewords.length-n.getECCodewords(),p=g-1;let C=0;for(let M=0;M<p;M++)for(let R=0;R<c;R++)l[R].codewords[M]=e[C++];const E=t.getVersionNumber()===24,S=E?8:c;for(let M=0;M<S;M++)l[M].codewords[g-1]=e[C++];const O=l[0].codewords.length;for(let M=g;M<O;M++)for(let R=0;R<c;R++){const P=E?(R+8)%c:R,Q=E&&P>7?M-1:M;l[P].codewords[Q]=e[C++]}if(C!==e.length)throw new T;return l}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class ws{constructor(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(e){if(e<1||e>32||e>this.available())throw new T(""+e);let t=0,n=this.bitOffset,i=this.byteOffset;const o=this.bytes;if(n>0){const l=8-n,c=e<l?e:l,f=l-c,g=255>>8-c<<f;t=(o[i]&g)>>f,e-=c,n+=c,n===8&&(n=0,i++)}if(e>0){for(;e>=8;)t=t<<8|o[i]&255,i++,e-=8;if(e>0){const l=8-e,c=255>>l<<l;t=t<<e|(o[i]&c)>>l,n+=e}}return this.bitOffset=n,this.byteOffset=i,t}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var wt;(function(A){A[A.PAD_ENCODE=0]="PAD_ENCODE",A[A.ASCII_ENCODE=1]="ASCII_ENCODE",A[A.C40_ENCODE=2]="C40_ENCODE",A[A.TEXT_ENCODE=3]="TEXT_ENCODE",A[A.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",A[A.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",A[A.BASE256_ENCODE=6]="BASE256_ENCODE"})(wt||(wt={}));class Wn{static decode(e){const t=new ws(e),n=new Re,i=new Re,o=new Array;let l=wt.ASCII_ENCODE;do if(l===wt.ASCII_ENCODE)l=this.decodeAsciiSegment(t,n,i);else{switch(l){case wt.C40_ENCODE:this.decodeC40Segment(t,n);break;case wt.TEXT_ENCODE:this.decodeTextSegment(t,n);break;case wt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,n);break;case wt.EDIFACT_ENCODE:this.decodeEdifactSegment(t,n);break;case wt.BASE256_ENCODE:this.decodeBase256Segment(t,n,o);break;default:throw new k}l=wt.ASCII_ENCODE}while(l!==wt.PAD_ENCODE&&t.available()>0);return i.length()>0&&n.append(i.toString()),new Vn(e,n.toString(),o.length===0?null:o,null)}static decodeAsciiSegment(e,t,n){let i=!1;do{let o=e.readBits(8);if(o===0)throw new k;if(o<=128)return i&&(o+=128),t.append(String.fromCharCode(o-1)),wt.ASCII_ENCODE;if(o===129)return wt.PAD_ENCODE;if(o<=229){const l=o-130;l<10&&t.append("0"),t.append(""+l)}else switch(o){case 230:return wt.C40_ENCODE;case 231:return wt.BASE256_ENCODE;case 232:t.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:t.append("[)>05"),n.insert(0,"");break;case 237:t.append("[)>06"),n.insert(0,"");break;case 238:return wt.ANSIX12_ENCODE;case 239:return wt.TEXT_ENCODE;case 240:return wt.EDIFACT_ENCODE;case 241:break;default:if(o!==254||e.available()!==0)throw new k;break}}while(e.available()>0);return wt.ASCII_ENCODE}static decodeC40Segment(e,t){let n=!1;const i=[];let o=0;do{if(e.available()===8)return;const l=e.readBits(8);if(l===254)return;this.parseTwoBytes(l,e.readBits(8),i);for(let c=0;c<3;c++){const f=i[c];switch(o){case 0:if(f<3)o=f+1;else if(f<this.C40_BASIC_SET_CHARS.length){const g=this.C40_BASIC_SET_CHARS[f];n?(t.append(String.fromCharCode(g.charCodeAt(0)+128)),n=!1):t.append(g)}else throw new k;break;case 1:n?(t.append(String.fromCharCode(f+128)),n=!1):t.append(String.fromCharCode(f)),o=0;break;case 2:if(f<this.C40_SHIFT2_SET_CHARS.length){const g=this.C40_SHIFT2_SET_CHARS[f];n?(t.append(String.fromCharCode(g.charCodeAt(0)+128)),n=!1):t.append(g)}else switch(f){case 27:t.append("");break;case 30:n=!0;break;default:throw new k}o=0;break;case 3:n?(t.append(String.fromCharCode(f+224)),n=!1):t.append(String.fromCharCode(f+96)),o=0;break;default:throw new k}}}while(e.available()>0)}static decodeTextSegment(e,t){let n=!1,i=[],o=0;do{if(e.available()===8)return;const l=e.readBits(8);if(l===254)return;this.parseTwoBytes(l,e.readBits(8),i);for(let c=0;c<3;c++){const f=i[c];switch(o){case 0:if(f<3)o=f+1;else if(f<this.TEXT_BASIC_SET_CHARS.length){const g=this.TEXT_BASIC_SET_CHARS[f];n?(t.append(String.fromCharCode(g.charCodeAt(0)+128)),n=!1):t.append(g)}else throw new k;break;case 1:n?(t.append(String.fromCharCode(f+128)),n=!1):t.append(String.fromCharCode(f)),o=0;break;case 2:if(f<this.TEXT_SHIFT2_SET_CHARS.length){const g=this.TEXT_SHIFT2_SET_CHARS[f];n?(t.append(String.fromCharCode(g.charCodeAt(0)+128)),n=!1):t.append(g)}else switch(f){case 27:t.append("");break;case 30:n=!0;break;default:throw new k}o=0;break;case 3:if(f<this.TEXT_SHIFT3_SET_CHARS.length){const g=this.TEXT_SHIFT3_SET_CHARS[f];n?(t.append(String.fromCharCode(g.charCodeAt(0)+128)),n=!1):t.append(g),o=0}else throw new k;break;default:throw new k}}}while(e.available()>0)}static decodeAnsiX12Segment(e,t){const n=[];do{if(e.available()===8)return;const i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),n);for(let o=0;o<3;o++){const l=n[o];switch(l){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(l<14)t.append(String.fromCharCode(l+44));else if(l<40)t.append(String.fromCharCode(l+51));else throw new k;break}}}while(e.available()>0)}static parseTwoBytes(e,t,n){let i=(e<<8)+t-1,o=Math.floor(i/1600);n[0]=o,i-=o*1600,o=Math.floor(i/40),n[1]=o,n[2]=i-o*40}static decodeEdifactSegment(e,t){do{if(e.available()<=16)return;for(let n=0;n<4;n++){let i=e.readBits(6);if(i===31){const o=8-e.getBitOffset();o!==8&&e.readBits(o);return}i&32||(i|=64),t.append(String.fromCharCode(i))}}while(e.available()>0)}static decodeBase256Segment(e,t,n){let i=1+e.getByteOffset();const o=this.unrandomize255State(e.readBits(8),i++);let l;if(o===0?l=e.available()/8|0:o<250?l=o:l=250*(o-249)+this.unrandomize255State(e.readBits(8),i++),l<0)throw new k;const c=new Uint8Array(l);for(let f=0;f<l;f++){if(e.available()<8)throw new k;c[f]=this.unrandomize255State(e.readBits(8),i++)}n.push(c);try{t.append(it.decode(c,he.ISO88591))}catch(f){throw new W("Platform does not support required encoding: "+f.message)}}static unrandomize255State(e,t){const n=149*t%255+1,i=e-n;return i>=0?i:i+256}}Wn.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Wn.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Wn.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Wn.TEXT_SHIFT2_SET_CHARS=Wn.C40_SHIFT2_SET_CHARS,Wn.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class vc{constructor(){this.rsDecoder=new Y(N.DATA_MATRIX_FIELD_256)}decode(e){const t=new xs(e),n=t.getVersion(),i=t.readCodewords(),o=ps.getDataBlocks(i,n);let l=0;for(let g of o)l+=g.getNumDataCodewords();const c=new Uint8Array(l),f=o.length;for(let g=0;g<f;g++){const p=o[g],C=p.getCodewords(),E=p.getNumDataCodewords();this.correctErrors(C,E);for(let S=0;S<E;S++)c[S*f+g]=C[S]}return Wn.decode(c)}correctErrors(e,t){const n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch{throw new H}for(let i=0;i<t;i++)e[i]=n[i]}}class dt{constructor(e){this.image=e,this.rectangleDetector=new le(this.image)}detect(){const e=this.rectangleDetector.detect();let t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new L;t=this.shiftToModuleCenter(t);const n=t[0],i=t[1],o=t[2],l=t[3];let c=this.transitionsBetween(n,l)+1,f=this.transitionsBetween(o,l)+1;(c&1)===1&&(c+=1),(f&1)===1&&(f+=1),4*c<7*f&&4*f<7*c&&(c=f=Math.max(c,f));let g=dt.sampleGrid(this.image,n,i,o,l,c,f);return new de(g,[n,i,o,l])}static shiftPoint(e,t,n){let i=(t.getX()-e.getX())/(n+1),o=(t.getY()-e.getY())/(n+1);return new v(e.getX()+i,e.getY()+o)}static moveAway(e,t,n){let i=e.getX(),o=e.getY();return i<t?i-=1:i+=1,o<n?o-=1:o+=1,new v(i,o)}detectSolid1(e){let t=e[0],n=e[1],i=e[3],o=e[2],l=this.transitionsBetween(t,n),c=this.transitionsBetween(n,i),f=this.transitionsBetween(i,o),g=this.transitionsBetween(o,t),p=l,C=[o,t,n,i];return p>c&&(p=c,C[0]=t,C[1]=n,C[2]=i,C[3]=o),p>f&&(p=f,C[0]=n,C[1]=i,C[2]=o,C[3]=t),p>g&&(C[0]=i,C[1]=o,C[2]=t,C[3]=n),C}detectSolid2(e){let t=e[0],n=e[1],i=e[2],o=e[3],l=this.transitionsBetween(t,o),c=dt.shiftPoint(n,i,(l+1)*4),f=dt.shiftPoint(i,n,(l+1)*4),g=this.transitionsBetween(c,t),p=this.transitionsBetween(f,o);return g<p?(e[0]=t,e[1]=n,e[2]=i,e[3]=o):(e[0]=n,e[1]=i,e[2]=o,e[3]=t),e}correctTopRight(e){let t=e[0],n=e[1],i=e[2],o=e[3],l=this.transitionsBetween(t,o),c=this.transitionsBetween(n,o),f=dt.shiftPoint(t,n,(c+1)*4),g=dt.shiftPoint(i,n,(l+1)*4);l=this.transitionsBetween(f,o),c=this.transitionsBetween(g,o);let p=new v(o.getX()+(i.getX()-n.getX())/(l+1),o.getY()+(i.getY()-n.getY())/(l+1)),C=new v(o.getX()+(t.getX()-n.getX())/(c+1),o.getY()+(t.getY()-n.getY())/(c+1));if(!this.isValid(p))return this.isValid(C)?C:null;if(!this.isValid(C))return p;let E=this.transitionsBetween(f,p)+this.transitionsBetween(g,p),S=this.transitionsBetween(f,C)+this.transitionsBetween(g,C);return E>S?p:C}shiftToModuleCenter(e){let t=e[0],n=e[1],i=e[2],o=e[3],l=this.transitionsBetween(t,o)+1,c=this.transitionsBetween(i,o)+1,f=dt.shiftPoint(t,n,c*4),g=dt.shiftPoint(i,n,l*4);l=this.transitionsBetween(f,o)+1,c=this.transitionsBetween(g,o)+1,(l&1)===1&&(l+=1),(c&1)===1&&(c+=1);let p=(t.getX()+n.getX()+i.getX()+o.getX())/4,C=(t.getY()+n.getY()+i.getY()+o.getY())/4;t=dt.moveAway(t,p,C),n=dt.moveAway(n,p,C),i=dt.moveAway(i,p,C),o=dt.moveAway(o,p,C);let E,S;return f=dt.shiftPoint(t,n,c*4),f=dt.shiftPoint(f,o,l*4),E=dt.shiftPoint(n,t,c*4),E=dt.shiftPoint(E,i,l*4),g=dt.shiftPoint(i,o,c*4),g=dt.shiftPoint(g,n,l*4),S=dt.shiftPoint(o,i,c*4),S=dt.shiftPoint(S,t,l*4),[f,E,g,S]}isValid(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()}static sampleGrid(e,t,n,i,o,l,c){return Oe.getInstance().sampleGrid(e,l,c,.5,.5,l-.5,.5,l-.5,c-.5,.5,c-.5,t.getX(),t.getY(),o.getX(),o.getY(),i.getX(),i.getY(),n.getX(),n.getY())}transitionsBetween(e,t){let n=Math.trunc(e.getX()),i=Math.trunc(e.getY()),o=Math.trunc(t.getX()),l=Math.trunc(t.getY()),c=Math.abs(l-i)>Math.abs(o-n);if(c){let M=n;n=i,i=M,M=o,o=l,l=M}let f=Math.abs(o-n),g=Math.abs(l-i),p=-f/2,C=i<l?1:-1,E=n<o?1:-1,S=0,O=this.image.get(c?i:n,c?n:i);for(let M=n,R=i;M!==o;M+=E){let P=this.image.get(c?R:M,c?M:R);if(P!==O&&(S++,O=P),p+=g,p>0){if(R===l)break;R+=C,p-=f}}return S}}class zn{constructor(){this.decoder=new vc}decode(e,t=null){let n,i;if(t!=null&&t.has(Te.PURE_BARCODE)){const g=zn.extractPureBits(e.getBlackMatrix());n=this.decoder.decode(g),i=zn.NO_POINTS}else{const g=new dt(e.getBlackMatrix()).detect();n=this.decoder.decode(g.getBits()),i=g.getPoints()}const o=n.getRawBytes(),l=new Et(n.getText(),o,8*o.length,i,ue.DATA_MATRIX,J.currentTimeMillis()),c=n.getByteSegments();c!=null&&l.putMetadata(ct.BYTE_SEGMENTS,c);const f=n.getECLevel();return f!=null&&l.putMetadata(ct.ERROR_CORRECTION_LEVEL,f),l}reset(){}static extractPureBits(e){const t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(t==null||n==null)throw new L;const i=this.moduleSize(t,e);let o=t[1];const l=n[1];let c=t[0];const g=(n[0]-c+1)/i,p=(l-o+1)/i;if(g<=0||p<=0)throw new L;const C=i/2;o+=C,c+=C;const E=new Xe(g,p);for(let S=0;S<p;S++){const O=o+S*i;for(let M=0;M<g;M++)e.get(c+M*i,O)&&E.set(M,S)}return E}static moduleSize(e,t){const n=t.getWidth();let i=e[0];const o=e[1];for(;i<n&&t.get(i,o);)i++;if(i===n)throw new L;const l=i-e[0];if(l===0)throw new L;return l}}zn.NO_POINTS=[];class Lc extends gn{constructor(e=500){super(new zn,e)}}var Tr;(function(A){A[A.L=0]="L",A[A.M=1]="M",A[A.Q=2]="Q",A[A.H=3]="H"})(Tr||(Tr={}));class $e{constructor(e,t,n){this.value=e,this.stringValue=t,this.bits=n,$e.FOR_BITS.set(n,this),$e.FOR_VALUE.set(e,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(e){switch(e){case"L":return $e.L;case"M":return $e.M;case"Q":return $e.Q;case"H":return $e.H;default:throw new y(e+"not available")}}toString(){return this.stringValue}equals(e){if(!(e instanceof $e))return!1;const t=e;return this.value===t.value}static forBits(e){if(e<0||e>=$e.FOR_BITS.size)throw new T;return $e.FOR_BITS.get(e)}}$e.FOR_BITS=new Map,$e.FOR_VALUE=new Map,$e.L=new $e(Tr.L,"L",1),$e.M=new $e(Tr.M,"M",0),$e.Q=new $e(Tr.Q,"Q",3),$e.H=new $e(Tr.H,"H",2);class _t{constructor(e){this.errorCorrectionLevel=$e.forBits(e>>3&3),this.dataMask=e&7}static numBitsDiffering(e,t){return ne.bitCount(e^t)}static decodeFormatInformation(e,t){const n=_t.doDecodeFormatInformation(e,t);return n!==null?n:_t.doDecodeFormatInformation(e^_t.FORMAT_INFO_MASK_QR,t^_t.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(e,t){let n=Number.MAX_SAFE_INTEGER,i=0;for(const o of _t.FORMAT_INFO_DECODE_LOOKUP){const l=o[0];if(l===e||l===t)return new _t(o[1]);let c=_t.numBitsDiffering(e,l);c<n&&(i=o[1],n=c),e!==t&&(c=_t.numBitsDiffering(t,l),c<n&&(i=o[1],n=c))}return n<=3?new _t(i):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(e){if(!(e instanceof _t))return!1;const t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask}}_t.FORMAT_INFO_MASK_QR=21522,_t.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class D{constructor(e,...t){this.ecCodewordsPerBlock=e,this.ecBlocks=t}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let e=0;const t=this.ecBlocks;for(const n of t)e+=n.getCount();return e}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class b{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class fe{constructor(e,t,...n){this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=n;let i=0;const o=n[0].getECCodewordsPerBlock(),l=n[0].getECBlocks();for(const c of l)i+=c.getCount()*(c.getDataCodewords()+o);this.totalCodewords=i}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(e){return this.ecBlocks[e.getValue()]}static getProvisionalVersionForDimension(e){if(e%4!==1)throw new k;try{return this.getVersionForNumber((e-17)/4)}catch{throw new k}}static getVersionForNumber(e){if(e<1||e>40)throw new T;return fe.VERSIONS[e-1]}static decodeVersionInformation(e){let t=Number.MAX_SAFE_INTEGER,n=0;for(let i=0;i<fe.VERSION_DECODE_INFO.length;i++){const o=fe.VERSION_DECODE_INFO[i];if(o===e)return fe.getVersionForNumber(i+7);const l=_t.numBitsDiffering(e,o);l<t&&(n=i+7,t=l)}return t<=3?fe.getVersionForNumber(n):null}buildFunctionPattern(){const e=this.getDimensionForVersion(),t=new Xe(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);const n=this.alignmentPatternCenters.length;for(let i=0;i<n;i++){const o=this.alignmentPatternCenters[i]-2;for(let l=0;l<n;l++)i===0&&(l===0||l===n-1)||i===n-1&&l===0||t.setRegion(this.alignmentPatternCenters[l]-2,o,5,5)}return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t}toString(){return""+this.versionNumber}}fe.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),fe.VERSIONS=[new fe(1,new Int32Array(0),new D(7,new b(1,19)),new D(10,new b(1,16)),new D(13,new b(1,13)),new D(17,new b(1,9))),new fe(2,Int32Array.from([6,18]),new D(10,new b(1,34)),new D(16,new b(1,28)),new D(22,new b(1,22)),new D(28,new b(1,16))),new fe(3,Int32Array.from([6,22]),new D(15,new b(1,55)),new D(26,new b(1,44)),new D(18,new b(2,17)),new D(22,new b(2,13))),new fe(4,Int32Array.from([6,26]),new D(20,new b(1,80)),new D(18,new b(2,32)),new D(26,new b(2,24)),new D(16,new b(4,9))),new fe(5,Int32Array.from([6,30]),new D(26,new b(1,108)),new D(24,new b(2,43)),new D(18,new b(2,15),new b(2,16)),new D(22,new b(2,11),new b(2,12))),new fe(6,Int32Array.from([6,34]),new D(18,new b(2,68)),new D(16,new b(4,27)),new D(24,new b(4,19)),new D(28,new b(4,15))),new fe(7,Int32Array.from([6,22,38]),new D(20,new b(2,78)),new D(18,new b(4,31)),new D(18,new b(2,14),new b(4,15)),new D(26,new b(4,13),new b(1,14))),new fe(8,Int32Array.from([6,24,42]),new D(24,new b(2,97)),new D(22,new b(2,38),new b(2,39)),new D(22,new b(4,18),new b(2,19)),new D(26,new b(4,14),new b(2,15))),new fe(9,Int32Array.from([6,26,46]),new D(30,new b(2,116)),new D(22,new b(3,36),new b(2,37)),new D(20,new b(4,16),new b(4,17)),new D(24,new b(4,12),new b(4,13))),new fe(10,Int32Array.from([6,28,50]),new D(18,new b(2,68),new b(2,69)),new D(26,new b(4,43),new b(1,44)),new D(24,new b(6,19),new b(2,20)),new D(28,new b(6,15),new b(2,16))),new fe(11,Int32Array.from([6,30,54]),new D(20,new b(4,81)),new D(30,new b(1,50),new b(4,51)),new D(28,new b(4,22),new b(4,23)),new D(24,new b(3,12),new b(8,13))),new fe(12,Int32Array.from([6,32,58]),new D(24,new b(2,92),new b(2,93)),new D(22,new b(6,36),new b(2,37)),new D(26,new b(4,20),new b(6,21)),new D(28,new b(7,14),new b(4,15))),new fe(13,Int32Array.from([6,34,62]),new D(26,new b(4,107)),new D(22,new b(8,37),new b(1,38)),new D(24,new b(8,20),new b(4,21)),new D(22,new b(12,11),new b(4,12))),new fe(14,Int32Array.from([6,26,46,66]),new D(30,new b(3,115),new b(1,116)),new D(24,new b(4,40),new b(5,41)),new D(20,new b(11,16),new b(5,17)),new D(24,new b(11,12),new b(5,13))),new fe(15,Int32Array.from([6,26,48,70]),new D(22,new b(5,87),new b(1,88)),new D(24,new b(5,41),new b(5,42)),new D(30,new b(5,24),new b(7,25)),new D(24,new b(11,12),new b(7,13))),new fe(16,Int32Array.from([6,26,50,74]),new D(24,new b(5,98),new b(1,99)),new D(28,new b(7,45),new b(3,46)),new D(24,new b(15,19),new b(2,20)),new D(30,new b(3,15),new b(13,16))),new fe(17,Int32Array.from([6,30,54,78]),new D(28,new b(1,107),new b(5,108)),new D(28,new b(10,46),new b(1,47)),new D(28,new b(1,22),new b(15,23)),new D(28,new b(2,14),new b(17,15))),new fe(18,Int32Array.from([6,30,56,82]),new D(30,new b(5,120),new b(1,121)),new D(26,new b(9,43),new b(4,44)),new D(28,new b(17,22),new b(1,23)),new D(28,new b(2,14),new b(19,15))),new fe(19,Int32Array.from([6,30,58,86]),new D(28,new b(3,113),new b(4,114)),new D(26,new b(3,44),new b(11,45)),new D(26,new b(17,21),new b(4,22)),new D(26,new b(9,13),new b(16,14))),new fe(20,Int32Array.from([6,34,62,90]),new D(28,new b(3,107),new b(5,108)),new D(26,new b(3,41),new b(13,42)),new D(30,new b(15,24),new b(5,25)),new D(28,new b(15,15),new b(10,16))),new fe(21,Int32Array.from([6,28,50,72,94]),new D(28,new b(4,116),new b(4,117)),new D(26,new b(17,42)),new D(28,new b(17,22),new b(6,23)),new D(30,new b(19,16),new b(6,17))),new fe(22,Int32Array.from([6,26,50,74,98]),new D(28,new b(2,111),new b(7,112)),new D(28,new b(17,46)),new D(30,new b(7,24),new b(16,25)),new D(24,new b(34,13))),new fe(23,Int32Array.from([6,30,54,78,102]),new D(30,new b(4,121),new b(5,122)),new D(28,new b(4,47),new b(14,48)),new D(30,new b(11,24),new b(14,25)),new D(30,new b(16,15),new b(14,16))),new fe(24,Int32Array.from([6,28,54,80,106]),new D(30,new b(6,117),new b(4,118)),new D(28,new b(6,45),new b(14,46)),new D(30,new b(11,24),new b(16,25)),new D(30,new b(30,16),new b(2,17))),new fe(25,Int32Array.from([6,32,58,84,110]),new D(26,new b(8,106),new b(4,107)),new D(28,new b(8,47),new b(13,48)),new D(30,new b(7,24),new b(22,25)),new D(30,new b(22,15),new b(13,16))),new fe(26,Int32Array.from([6,30,58,86,114]),new D(28,new b(10,114),new b(2,115)),new D(28,new b(19,46),new b(4,47)),new D(28,new b(28,22),new b(6,23)),new D(30,new b(33,16),new b(4,17))),new fe(27,Int32Array.from([6,34,62,90,118]),new D(30,new b(8,122),new b(4,123)),new D(28,new b(22,45),new b(3,46)),new D(30,new b(8,23),new b(26,24)),new D(30,new b(12,15),new b(28,16))),new fe(28,Int32Array.from([6,26,50,74,98,122]),new D(30,new b(3,117),new b(10,118)),new D(28,new b(3,45),new b(23,46)),new D(30,new b(4,24),new b(31,25)),new D(30,new b(11,15),new b(31,16))),new fe(29,Int32Array.from([6,30,54,78,102,126]),new D(30,new b(7,116),new b(7,117)),new D(28,new b(21,45),new b(7,46)),new D(30,new b(1,23),new b(37,24)),new D(30,new b(19,15),new b(26,16))),new fe(30,Int32Array.from([6,26,52,78,104,130]),new D(30,new b(5,115),new b(10,116)),new D(28,new b(19,47),new b(10,48)),new D(30,new b(15,24),new b(25,25)),new D(30,new b(23,15),new b(25,16))),new fe(31,Int32Array.from([6,30,56,82,108,134]),new D(30,new b(13,115),new b(3,116)),new D(28,new b(2,46),new b(29,47)),new D(30,new b(42,24),new b(1,25)),new D(30,new b(23,15),new b(28,16))),new fe(32,Int32Array.from([6,34,60,86,112,138]),new D(30,new b(17,115)),new D(28,new b(10,46),new b(23,47)),new D(30,new b(10,24),new b(35,25)),new D(30,new b(19,15),new b(35,16))),new fe(33,Int32Array.from([6,30,58,86,114,142]),new D(30,new b(17,115),new b(1,116)),new D(28,new b(14,46),new b(21,47)),new D(30,new b(29,24),new b(19,25)),new D(30,new b(11,15),new b(46,16))),new fe(34,Int32Array.from([6,34,62,90,118,146]),new D(30,new b(13,115),new b(6,116)),new D(28,new b(14,46),new b(23,47)),new D(30,new b(44,24),new b(7,25)),new D(30,new b(59,16),new b(1,17))),new fe(35,Int32Array.from([6,30,54,78,102,126,150]),new D(30,new b(12,121),new b(7,122)),new D(28,new b(12,47),new b(26,48)),new D(30,new b(39,24),new b(14,25)),new D(30,new b(22,15),new b(41,16))),new fe(36,Int32Array.from([6,24,50,76,102,128,154]),new D(30,new b(6,121),new b(14,122)),new D(28,new b(6,47),new b(34,48)),new D(30,new b(46,24),new b(10,25)),new D(30,new b(2,15),new b(64,16))),new fe(37,Int32Array.from([6,28,54,80,106,132,158]),new D(30,new b(17,122),new b(4,123)),new D(28,new b(29,46),new b(14,47)),new D(30,new b(49,24),new b(10,25)),new D(30,new b(24,15),new b(46,16))),new fe(38,Int32Array.from([6,32,58,84,110,136,162]),new D(30,new b(4,122),new b(18,123)),new D(28,new b(13,46),new b(32,47)),new D(30,new b(48,24),new b(14,25)),new D(30,new b(42,15),new b(32,16))),new fe(39,Int32Array.from([6,26,54,82,110,138,166]),new D(30,new b(20,117),new b(4,118)),new D(28,new b(40,47),new b(7,48)),new D(30,new b(43,24),new b(22,25)),new D(30,new b(10,15),new b(67,16))),new fe(40,Int32Array.from([6,30,58,86,114,142,170]),new D(30,new b(19,118),new b(6,119)),new D(28,new b(18,47),new b(31,48)),new D(30,new b(34,24),new b(34,25)),new D(30,new b(20,15),new b(61,16)))];var Ct;(function(A){A[A.DATA_MASK_000=0]="DATA_MASK_000",A[A.DATA_MASK_001=1]="DATA_MASK_001",A[A.DATA_MASK_010=2]="DATA_MASK_010",A[A.DATA_MASK_011=3]="DATA_MASK_011",A[A.DATA_MASK_100=4]="DATA_MASK_100",A[A.DATA_MASK_101=5]="DATA_MASK_101",A[A.DATA_MASK_110=6]="DATA_MASK_110",A[A.DATA_MASK_111=7]="DATA_MASK_111"})(Ct||(Ct={}));class $t{constructor(e,t){this.value=e,this.isMasked=t}unmaskBitMatrix(e,t){for(let n=0;n<t;n++)for(let i=0;i<t;i++)this.isMasked(n,i)&&e.flip(i,n)}}$t.values=new Map([[Ct.DATA_MASK_000,new $t(Ct.DATA_MASK_000,(A,e)=>(A+e&1)===0)],[Ct.DATA_MASK_001,new $t(Ct.DATA_MASK_001,(A,e)=>(A&1)===0)],[Ct.DATA_MASK_010,new $t(Ct.DATA_MASK_010,(A,e)=>e%3===0)],[Ct.DATA_MASK_011,new $t(Ct.DATA_MASK_011,(A,e)=>(A+e)%3===0)],[Ct.DATA_MASK_100,new $t(Ct.DATA_MASK_100,(A,e)=>(Math.floor(A/2)+Math.floor(e/3)&1)===0)],[Ct.DATA_MASK_101,new $t(Ct.DATA_MASK_101,(A,e)=>A*e%6===0)],[Ct.DATA_MASK_110,new $t(Ct.DATA_MASK_110,(A,e)=>A*e%6<3)],[Ct.DATA_MASK_111,new $t(Ct.DATA_MASK_111,(A,e)=>(A+e+A*e%3&1)===0)]]);class Bc{constructor(e){const t=e.getHeight();if(t<21||(t&3)!==1)throw new k;this.bitMatrix=e}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let e=0;for(let o=0;o<6;o++)e=this.copyBit(o,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(let o=5;o>=0;o--)e=this.copyBit(8,o,e);const t=this.bitMatrix.getHeight();let n=0;const i=t-7;for(let o=t-1;o>=i;o--)n=this.copyBit(8,o,n);for(let o=t-8;o<t;o++)n=this.copyBit(o,8,n);if(this.parsedFormatInfo=_t.decodeFormatInformation(e,n),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new k}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return fe.getVersionForNumber(t);let n=0;const i=e-11;for(let l=5;l>=0;l--)for(let c=e-9;c>=i;c--)n=this.copyBit(c,l,n);let o=fe.decodeVersionInformation(n);if(o!==null&&o.getDimensionForVersion()===e)return this.parsedVersion=o,o;n=0;for(let l=5;l>=0;l--)for(let c=e-9;c>=i;c--)n=this.copyBit(l,c,n);if(o=fe.decodeVersionInformation(n),o!==null&&o.getDimensionForVersion()===e)return this.parsedVersion=o,o;throw new k}copyBit(e,t,n){return(this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t))?n<<1|1:n<<1}readCodewords(){const e=this.readFormatInformation(),t=this.readVersion(),n=$t.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,i);const o=t.buildFunctionPattern();let l=!0;const c=new Uint8Array(t.getTotalCodewords());let f=0,g=0,p=0;for(let C=i-1;C>0;C-=2){C===6&&C--;for(let E=0;E<i;E++){const S=l?i-1-E:E;for(let O=0;O<2;O++)o.get(C-O,S)||(p++,g<<=1,this.bitMatrix.get(C-O,S)&&(g|=1),p===8&&(c[f++]=g,p=0,g=0))}l=!l}if(f!==t.getTotalCodewords())throw new k;return c}remask(){if(this.parsedFormatInfo===null)return;const e=$t.values[this.parsedFormatInfo.getDataMask()],t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}setMirror(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e}mirror(){const e=this.bitMatrix;for(let t=0,n=e.getWidth();t<n;t++)for(let i=t+1,o=e.getHeight();i<o;i++)e.get(t,i)!==e.get(i,t)&&(e.flip(i,t),e.flip(t,i))}}class As{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t,n){if(e.length!==t.getTotalCodewords())throw new T;const i=t.getECBlocksForLevel(n);let o=0;const l=i.getECBlocks();for(const O of l)o+=O.getCount();const c=new Array(o);let f=0;for(const O of l)for(let M=0;M<O.getCount();M++){const R=O.getDataCodewords(),P=i.getECCodewordsPerBlock()+R;c[f++]=new As(R,new Uint8Array(P))}const g=c[0].codewords.length;let p=c.length-1;for(;p>=0&&c[p].codewords.length!==g;)p--;p++;const C=g-i.getECCodewordsPerBlock();let E=0;for(let O=0;O<C;O++)for(let M=0;M<f;M++)c[M].codewords[O]=e[E++];for(let O=p;O<f;O++)c[O].codewords[C]=e[E++];const S=c[0].codewords.length;for(let O=C;O<S;O++)for(let M=0;M<f;M++){const R=M<p?O:O+1;c[M].codewords[R]=e[E++]}return c}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var en;(function(A){A[A.TERMINATOR=0]="TERMINATOR",A[A.NUMERIC=1]="NUMERIC",A[A.ALPHANUMERIC=2]="ALPHANUMERIC",A[A.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",A[A.BYTE=4]="BYTE",A[A.ECI=5]="ECI",A[A.KANJI=6]="KANJI",A[A.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",A[A.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",A[A.HANZI=9]="HANZI"})(en||(en={}));class ge{constructor(e,t,n,i){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=n,this.bits=i,ge.FOR_BITS.set(i,this),ge.FOR_VALUE.set(e,this)}static forBits(e){const t=ge.FOR_BITS.get(e);if(t===void 0)throw new T;return t}getCharacterCountBits(e){const t=e.getVersionNumber();let n;return t<=9?n=0:t<=26?n=1:n=2,this.characterCountBitsForVersions[n]}getValue(){return this.value}getBits(){return this.bits}equals(e){if(!(e instanceof ge))return!1;const t=e;return this.value===t.value}toString(){return this.stringValue}}ge.FOR_BITS=new Map,ge.FOR_VALUE=new Map,ge.TERMINATOR=new ge(en.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),ge.NUMERIC=new ge(en.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),ge.ALPHANUMERIC=new ge(en.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),ge.STRUCTURED_APPEND=new ge(en.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),ge.BYTE=new ge(en.BYTE,"BYTE",Int32Array.from([8,16,16]),4),ge.ECI=new ge(en.ECI,"ECI",Int32Array.from([0,0,0]),7),ge.KANJI=new ge(en.KANJI,"KANJI",Int32Array.from([8,10,12]),8),ge.FNC1_FIRST_POSITION=new ge(en.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),ge.FNC1_SECOND_POSITION=new ge(en.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),ge.HANZI=new ge(en.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class ot{static decode(e,t,n,i){const o=new ws(e);let l=new Re;const c=new Array;let f=-1,g=-1;try{let p=null,C=!1,E;do{if(o.available()<4)E=ge.TERMINATOR;else{const S=o.readBits(4);E=ge.forBits(S)}switch(E){case ge.TERMINATOR:break;case ge.FNC1_FIRST_POSITION:case ge.FNC1_SECOND_POSITION:C=!0;break;case ge.STRUCTURED_APPEND:if(o.available()<16)throw new k;f=o.readBits(8),g=o.readBits(8);break;case ge.ECI:const S=ot.parseECIValue(o);if(p=V.getCharacterSetECIByValue(S),p===null)throw new k;break;case ge.HANZI:const O=o.readBits(4),M=o.readBits(E.getCharacterCountBits(t));O===ot.GB2312_SUBSET&&ot.decodeHanziSegment(o,l,M);break;default:const R=o.readBits(E.getCharacterCountBits(t));switch(E){case ge.NUMERIC:ot.decodeNumericSegment(o,l,R);break;case ge.ALPHANUMERIC:ot.decodeAlphanumericSegment(o,l,R,C);break;case ge.BYTE:ot.decodeByteSegment(o,l,R,p,c,i);break;case ge.KANJI:ot.decodeKanjiSegment(o,l,R);break;default:throw new k}break}}while(E!==ge.TERMINATOR)}catch{throw new k}return new Vn(e,l.toString(),c.length===0?null:c,n===null?null:n.toString(),f,g)}static decodeHanziSegment(e,t,n){if(n*13>e.available())throw new k;const i=new Uint8Array(2*n);let o=0;for(;n>0;){const l=e.readBits(13);let c=l/96<<8&4294967295|l%96;c<959?c+=41377:c+=42657,i[o]=c>>8&255,i[o+1]=c&255,o+=2,n--}try{t.append(it.decode(i,he.GB2312))}catch(l){throw new k(l)}}static decodeKanjiSegment(e,t,n){if(n*13>e.available())throw new k;const i=new Uint8Array(2*n);let o=0;for(;n>0;){const l=e.readBits(13);let c=l/192<<8&4294967295|l%192;c<7936?c+=33088:c+=49472,i[o]=c>>8,i[o+1]=c,o+=2,n--}try{t.append(it.decode(i,he.SHIFT_JIS))}catch(l){throw new k(l)}}static decodeByteSegment(e,t,n,i,o,l){if(8*n>e.available())throw new k;const c=new Uint8Array(n);for(let g=0;g<n;g++)c[g]=e.readBits(8);let f;i===null?f=he.guessEncoding(c,l):f=i.getName();try{t.append(it.decode(c,f))}catch(g){throw new k(g)}o.push(c)}static toAlphaNumericChar(e){if(e>=ot.ALPHANUMERIC_CHARS.length)throw new k;return ot.ALPHANUMERIC_CHARS[e]}static decodeAlphanumericSegment(e,t,n,i){const o=t.length();for(;n>1;){if(e.available()<11)throw new k;const l=e.readBits(11);t.append(ot.toAlphaNumericChar(Math.floor(l/45))),t.append(ot.toAlphaNumericChar(l%45)),n-=2}if(n===1){if(e.available()<6)throw new k;t.append(ot.toAlphaNumericChar(e.readBits(6)))}if(i)for(let l=o;l<t.length();l++)t.charAt(l)==="%"&&(l<t.length()-1&&t.charAt(l+1)==="%"?t.deleteCharAt(l+1):t.setCharAt(l,""))}static decodeNumericSegment(e,t,n){for(;n>=3;){if(e.available()<10)throw new k;const i=e.readBits(10);if(i>=1e3)throw new k;t.append(ot.toAlphaNumericChar(Math.floor(i/100))),t.append(ot.toAlphaNumericChar(Math.floor(i/10)%10)),t.append(ot.toAlphaNumericChar(i%10)),n-=3}if(n===2){if(e.available()<7)throw new k;const i=e.readBits(7);if(i>=100)throw new k;t.append(ot.toAlphaNumericChar(Math.floor(i/10))),t.append(ot.toAlphaNumericChar(i%10))}else if(n===1){if(e.available()<4)throw new k;const i=e.readBits(4);if(i>=10)throw new k;t.append(ot.toAlphaNumericChar(i))}}static parseECIValue(e){const t=e.readBits(8);if(!(t&128))return t&127;if((t&192)===128){const n=e.readBits(8);return(t&63)<<8&4294967295|n}if((t&224)===192){const n=e.readBits(16);return(t&31)<<16&4294967295|n}throw new k}}ot.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",ot.GB2312_SUBSET=1;class vo{constructor(e){this.mirrored=e}isMirrored(){return this.mirrored}applyMirroredCorrection(e){if(!this.mirrored||e===null||e.length<3)return;const t=e[0];e[0]=e[2],e[2]=t}}class Pc{constructor(){this.rsDecoder=new Y(N.QR_CODE_FIELD_256)}decodeBooleanArray(e,t){return this.decodeBitMatrix(Xe.parseFromBooleanArray(e),t)}decodeBitMatrix(e,t){const n=new Bc(e);let i=null;try{return this.decodeBitMatrixParser(n,t)}catch(o){i=o}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();const o=this.decodeBitMatrixParser(n,t);return o.setOther(new vo(!0)),o}catch(o){throw i!==null?i:o}}decodeBitMatrixParser(e,t){const n=e.readVersion(),i=e.readFormatInformation().getErrorCorrectionLevel(),o=e.readCodewords(),l=As.getDataBlocks(o,n,i);let c=0;for(const p of l)c+=p.getNumDataCodewords();const f=new Uint8Array(c);let g=0;for(const p of l){const C=p.getCodewords(),E=p.getNumDataCodewords();this.correctErrors(C,E);for(let S=0;S<E;S++)f[g++]=C[S]}return ot.decode(f,n,i,t)}correctErrors(e,t){const n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch{throw new H}for(let i=0;i<t;i++)e[i]=n[i]}}class Cs extends v{constructor(e,t,n){super(e,t),this.estimatedModuleSize=n}aboutEquals(e,t,n){if(Math.abs(t-this.getY())<=e&&Math.abs(n-this.getX())<=e){const i=Math.abs(e-this.estimatedModuleSize);return i<=1||i<=this.estimatedModuleSize}return!1}combineEstimate(e,t,n){const i=(this.getX()+t)/2,o=(this.getY()+e)/2,l=(this.estimatedModuleSize+n)/2;return new Cs(i,o,l)}}class Si{constructor(e,t,n,i,o,l,c){this.image=e,this.startX=t,this.startY=n,this.width=i,this.height=o,this.moduleSize=l,this.resultPointCallback=c,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const e=this.startX,t=this.height,n=this.width,i=e+n,o=this.startY+t/2,l=new Int32Array(3),c=this.image;for(let f=0;f<t;f++){const g=o+(f&1?-Math.floor((f+1)/2):Math.floor((f+1)/2));l[0]=0,l[1]=0,l[2]=0;let p=e;for(;p<i&&!c.get(p,g);)p++;let C=0;for(;p<i;){if(c.get(p,g))if(C===1)l[1]++;else if(C===2){if(this.foundPatternCross(l)){const E=this.handlePossibleCenter(l,g,p);if(E!==null)return E}l[0]=l[2],l[1]=1,l[2]=0,C=1}else l[++C]++;else C===1&&C++,l[C]++;p++}if(this.foundPatternCross(l)){const E=this.handlePossibleCenter(l,g,i);if(E!==null)return E}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new L}static centerFromEnd(e,t){return t-e[2]-e[1]/2}foundPatternCross(e){const t=this.moduleSize,n=t/2;for(let i=0;i<3;i++)if(Math.abs(t-e[i])>=n)return!1;return!0}crossCheckVertical(e,t,n,i){const o=this.image,l=o.getHeight(),c=this.crossCheckStateCount;c[0]=0,c[1]=0,c[2]=0;let f=e;for(;f>=0&&o.get(t,f)&&c[1]<=n;)c[1]++,f--;if(f<0||c[1]>n)return NaN;for(;f>=0&&!o.get(t,f)&&c[0]<=n;)c[0]++,f--;if(c[0]>n)return NaN;for(f=e+1;f<l&&o.get(t,f)&&c[1]<=n;)c[1]++,f++;if(f===l||c[1]>n)return NaN;for(;f<l&&!o.get(t,f)&&c[2]<=n;)c[2]++,f++;if(c[2]>n)return NaN;const g=c[0]+c[1]+c[2];return 5*Math.abs(g-i)>=2*i?NaN:this.foundPatternCross(c)?Si.centerFromEnd(c,f):NaN}handlePossibleCenter(e,t,n){const i=e[0]+e[1]+e[2],o=Si.centerFromEnd(e,n),l=this.crossCheckVertical(t,o,2*e[1],i);if(!isNaN(l)){const c=(e[0]+e[1]+e[2])/3;for(const g of this.possibleCenters)if(g.aboutEquals(c,l,o))return g.combineEstimate(l,o,c);const f=new Cs(o,l,c);this.possibleCenters.push(f),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(f)}return null}}class ms extends v{constructor(e,t,n,i){super(e,t),this.estimatedModuleSize=n,this.count=i,i===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(e,t,n){if(Math.abs(t-this.getY())<=e&&Math.abs(n-this.getX())<=e){const i=Math.abs(e-this.estimatedModuleSize);return i<=1||i<=this.estimatedModuleSize}return!1}combineEstimate(e,t,n){const i=this.count+1,o=(this.count*this.getX()+t)/i,l=(this.count*this.getY()+e)/i,c=(this.count*this.estimatedModuleSize+n)/i;return new ms(o,l,c,i)}}class Fc{constructor(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class mt{constructor(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(e){const t=e!=null&&e.get(Te.TRY_HARDER)!==void 0,n=e!=null&&e.get(Te.PURE_BARCODE)!==void 0,i=this.image,o=i.getHeight(),l=i.getWidth();let c=Math.floor(3*o/(4*mt.MAX_MODULES));(c<mt.MIN_SKIP||t)&&(c=mt.MIN_SKIP);let f=!1;const g=new Int32Array(5);for(let C=c-1;C<o&&!f;C+=c){g[0]=0,g[1]=0,g[2]=0,g[3]=0,g[4]=0;let E=0;for(let S=0;S<l;S++)if(i.get(S,C))(E&1)===1&&E++,g[E]++;else if(E&1)g[E]++;else if(E===4)if(mt.foundPatternCross(g)){if(this.handlePossibleCenter(g,C,S,n)===!0)if(c=2,this.hasSkipped===!0)f=this.haveMultiplyConfirmedCenters();else{const M=this.findRowSkip();M>g[2]&&(C+=M-g[2]-c,S=l-1)}else{g[0]=g[2],g[1]=g[3],g[2]=g[4],g[3]=1,g[4]=0,E=3;continue}E=0,g[0]=0,g[1]=0,g[2]=0,g[3]=0,g[4]=0}else g[0]=g[2],g[1]=g[3],g[2]=g[4],g[3]=1,g[4]=0,E=3;else g[++E]++;mt.foundPatternCross(g)&&this.handlePossibleCenter(g,C,l,n)===!0&&(c=g[0],this.hasSkipped&&(f=this.haveMultiplyConfirmedCenters()))}const p=this.selectBestPatterns();return v.orderBestPatterns(p),new Fc(p)}static centerFromEnd(e,t){return t-e[4]-e[3]-e[2]/2}static foundPatternCross(e){let t=0;for(let o=0;o<5;o++){const l=e[o];if(l===0)return!1;t+=l}if(t<7)return!1;const n=t/7,i=n/2;return Math.abs(n-e[0])<i&&Math.abs(n-e[1])<i&&Math.abs(3*n-e[2])<3*i&&Math.abs(n-e[3])<i&&Math.abs(n-e[4])<i}getCrossCheckStateCount(){const e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e}crossCheckDiagonal(e,t,n,i){const o=this.getCrossCheckStateCount();let l=0;const c=this.image;for(;e>=l&&t>=l&&c.get(t-l,e-l);)o[2]++,l++;if(e<l||t<l)return!1;for(;e>=l&&t>=l&&!c.get(t-l,e-l)&&o[1]<=n;)o[1]++,l++;if(e<l||t<l||o[1]>n)return!1;for(;e>=l&&t>=l&&c.get(t-l,e-l)&&o[0]<=n;)o[0]++,l++;if(o[0]>n)return!1;const f=c.getHeight(),g=c.getWidth();for(l=1;e+l<f&&t+l<g&&c.get(t+l,e+l);)o[2]++,l++;if(e+l>=f||t+l>=g)return!1;for(;e+l<f&&t+l<g&&!c.get(t+l,e+l)&&o[3]<n;)o[3]++,l++;if(e+l>=f||t+l>=g||o[3]>=n)return!1;for(;e+l<f&&t+l<g&&c.get(t+l,e+l)&&o[4]<n;)o[4]++,l++;if(o[4]>=n)return!1;const p=o[0]+o[1]+o[2]+o[3]+o[4];return Math.abs(p-i)<2*i&&mt.foundPatternCross(o)}crossCheckVertical(e,t,n,i){const o=this.image,l=o.getHeight(),c=this.getCrossCheckStateCount();let f=e;for(;f>=0&&o.get(t,f);)c[2]++,f--;if(f<0)return NaN;for(;f>=0&&!o.get(t,f)&&c[1]<=n;)c[1]++,f--;if(f<0||c[1]>n)return NaN;for(;f>=0&&o.get(t,f)&&c[0]<=n;)c[0]++,f--;if(c[0]>n)return NaN;for(f=e+1;f<l&&o.get(t,f);)c[2]++,f++;if(f===l)return NaN;for(;f<l&&!o.get(t,f)&&c[3]<n;)c[3]++,f++;if(f===l||c[3]>=n)return NaN;for(;f<l&&o.get(t,f)&&c[4]<n;)c[4]++,f++;if(c[4]>=n)return NaN;const g=c[0]+c[1]+c[2]+c[3]+c[4];return 5*Math.abs(g-i)>=2*i?NaN:mt.foundPatternCross(c)?mt.centerFromEnd(c,f):NaN}crossCheckHorizontal(e,t,n,i){const o=this.image,l=o.getWidth(),c=this.getCrossCheckStateCount();let f=e;for(;f>=0&&o.get(f,t);)c[2]++,f--;if(f<0)return NaN;for(;f>=0&&!o.get(f,t)&&c[1]<=n;)c[1]++,f--;if(f<0||c[1]>n)return NaN;for(;f>=0&&o.get(f,t)&&c[0]<=n;)c[0]++,f--;if(c[0]>n)return NaN;for(f=e+1;f<l&&o.get(f,t);)c[2]++,f++;if(f===l)return NaN;for(;f<l&&!o.get(f,t)&&c[3]<n;)c[3]++,f++;if(f===l||c[3]>=n)return NaN;for(;f<l&&o.get(f,t)&&c[4]<n;)c[4]++,f++;if(c[4]>=n)return NaN;const g=c[0]+c[1]+c[2]+c[3]+c[4];return 5*Math.abs(g-i)>=i?NaN:mt.foundPatternCross(c)?mt.centerFromEnd(c,f):NaN}handlePossibleCenter(e,t,n,i){const o=e[0]+e[1]+e[2]+e[3]+e[4];let l=mt.centerFromEnd(e,n),c=this.crossCheckVertical(t,Math.floor(l),e[2],o);if(!isNaN(c)&&(l=this.crossCheckHorizontal(Math.floor(l),Math.floor(c),e[2],o),!isNaN(l)&&(!i||this.crossCheckDiagonal(Math.floor(c),Math.floor(l),e[2],o)))){const f=o/7;let g=!1;const p=this.possibleCenters;for(let C=0,E=p.length;C<E;C++){const S=p[C];if(S.aboutEquals(f,c,l)){p[C]=S.combineEstimate(c,l,f),g=!0;break}}if(!g){const C=new ms(l,c,f);p.push(C),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(C)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let t=null;for(const n of this.possibleCenters)if(n.getCount()>=mt.CENTER_QUORUM)if(t==null)t=n;else return this.hasSkipped=!0,Math.floor((Math.abs(t.getX()-n.getX())-Math.abs(t.getY()-n.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let e=0,t=0;const n=this.possibleCenters.length;for(const l of this.possibleCenters)l.getCount()>=mt.CENTER_QUORUM&&(e++,t+=l.getEstimatedModuleSize());if(e<3)return!1;const i=t/n;let o=0;for(const l of this.possibleCenters)o+=Math.abs(l.getEstimatedModuleSize()-i);return o<=.05*t}selectBestPatterns(){const e=this.possibleCenters.length;if(e<3)throw new L;const t=this.possibleCenters;let n;if(e>3){let i=0,o=0;for(const f of this.possibleCenters){const g=f.getEstimatedModuleSize();i+=g,o+=g*g}n=i/e;let l=Math.sqrt(o/e-n*n);t.sort((f,g)=>{const p=Math.abs(g.getEstimatedModuleSize()-n),C=Math.abs(f.getEstimatedModuleSize()-n);return p<C?-1:p>C?1:0});const c=Math.max(.2*n,l);for(let f=0;f<t.length&&t.length>3;f++){const g=t[f];Math.abs(g.getEstimatedModuleSize()-n)>c&&(t.splice(f,1),f--)}}if(t.length>3){let i=0;for(const o of t)i+=o.getEstimatedModuleSize();n=i/t.length,t.sort((o,l)=>{if(l.getCount()===o.getCount()){const c=Math.abs(l.getEstimatedModuleSize()-n),f=Math.abs(o.getEstimatedModuleSize()-n);return c<f?1:c>f?-1:0}else return l.getCount()-o.getCount()}),t.splice(3)}return[t[0],t[1],t[2]]}}mt.CENTER_QUORUM=2,mt.MIN_SKIP=3,mt.MAX_MODULES=57;class Wr{constructor(e){this.image=e}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(e){this.resultPointCallback=e==null?null:e.get(Te.NEED_RESULT_POINT_CALLBACK);const n=new mt(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(n)}processFinderPatternInfo(e){const t=e.getTopLeft(),n=e.getTopRight(),i=e.getBottomLeft(),o=this.calculateModuleSize(t,n,i);if(o<1)throw new L("No pattern found in proccess finder.");const l=Wr.computeDimension(t,n,i,o),c=fe.getProvisionalVersionForDimension(l),f=c.getDimensionForVersion()-7;let g=null;if(c.getAlignmentPatternCenters().length>0){const S=n.getX()-t.getX()+i.getX(),O=n.getY()-t.getY()+i.getY(),M=1-3/f,R=Math.floor(t.getX()+M*(S-t.getX())),P=Math.floor(t.getY()+M*(O-t.getY()));for(let Q=4;Q<=16;Q<<=1)try{g=this.findAlignmentInRegion(o,R,P,Q);break}catch(q){if(!(q instanceof L))throw q}}const p=Wr.createTransform(t,n,i,g,l),C=Wr.sampleGrid(this.image,p,l);let E;return g===null?E=[i,t,n]:E=[i,t,n,g],new de(C,E)}static createTransform(e,t,n,i,o){const l=o-3.5;let c,f,g,p;return i!==null?(c=i.getX(),f=i.getY(),g=l-3,p=g):(c=t.getX()-e.getX()+n.getX(),f=t.getY()-e.getY()+n.getY(),g=l,p=l),Ce.quadrilateralToQuadrilateral(3.5,3.5,l,3.5,g,p,3.5,l,e.getX(),e.getY(),t.getX(),t.getY(),c,f,n.getX(),n.getY())}static sampleGrid(e,t,n){return Oe.getInstance().sampleGridWithTransform(e,n,n,t)}static computeDimension(e,t,n,i){const o=G.round(v.distance(e,t)/i),l=G.round(v.distance(e,n)/i);let c=Math.floor((o+l)/2)+7;switch(c&3){case 0:c++;break;case 2:c--;break;case 3:throw new L("Dimensions could be not found.")}return c}calculateModuleSize(e,t,n){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,n))/2}calculateModuleSizeOneWay(e,t){const n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?i/7:isNaN(i)?n/7:(n+i)/14}sizeOfBlackWhiteBlackRunBothWays(e,t,n,i){let o=this.sizeOfBlackWhiteBlackRun(e,t,n,i),l=1,c=e-(n-e);c<0?(l=e/(e-c),c=0):c>=this.image.getWidth()&&(l=(this.image.getWidth()-1-e)/(c-e),c=this.image.getWidth()-1);let f=Math.floor(t-(i-t)*l);return l=1,f<0?(l=t/(t-f),f=0):f>=this.image.getHeight()&&(l=(this.image.getHeight()-1-t)/(f-t),f=this.image.getHeight()-1),c=Math.floor(e+(c-e)*l),o+=this.sizeOfBlackWhiteBlackRun(e,t,c,f),o-1}sizeOfBlackWhiteBlackRun(e,t,n,i){const o=Math.abs(i-t)>Math.abs(n-e);if(o){let S=e;e=t,t=S,S=n,n=i,i=S}const l=Math.abs(n-e),c=Math.abs(i-t);let f=-l/2;const g=e<n?1:-1,p=t<i?1:-1;let C=0;const E=n+g;for(let S=e,O=t;S!==E;S+=g){const M=o?O:S,R=o?S:O;if(C===1===this.image.get(M,R)){if(C===2)return G.distance(S,O,e,t);C++}if(f+=c,f>0){if(O===i)break;O+=p,f-=l}}return C===2?G.distance(n+g,i,e,t):NaN}findAlignmentInRegion(e,t,n,i){const o=Math.floor(i*e),l=Math.max(0,t-o),c=Math.min(this.image.getWidth()-1,t+o);if(c-l<e*3)throw new L("Alignment top exceeds estimated module size.");const f=Math.max(0,n-o),g=Math.min(this.image.getHeight()-1,n+o);if(g-f<e*3)throw new L("Alignment bottom exceeds estimated module size.");return new Si(this.image,l,f,c-l,g-f,e,this.resultPointCallback).find()}}class Yn{constructor(){this.decoder=new Pc}getDecoder(){return this.decoder}decode(e,t){let n,i;if(t!=null&&t.get(Te.PURE_BARCODE)!==void 0){const f=Yn.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(f,t),i=Yn.NO_POINTS}else{const f=new Wr(e.getBlackMatrix()).detect(t);n=this.decoder.decodeBitMatrix(f.getBits(),t),i=f.getPoints()}n.getOther()instanceof vo&&n.getOther().applyMirroredCorrection(i);const o=new Et(n.getText(),n.getRawBytes(),void 0,i,ue.QR_CODE,void 0),l=n.getByteSegments();l!==null&&o.putMetadata(ct.BYTE_SEGMENTS,l);const c=n.getECLevel();return c!==null&&o.putMetadata(ct.ERROR_CORRECTION_LEVEL,c),n.hasStructuredAppend()&&(o.putMetadata(ct.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),o.putMetadata(ct.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),o}reset(){}static extractPureBits(e){const t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(t===null||n===null)throw new L;const i=this.moduleSize(t,e);let o=t[1],l=n[1],c=t[0],f=n[0];if(c>=f||o>=l)throw new L;if(l-o!==f-c&&(f=c+(l-o),f>=e.getWidth()))throw new L;const g=Math.round((f-c+1)/i),p=Math.round((l-o+1)/i);if(g<=0||p<=0)throw new L;if(p!==g)throw new L;const C=Math.floor(i/2);o+=C,c+=C;const E=c+Math.floor((g-1)*i)-f;if(E>0){if(E>C)throw new L;c-=E}const S=o+Math.floor((p-1)*i)-l;if(S>0){if(S>C)throw new L;o-=S}const O=new Xe(g,p);for(let M=0;M<p;M++){const R=o+Math.floor(M*i);for(let P=0;P<g;P++)e.get(c+Math.floor(P*i),R)&&O.set(P,M)}return O}static moduleSize(e,t){const n=t.getHeight(),i=t.getWidth();let o=e[0],l=e[1],c=!0,f=0;for(;o<i&&l<n;){if(c!==t.get(o,l)){if(++f===5)break;c=!c}o++,l++}if(o===i||l===n)throw new L;return(o-e[0])/7}}Yn.NO_POINTS=new Array;class Ae{PDF417Common(){}static getBitCountSum(e){return G.sum(e)}static toIntArray(e){if(e==null||!e.length)return Ae.EMPTY_INT_ARRAY;const t=new Int32Array(e.length);let n=0;for(const i of e)t[n++]=i;return t}static getCodeword(e){const t=ce.binarySearch(Ae.SYMBOL_TABLE,e&262143);return t<0?-1:(Ae.CODEWORD_TABLE[t]-1)%Ae.NUMBER_OF_CODEWORDS}}Ae.NUMBER_OF_CODEWORDS=929,Ae.MAX_CODEWORDS_IN_BARCODE=Ae.NUMBER_OF_CODEWORDS-1,Ae.MIN_ROWS_IN_BARCODE=3,Ae.MAX_ROWS_IN_BARCODE=90,Ae.MODULES_IN_CODEWORD=17,Ae.MODULES_IN_STOP_PATTERN=18,Ae.BARS_IN_MODULE=8,Ae.EMPTY_INT_ARRAY=new Int32Array([]),Ae.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Ae.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class kc{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class Se{static detectMultiple(e,t,n){let i=e.getBlackMatrix(),o=Se.detect(n,i);return o.length||(i=i.clone(),i.rotate180(),o=Se.detect(n,i)),new kc(i,o)}static detect(e,t){const n=new Array;let i=0,o=0,l=!1;for(;i<t.getHeight();){const c=Se.findVertices(t,i,o);if(c[0]==null&&c[3]==null){if(!l)break;l=!1,o=0;for(const f of n)f[1]!=null&&(i=Math.trunc(Math.max(i,f[1].getY()))),f[3]!=null&&(i=Math.max(i,Math.trunc(f[3].getY())));i+=Se.ROW_STEP;continue}if(l=!0,n.push(c),!e)break;c[2]!=null?(o=Math.trunc(c[2].getX()),i=Math.trunc(c[2].getY())):(o=Math.trunc(c[4].getX()),i=Math.trunc(c[4].getY()))}return n}static findVertices(e,t,n){const i=e.getHeight(),o=e.getWidth(),l=new Array(8);return Se.copyToResult(l,Se.findRowsWithPattern(e,i,o,t,n,Se.START_PATTERN),Se.INDEXES_START_PATTERN),l[4]!=null&&(n=Math.trunc(l[4].getX()),t=Math.trunc(l[4].getY())),Se.copyToResult(l,Se.findRowsWithPattern(e,i,o,t,n,Se.STOP_PATTERN),Se.INDEXES_STOP_PATTERN),l}static copyToResult(e,t,n){for(let i=0;i<n.length;i++)e[n[i]]=t[i]}static findRowsWithPattern(e,t,n,i,o,l){const c=new Array(4);let f=!1;const g=new Int32Array(l.length);for(;i<t;i+=Se.ROW_STEP){let C=Se.findGuardPattern(e,o,i,n,!1,l,g);if(C!=null){for(;i>0;){const E=Se.findGuardPattern(e,o,--i,n,!1,l,g);if(E!=null)C=E;else{i++;break}}c[0]=new v(C[0],i),c[1]=new v(C[1],i),f=!0;break}}let p=i+1;if(f){let C=0,E=Int32Array.from([Math.trunc(c[0].getX()),Math.trunc(c[1].getX())]);for(;p<t;p++){const S=Se.findGuardPattern(e,E[0],p,n,!1,l,g);if(S!=null&&Math.abs(E[0]-S[0])<Se.MAX_PATTERN_DRIFT&&Math.abs(E[1]-S[1])<Se.MAX_PATTERN_DRIFT)E=S,C=0;else{if(C>Se.SKIPPED_ROW_COUNT_MAX)break;C++}}p-=C+1,c[2]=new v(E[0],p),c[3]=new v(E[1],p)}return p-i<Se.BARCODE_MIN_HEIGHT&&ce.fill(c,null),c}static findGuardPattern(e,t,n,i,o,l,c){ce.fillWithin(c,0,c.length,0);let f=t,g=0;for(;e.get(f,n)&&f>0&&g++<Se.MAX_PIXEL_DRIFT;)f--;let p=f,C=0,E=l.length;for(let S=o;p<i;p++)if(e.get(p,n)!==S)c[C]++;else{if(C===E-1){if(Se.patternMatchVariance(c,l,Se.MAX_INDIVIDUAL_VARIANCE)<Se.MAX_AVG_VARIANCE)return new Int32Array([f,p]);f+=c[0]+c[1],J.arraycopy(c,2,c,0,C-1),c[C-1]=0,c[C]=0,C--}else C++;c[C]=1,S=!S}return C===E-1&&Se.patternMatchVariance(c,l,Se.MAX_INDIVIDUAL_VARIANCE)<Se.MAX_AVG_VARIANCE?new Int32Array([f,p-1]):null}static patternMatchVariance(e,t,n){let i=e.length,o=0,l=0;for(let g=0;g<i;g++)o+=e[g],l+=t[g];if(o<l)return 1/0;let c=o/l;n*=c;let f=0;for(let g=0;g<i;g++){let p=e[g],C=t[g]*c,E=p>C?p-C:C-p;if(E>n)return 1/0;f+=E}return f/o}}Se.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Se.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Se.MAX_AVG_VARIANCE=.42,Se.MAX_INDIVIDUAL_VARIANCE=.8,Se.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Se.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Se.MAX_PIXEL_DRIFT=3,Se.MAX_PATTERN_DRIFT=5,Se.SKIPPED_ROW_COUNT_MAX=25,Se.ROW_STEP=5,Se.BARCODE_MIN_HEIGHT=10;class yt{constructor(e,t){if(t.length===0)throw new T;this.field=e;let n=t.length;if(n>1&&t[0]===0){let i=1;for(;i<n&&t[i]===0;)i++;i===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-i),J.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);if(e===1){let i=0;for(let o of this.coefficients)i=this.field.add(i,o);return i}let t=this.coefficients[0],n=this.coefficients.length;for(let i=1;i<n;i++)t=this.field.add(this.field.multiply(e,t),this.coefficients[i]);return t}add(e){if(!this.field.equals(e.field))throw new T("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,n=e.coefficients;if(t.length>n.length){let l=t;t=n,n=l}let i=new Int32Array(n.length),o=n.length-t.length;J.arraycopy(n,0,i,0,o);for(let l=o;l<n.length;l++)i[l]=this.field.add(t[l-o],n[l]);return new yt(this.field,i)}subtract(e){if(!this.field.equals(e.field))throw new T("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())}multiply(e){return e instanceof yt?this.multiplyOther(e):this.multiplyScalar(e)}multiplyOther(e){if(!this.field.equals(e.field))throw new T("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new yt(this.field,new Int32Array([0]));let t=this.coefficients,n=t.length,i=e.coefficients,o=i.length,l=new Int32Array(n+o-1);for(let c=0;c<n;c++){let f=t[c];for(let g=0;g<o;g++)l[c+g]=this.field.add(l[c+g],this.field.multiply(f,i[g]))}return new yt(this.field,l)}negative(){let e=this.coefficients.length,t=new Int32Array(e);for(let n=0;n<e;n++)t[n]=this.field.subtract(0,this.coefficients[n]);return new yt(this.field,t)}multiplyScalar(e){if(e===0)return new yt(this.field,new Int32Array([0]));if(e===1)return this;let t=this.coefficients.length,n=new Int32Array(t);for(let i=0;i<t;i++)n[i]=this.field.multiply(this.coefficients[i],e);return new yt(this.field,n)}multiplyByMonomial(e,t){if(e<0)throw new T;if(t===0)return new yt(this.field,new Int32Array([0]));let n=this.coefficients.length,i=new Int32Array(n+e);for(let o=0;o<n;o++)i[o]=this.field.multiply(this.coefficients[o],t);return new yt(this.field,i)}toString(){let e=new Re;for(let t=this.getDegree();t>=0;t--){let n=this.getCoefficient(t);n!==0&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),(t===0||n!==1)&&e.append(n),t!==0&&(t===1?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()}}class Uc{add(e,t){return(e+t)%this.modulus}subtract(e,t){return(this.modulus+e-t)%this.modulus}exp(e){return this.expTable[e]}log(e){if(e===0)throw new T;return this.logTable[e]}inverse(e){if(e===0)throw new _;return this.expTable[this.modulus-this.logTable[e]-1]}multiply(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]}getSize(){return this.modulus}equals(e){return e===this}}class Es extends Uc{constructor(e,t){super(),this.modulus=e,this.expTable=new Int32Array(e),this.logTable=new Int32Array(e);let n=1;for(let i=0;i<e;i++)this.expTable[i]=n,n=n*t%e;for(let i=0;i<e-1;i++)this.logTable[this.expTable[i]]=i;this.zero=new yt(this,new Int32Array([0])),this.one=new yt(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new T;if(t===0)return this.zero;let n=new Int32Array(e+1);return n[0]=t,new yt(this,n)}}Es.PDF417_GF=new Es(Ae.NUMBER_OF_CODEWORDS,3);class Lo{constructor(){this.field=Es.PDF417_GF}decode(e,t,n){let i=new yt(this.field,e),o=new Int32Array(t),l=!1;for(let O=t;O>0;O--){let M=i.evaluateAt(this.field.exp(O));o[t-O]=M,M!==0&&(l=!0)}if(!l)return 0;let c=this.field.getOne();if(n!=null)for(const O of n){let M=this.field.exp(e.length-1-O),R=new yt(this.field,new Int32Array([this.field.subtract(0,M),1]));c=c.multiply(R)}let f=new yt(this.field,o),g=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),f,t),p=g[0],C=g[1],E=this.findErrorLocations(p),S=this.findErrorMagnitudes(C,p,E);for(let O=0;O<E.length;O++){let M=e.length-1-this.field.log(E[O]);if(M<0)throw H.getChecksumInstance();e[M]=this.field.subtract(e[M],S[O])}return E.length}runEuclideanAlgorithm(e,t,n){if(e.getDegree()<t.getDegree()){let E=e;e=t,t=E}let i=e,o=t,l=this.field.getZero(),c=this.field.getOne();for(;o.getDegree()>=Math.round(n/2);){let E=i,S=l;if(i=o,l=c,i.isZero())throw H.getChecksumInstance();o=E;let O=this.field.getZero(),M=i.getCoefficient(i.getDegree()),R=this.field.inverse(M);for(;o.getDegree()>=i.getDegree()&&!o.isZero();){let P=o.getDegree()-i.getDegree(),Q=this.field.multiply(o.getCoefficient(o.getDegree()),R);O=O.add(this.field.buildMonomial(P,Q)),o=o.subtract(i.multiplyByMonomial(P,Q))}c=O.multiply(l).subtract(S).negative()}let f=c.getCoefficient(0);if(f===0)throw H.getChecksumInstance();let g=this.field.inverse(f),p=c.multiply(g),C=o.multiply(g);return[p,C]}findErrorLocations(e){let t=e.getDegree(),n=new Int32Array(t),i=0;for(let o=1;o<this.field.getSize()&&i<t;o++)e.evaluateAt(o)===0&&(n[i]=this.field.inverse(o),i++);if(i!==t)throw H.getChecksumInstance();return n}findErrorMagnitudes(e,t,n){let i=t.getDegree(),o=new Int32Array(i);for(let g=1;g<=i;g++)o[i-g]=this.field.multiply(g,t.getCoefficient(g));let l=new yt(this.field,o),c=n.length,f=new Int32Array(c);for(let g=0;g<c;g++){let p=this.field.inverse(n[g]),C=this.field.subtract(0,e.evaluateAt(p)),E=this.field.inverse(l.evaluateAt(p));f[g]=this.field.multiply(C,E)}return f}}class lr{constructor(e,t,n,i,o){e instanceof lr?this.constructor_2(e):this.constructor_1(e,t,n,i,o)}constructor_1(e,t,n,i,o){const l=t==null||n==null,c=i==null||o==null;if(l&&c)throw new L;l?(t=new v(0,i.getY()),n=new v(0,o.getY())):c&&(i=new v(e.getWidth()-1,t.getY()),o=new v(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=t,this.bottomLeft=n,this.topRight=i,this.bottomRight=o,this.minX=Math.trunc(Math.min(t.getX(),n.getX())),this.maxX=Math.trunc(Math.max(i.getX(),o.getX())),this.minY=Math.trunc(Math.min(t.getY(),i.getY())),this.maxY=Math.trunc(Math.max(n.getY(),o.getY()))}constructor_2(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()}static merge(e,t){return e==null?t:t==null?e:new lr(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)}addMissingRows(e,t,n){let i=this.topLeft,o=this.bottomLeft,l=this.topRight,c=this.bottomRight;if(e>0){let f=n?this.topLeft:this.topRight,g=Math.trunc(f.getY()-e);g<0&&(g=0);let p=new v(f.getX(),g);n?i=p:l=p}if(t>0){let f=n?this.bottomLeft:this.bottomRight,g=Math.trunc(f.getY()+t);g>=this.image.getHeight()&&(g=this.image.getHeight()-1);let p=new v(f.getX(),g);n?o=p:c=p}return new lr(this.image,i,o,l,c)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Hc{constructor(e,t,n,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=t,this.rowCountLowerPart=n,this.rowCount=t+n}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class zr{constructor(){this.buffer=""}static form(e,t){let n=-1;function i(l,c,f,g,p,C){if(l==="%%")return"%";if(t[++n]===void 0)return;l=g?parseInt(g.substr(1)):void 0;let E=p?parseInt(p.substr(1)):void 0,S;switch(C){case"s":S=t[n];break;case"c":S=t[n][0];break;case"f":S=parseFloat(t[n]).toFixed(l);break;case"p":S=parseFloat(t[n]).toPrecision(l);break;case"e":S=parseFloat(t[n]).toExponential(l);break;case"x":S=parseInt(t[n]).toString(E||16);break;case"d":S=parseFloat(parseInt(t[n],E||10).toPrecision(l)).toFixed(0);break}S=typeof S=="object"?JSON.stringify(S):(+S).toString(E);let O=parseInt(f),M=f&&f[0]+""=="0"?"0":" ";for(;S.length<O;)S=c!==void 0?S+M:M+S;return S}let o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,i)}format(e,...t){this.buffer+=zr.form(e,t)}toString(){return this.buffer}}class Yr{constructor(e){this.boundingBox=new lr(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}getCodewordNearby(e){let t=this.getCodeword(e);if(t!=null)return t;for(let n=1;n<Yr.MAX_NEARBY_DISTANCE;n++){let i=this.imageRowToCodewordIndex(e)-n;if(i>=0&&(t=this.codewords[i],t!=null)||(i=this.imageRowToCodewordIndex(e)+n,i<this.codewords.length&&(t=this.codewords[i],t!=null)))return t}return null}imageRowToCodewordIndex(e){return e-this.boundingBox.getMinY()}setCodeword(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t}getCodeword(e){return this.codewords[this.imageRowToCodewordIndex(e)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const e=new zr;let t=0;for(const n of this.codewords){if(n==null){e.format("%3d:    |   %n",t++);continue}e.format("%3d: %3d|%3d%n",t++,n.getRowNumber(),n.getValue())}return e.toString()}}Yr.MAX_NEARBY_DISTANCE=5;class Xr{constructor(){this.values=new Map}setValue(e){e=Math.trunc(e);let t=this.values.get(e);t==null&&(t=0),t++,this.values.set(e,t)}getValue(){let e=-1,t=new Array;for(const[n,i]of this.values.entries()){const o={getKey:()=>n,getValue:()=>i};o.getValue()>e?(e=o.getValue(),t=[],t.push(o.getKey())):o.getValue()===e&&t.push(o.getKey())}return Ae.toIntArray(t)}getConfidence(e){return this.values.get(e)}}class Bo extends Yr{constructor(e,t){super(e),this._isLeft=t}setRowNumbers(){for(let e of this.getCodewords())e!=null&&e.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(e){let t=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(t,e);let n=this.getBoundingBox(),i=this._isLeft?n.getTopLeft():n.getTopRight(),o=this._isLeft?n.getBottomLeft():n.getBottomRight(),l=this.imageRowToCodewordIndex(Math.trunc(i.getY())),c=this.imageRowToCodewordIndex(Math.trunc(o.getY())),f=-1,g=1,p=0;for(let C=l;C<c;C++){if(t[C]==null)continue;let E=t[C],S=E.getRowNumber()-f;if(S===0)p++;else if(S===1)g=Math.max(g,p),p=1,f=E.getRowNumber();else if(S<0||E.getRowNumber()>=e.getRowCount()||S>C)t[C]=null;else{let O;g>2?O=(g-2)*S:O=S;let M=O>=C;for(let R=1;R<=O&&!M;R++)M=t[C-R]!=null;M?t[C]=null:(f=E.getRowNumber(),p=1)}}}getRowHeights(){let e=this.getBarcodeMetadata();if(e==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(e);let t=new Int32Array(e.getRowCount());for(let n of this.getCodewords())if(n!=null){let i=n.getRowNumber();if(i>=t.length)continue;t[i]++}return t}adjustIncompleteIndicatorColumnRowNumbers(e){let t=this.getBoundingBox(),n=this._isLeft?t.getTopLeft():t.getTopRight(),i=this._isLeft?t.getBottomLeft():t.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(n.getY())),l=this.imageRowToCodewordIndex(Math.trunc(i.getY())),c=this.getCodewords(),f=-1;for(let g=o;g<l;g++){if(c[g]==null)continue;let p=c[g];p.setRowNumberAsRowIndicatorColumn();let C=p.getRowNumber()-f;C===0||(C===1?f=p.getRowNumber():p.getRowNumber()>=e.getRowCount()?c[g]=null:f=p.getRowNumber())}}getBarcodeMetadata(){let e=this.getCodewords(),t=new Xr,n=new Xr,i=new Xr,o=new Xr;for(let c of e){if(c==null)continue;c.setRowNumberAsRowIndicatorColumn();let f=c.getValue()%30,g=c.getRowNumber();switch(this._isLeft||(g+=2),g%3){case 0:n.setValue(f*3+1);break;case 1:o.setValue(f/3),i.setValue(f%3);break;case 2:t.setValue(f+1);break}}if(t.getValue().length===0||n.getValue().length===0||i.getValue().length===0||o.getValue().length===0||t.getValue()[0]<1||n.getValue()[0]+i.getValue()[0]<Ae.MIN_ROWS_IN_BARCODE||n.getValue()[0]+i.getValue()[0]>Ae.MAX_ROWS_IN_BARCODE)return null;let l=new Hc(t.getValue()[0],n.getValue()[0],i.getValue()[0],o.getValue()[0]);return this.removeIncorrectCodewords(e,l),l}removeIncorrectCodewords(e,t){for(let n=0;n<e.length;n++){let i=e[n];if(e[n]==null)continue;let o=i.getValue()%30,l=i.getRowNumber();if(l>t.getRowCount()){e[n]=null;continue}switch(this._isLeft||(l+=2),l%3){case 0:o*3+1!==t.getRowCountUpperPart()&&(e[n]=null);break;case 1:(Math.trunc(o/3)!==t.getErrorCorrectionLevel()||o%3!==t.getRowCountLowerPart())&&(e[n]=null);break;case 2:o+1!==t.getColumnCount()&&(e[n]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Zr{constructor(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let e=Ae.MAX_CODEWORDS_IN_BARCODE,t;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let e=this.adjustRowNumbersByRow();if(e===0)return 0;for(let t=1;t<this.barcodeColumnCount+1;t++){let n=this.detectionResultColumns[t].getCodewords();for(let i=0;i<n.length;i++)n[i]!=null&&(n[i].hasValidRowNumber()||this.adjustRowNumbers(t,i,n))}return e}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let n=0;n<e.length;n++)if(e[n]!=null&&t[n]!=null&&e[n].getRowNumber()===t[n].getRowNumber())for(let i=1;i<=this.barcodeColumnCount;i++){let o=this.detectionResultColumns[i].getCodewords()[n];o!=null&&(o.setRowNumber(e[n].getRowNumber()),o.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[n]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let n=0;n<t.length;n++){if(t[n]==null)continue;let i=t[n].getRowNumber(),o=0;for(let l=this.barcodeColumnCount+1;l>0&&o<this.ADJUST_ROW_NUMBER_SKIP;l--){let c=this.detectionResultColumns[l].getCodewords()[n];c!=null&&(o=Zr.adjustRowNumberIfValid(i,o,c),c.hasValidRowNumber()||e++)}}return e}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let e=0,t=this.detectionResultColumns[0].getCodewords();for(let n=0;n<t.length;n++){if(t[n]==null)continue;let i=t[n].getRowNumber(),o=0;for(let l=1;l<this.barcodeColumnCount+1&&o<this.ADJUST_ROW_NUMBER_SKIP;l++){let c=this.detectionResultColumns[l].getCodewords()[n];c!=null&&(o=Zr.adjustRowNumberIfValid(i,o,c),c.hasValidRowNumber()||e++)}}return e}static adjustRowNumberIfValid(e,t,n){return n==null||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),t=0):++t),t}adjustRowNumbers(e,t,n){if(!this.detectionResultColumns[e-1])return;let i=n[t],o=this.detectionResultColumns[e-1].getCodewords(),l=o;this.detectionResultColumns[e+1]!=null&&(l=this.detectionResultColumns[e+1].getCodewords());let c=new Array(14);c[2]=o[t],c[3]=l[t],t>0&&(c[0]=n[t-1],c[4]=o[t-1],c[5]=l[t-1]),t>1&&(c[8]=n[t-2],c[10]=o[t-2],c[11]=l[t-2]),t<n.length-1&&(c[1]=n[t+1],c[6]=o[t+1],c[7]=l[t+1]),t<n.length-2&&(c[9]=n[t+2],c[12]=o[t+2],c[13]=l[t+2]);for(let f of c)if(Zr.adjustRowNumber(i,f))return}static adjustRowNumber(e,t){return t==null?!1:t.hasValidRowNumber()&&t.getBucket()===e.getBucket()?(e.setRowNumber(t.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(e){this.boundingBox=e}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(e,t){this.detectionResultColumns[e]=t}getDetectionResultColumn(e){return this.detectionResultColumns[e]}toString(){let e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);let t=new zr;for(let n=0;n<e.getCodewords().length;n++){t.format("CW %3d:",n);for(let i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){t.format("    |   ");continue}let o=this.detectionResultColumns[i].getCodewords()[n];if(o==null){t.format("    |   ");continue}t.format(" %3d|%3d",o.getRowNumber(),o.getValue())}t.format("%n")}return t.toString()}}class Kr{constructor(e,t,n,i){this.rowNumber=Kr.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(n),this.value=Math.trunc(i)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(e){return e!==Kr.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(e){this.rowNumber=e}toString(){return this.rowNumber+"|"+this.value}}Kr.BARCODE_ROW_UNKNOWN=-1;class Ht{static initialize(){for(let e=0;e<Ae.SYMBOL_TABLE.length;e++){let t=Ae.SYMBOL_TABLE[e],n=t&1;for(let i=0;i<Ae.BARS_IN_MODULE;i++){let o=0;for(;(t&1)===n;)o+=1,t>>=1;n=t&1,Ht.RATIOS_TABLE[e]||(Ht.RATIOS_TABLE[e]=new Array(Ae.BARS_IN_MODULE)),Ht.RATIOS_TABLE[e][Ae.BARS_IN_MODULE-i-1]=Math.fround(o/Ae.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(e){let t=Ht.getDecodedCodewordValue(Ht.sampleBitCounts(e));return t!==-1?t:Ht.getClosestDecodedValue(e)}static sampleBitCounts(e){let t=G.sum(e),n=new Int32Array(Ae.BARS_IN_MODULE),i=0,o=0;for(let l=0;l<Ae.MODULES_IN_CODEWORD;l++){let c=t/(2*Ae.MODULES_IN_CODEWORD)+l*t/Ae.MODULES_IN_CODEWORD;o+e[i]<=c&&(o+=e[i],i++),n[i]++}return n}static getDecodedCodewordValue(e){let t=Ht.getBitValue(e);return Ae.getCodeword(t)===-1?-1:t}static getBitValue(e){let t=0;for(let n=0;n<e.length;n++)for(let i=0;i<e[n];i++)t=t<<1|(n%2===0?1:0);return Math.trunc(t)}static getClosestDecodedValue(e){let t=G.sum(e),n=new Array(Ae.BARS_IN_MODULE);if(t>1)for(let l=0;l<n.length;l++)n[l]=Math.fround(e[l]/t);let i=$.MAX_VALUE,o=-1;this.bSymbolTableReady||Ht.initialize();for(let l=0;l<Ht.RATIOS_TABLE.length;l++){let c=0,f=Ht.RATIOS_TABLE[l];for(let g=0;g<Ae.BARS_IN_MODULE;g++){let p=Math.fround(f[g]-n[g]);if(c+=Math.fround(p*p),c>=i)break}c<i&&(i=c,o=Ae.SYMBOL_TABLE[l])}return o}}Ht.bSymbolTableReady=!1,Ht.RATIOS_TABLE=new Array(Ae.SYMBOL_TABLE.length).map(A=>new Array(Ae.BARS_IN_MODULE));class Po{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(e){this.segmentIndex=e}getFileId(){return this.fileId}setFileId(e){this.fileId=e}getOptionalData(){return this.optionalData}setOptionalData(e){this.optionalData=e}isLastSegment(){return this.lastSegment}setLastSegment(e){this.lastSegment=e}getSegmentCount(){return this.segmentCount}setSegmentCount(e){this.segmentCount=e}getSender(){return this.sender||null}setSender(e){this.sender=e}getAddressee(){return this.addressee||null}setAddressee(e){this.addressee=e}getFileName(){return this.fileName}setFileName(e){this.fileName=e}getFileSize(){return this.fileSize}setFileSize(e){this.fileSize=e}getChecksum(){return this.checksum}setChecksum(e){this.checksum=e}getTimestamp(){return this.timestamp}setTimestamp(e){this.timestamp=e}}class Fo{static parseLong(e,t=void 0){return parseInt(e,t)}}class ko extends w{}ko.kind="NullPointerException";class Vc{writeBytes(e){this.writeBytesOffset(e,0,e.length)}writeBytesOffset(e,t,n){if(e==null)throw new ko;if(t<0||t>e.length||n<0||t+n>e.length||t+n<0)throw new Ie;if(n===0)return;for(let i=0;i<n;i++)this.write(e[t+i])}flush(){}close(){}}class jc extends w{}class Gc extends Vc{constructor(e=32){if(super(),this.count=0,e<0)throw new T("Negative initial size: "+e);this.buf=new Uint8Array(e)}ensureCapacity(e){e-this.buf.length>0&&this.grow(e)}grow(e){let n=this.buf.length<<1;if(n-e<0&&(n=e),n<0){if(e<0)throw new jc;n=ne.MAX_VALUE}this.buf=ce.copyOfUint8Array(this.buf,n)}write(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1}writeBytesOffset(e,t,n){if(t<0||t>e.length||n<0||t+n-e.length>0)throw new Ie;this.ensureCapacity(this.count+n),J.arraycopy(e,t,this.buf,this.count,n),this.count+=n}writeTo(e){e.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return ce.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(e){return e?typeof e=="string"?this.toString_string(e):this.toString_number(e):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(e){return new String(this.buf).toString()}toString_number(e){return new String(this.buf).toString()}close(){}}var Ye;(function(A){A[A.ALPHA=0]="ALPHA",A[A.LOWER=1]="LOWER",A[A.MIXED=2]="MIXED",A[A.PUNCT=3]="PUNCT",A[A.ALPHA_SHIFT=4]="ALPHA_SHIFT",A[A.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Ye||(Ye={}));function Uo(){if(typeof window<"u")return window.BigInt||null;if(typeof ei<"u")return ei.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Ti;function Xn(A){if(typeof Ti>"u"&&(Ti=Uo()),Ti===null)throw new Error("BigInt is not supported!");return Ti(A)}function Wc(){let A=[];A[0]=Xn(1);let e=Xn(900);A[1]=e;for(let t=2;t<16;t++)A[t]=A[t-1]*e;return A}class B{static decode(e,t){let n=new Re(""),i=V.ISO8859_1;n.enableDecoding(i);let o=1,l=e[o++],c=new Po;for(;o<e[0];){switch(l){case B.TEXT_COMPACTION_MODE_LATCH:o=B.textCompaction(e,o,n);break;case B.BYTE_COMPACTION_MODE_LATCH:case B.BYTE_COMPACTION_MODE_LATCH_6:o=B.byteCompaction(l,e,i,o,n);break;case B.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[o++]);break;case B.NUMERIC_COMPACTION_MODE_LATCH:o=B.numericCompaction(e,o,n);break;case B.ECI_CHARSET:V.getCharacterSetECIByValue(e[o++]);break;case B.ECI_GENERAL_PURPOSE:o+=2;break;case B.ECI_USER_DEFINED:o++;break;case B.BEGIN_MACRO_PDF417_CONTROL_BLOCK:o=B.decodeMacroBlock(e,o,c);break;case B.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case B.MACRO_PDF417_TERMINATOR:throw new k;default:o--,o=B.textCompaction(e,o,n);break}if(o<e.length)l=e[o++];else throw k.getFormatInstance()}if(n.length()===0)throw k.getFormatInstance();let f=new Vn(null,n.toString(),null,t);return f.setOther(c),f}static decodeMacroBlock(e,t,n){if(t+B.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw k.getFormatInstance();let i=new Int32Array(B.NUMBER_OF_SEQUENCE_CODEWORDS);for(let c=0;c<B.NUMBER_OF_SEQUENCE_CODEWORDS;c++,t++)i[c]=e[t];n.setSegmentIndex(ne.parseInt(B.decodeBase900toBase10(i,B.NUMBER_OF_SEQUENCE_CODEWORDS)));let o=new Re;t=B.textCompaction(e,t,o),n.setFileId(o.toString());let l=-1;for(e[t]===B.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(l=t+1);t<e[0];)switch(e[t]){case B.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t++,e[t]){case B.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let c=new Re;t=B.textCompaction(e,t+1,c),n.setFileName(c.toString());break;case B.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let f=new Re;t=B.textCompaction(e,t+1,f),n.setSender(f.toString());break;case B.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let g=new Re;t=B.textCompaction(e,t+1,g),n.setAddressee(g.toString());break;case B.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let p=new Re;t=B.numericCompaction(e,t+1,p),n.setSegmentCount(ne.parseInt(p.toString()));break;case B.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let C=new Re;t=B.numericCompaction(e,t+1,C),n.setTimestamp(Fo.parseLong(C.toString()));break;case B.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let E=new Re;t=B.numericCompaction(e,t+1,E),n.setChecksum(ne.parseInt(E.toString()));break;case B.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let S=new Re;t=B.numericCompaction(e,t+1,S),n.setFileSize(Fo.parseLong(S.toString()));break;default:throw k.getFormatInstance()}break;case B.MACRO_PDF417_TERMINATOR:t++,n.setLastSegment(!0);break;default:throw k.getFormatInstance()}if(l!==-1){let c=t-l;n.isLastSegment()&&c--,n.setOptionalData(ce.copyOfRange(e,l,l+c))}return t}static textCompaction(e,t,n){let i=new Int32Array((e[0]-t)*2),o=new Int32Array((e[0]-t)*2),l=0,c=!1;for(;t<e[0]&&!c;){let f=e[t++];if(f<B.TEXT_COMPACTION_MODE_LATCH)i[l]=f/30,i[l+1]=f%30,l+=2;else switch(f){case B.TEXT_COMPACTION_MODE_LATCH:i[l++]=B.TEXT_COMPACTION_MODE_LATCH;break;case B.BYTE_COMPACTION_MODE_LATCH:case B.BYTE_COMPACTION_MODE_LATCH_6:case B.NUMERIC_COMPACTION_MODE_LATCH:case B.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case B.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case B.MACRO_PDF417_TERMINATOR:t--,c=!0;break;case B.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[l]=B.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,f=e[t++],o[l]=f,l++;break}}return B.decodeTextCompaction(i,o,l,n),t}static decodeTextCompaction(e,t,n,i){let o=Ye.ALPHA,l=Ye.ALPHA,c=0;for(;c<n;){let f=e[c],g="";switch(o){case Ye.ALPHA:if(f<26)g=String.fromCharCode(65+f);else switch(f){case 26:g=" ";break;case B.LL:o=Ye.LOWER;break;case B.ML:o=Ye.MIXED;break;case B.PS:l=o,o=Ye.PUNCT_SHIFT;break;case B.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[c]);break;case B.TEXT_COMPACTION_MODE_LATCH:o=Ye.ALPHA;break}break;case Ye.LOWER:if(f<26)g=String.fromCharCode(97+f);else switch(f){case 26:g=" ";break;case B.AS:l=o,o=Ye.ALPHA_SHIFT;break;case B.ML:o=Ye.MIXED;break;case B.PS:l=o,o=Ye.PUNCT_SHIFT;break;case B.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[c]);break;case B.TEXT_COMPACTION_MODE_LATCH:o=Ye.ALPHA;break}break;case Ye.MIXED:if(f<B.PL)g=B.MIXED_CHARS[f];else switch(f){case B.PL:o=Ye.PUNCT;break;case 26:g=" ";break;case B.LL:o=Ye.LOWER;break;case B.AL:o=Ye.ALPHA;break;case B.PS:l=o,o=Ye.PUNCT_SHIFT;break;case B.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[c]);break;case B.TEXT_COMPACTION_MODE_LATCH:o=Ye.ALPHA;break}break;case Ye.PUNCT:if(f<B.PAL)g=B.PUNCT_CHARS[f];else switch(f){case B.PAL:o=Ye.ALPHA;break;case B.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[c]);break;case B.TEXT_COMPACTION_MODE_LATCH:o=Ye.ALPHA;break}break;case Ye.ALPHA_SHIFT:if(o=l,f<26)g=String.fromCharCode(65+f);else switch(f){case 26:g=" ";break;case B.TEXT_COMPACTION_MODE_LATCH:o=Ye.ALPHA;break}break;case Ye.PUNCT_SHIFT:if(o=l,f<B.PAL)g=B.PUNCT_CHARS[f];else switch(f){case B.PAL:o=Ye.ALPHA;break;case B.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[c]);break;case B.TEXT_COMPACTION_MODE_LATCH:o=Ye.ALPHA;break}break}g!==""&&i.append(g),c++}}static byteCompaction(e,t,n,i,o){let l=new Gc,c=0,f=0,g=!1;switch(e){case B.BYTE_COMPACTION_MODE_LATCH:let p=new Int32Array(6),C=t[i++];for(;i<t[0]&&!g;)switch(p[c++]=C,f=900*f+C,C=t[i++],C){case B.TEXT_COMPACTION_MODE_LATCH:case B.BYTE_COMPACTION_MODE_LATCH:case B.NUMERIC_COMPACTION_MODE_LATCH:case B.BYTE_COMPACTION_MODE_LATCH_6:case B.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case B.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case B.MACRO_PDF417_TERMINATOR:i--,g=!0;break;default:if(c%5===0&&c>0){for(let E=0;E<6;++E)l.write(Number(Xn(f)>>Xn(8*(5-E))));f=0,c=0}break}i===t[0]&&C<B.TEXT_COMPACTION_MODE_LATCH&&(p[c++]=C);for(let E=0;E<c;E++)l.write(p[E]);break;case B.BYTE_COMPACTION_MODE_LATCH_6:for(;i<t[0]&&!g;){let E=t[i++];if(E<B.TEXT_COMPACTION_MODE_LATCH)c++,f=900*f+E;else switch(E){case B.TEXT_COMPACTION_MODE_LATCH:case B.BYTE_COMPACTION_MODE_LATCH:case B.NUMERIC_COMPACTION_MODE_LATCH:case B.BYTE_COMPACTION_MODE_LATCH_6:case B.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case B.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case B.MACRO_PDF417_TERMINATOR:i--,g=!0;break}if(c%5===0&&c>0){for(let S=0;S<6;++S)l.write(Number(Xn(f)>>Xn(8*(5-S))));f=0,c=0}}break}return o.append(it.decode(l.toByteArray(),n)),i}static numericCompaction(e,t,n){let i=0,o=!1,l=new Int32Array(B.MAX_NUMERIC_CODEWORDS);for(;t<e[0]&&!o;){let c=e[t++];if(t===e[0]&&(o=!0),c<B.TEXT_COMPACTION_MODE_LATCH)l[i]=c,i++;else switch(c){case B.TEXT_COMPACTION_MODE_LATCH:case B.BYTE_COMPACTION_MODE_LATCH:case B.BYTE_COMPACTION_MODE_LATCH_6:case B.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case B.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case B.MACRO_PDF417_TERMINATOR:t--,o=!0;break}(i%B.MAX_NUMERIC_CODEWORDS===0||c===B.NUMERIC_COMPACTION_MODE_LATCH||o)&&i>0&&(n.append(B.decodeBase900toBase10(l,i)),i=0)}return t}static decodeBase900toBase10(e,t){let n=Xn(0);for(let o=0;o<t;o++)n+=B.EXP900[t-o-1]*Xn(e[o]);let i=n.toString();if(i.charAt(0)!=="1")throw new k;return i.substring(1)}}B.TEXT_COMPACTION_MODE_LATCH=900,B.BYTE_COMPACTION_MODE_LATCH=901,B.NUMERIC_COMPACTION_MODE_LATCH=902,B.BYTE_COMPACTION_MODE_LATCH_6=924,B.ECI_USER_DEFINED=925,B.ECI_GENERAL_PURPOSE=926,B.ECI_CHARSET=927,B.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,B.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,B.MACRO_PDF417_TERMINATOR=922,B.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,B.MAX_NUMERIC_CODEWORDS=15,B.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,B.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,B.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,B.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,B.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,B.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,B.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,B.PL=25,B.LL=27,B.AS=27,B.ML=28,B.AL=28,B.PS=29,B.PAL=29,B.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,B.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",B.EXP900=Uo()?Wc():[],B.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Ne{constructor(){}static decode(e,t,n,i,o,l,c){let f=new lr(e,t,n,i,o),g=null,p=null,C;for(let O=!0;;O=!1){if(t!=null&&(g=Ne.getRowIndicatorColumn(e,f,t,!0,l,c)),i!=null&&(p=Ne.getRowIndicatorColumn(e,f,i,!1,l,c)),C=Ne.merge(g,p),C==null)throw L.getNotFoundInstance();let M=C.getBoundingBox();if(O&&M!=null&&(M.getMinY()<f.getMinY()||M.getMaxY()>f.getMaxY()))f=M;else break}C.setBoundingBox(f);let E=C.getBarcodeColumnCount()+1;C.setDetectionResultColumn(0,g),C.setDetectionResultColumn(E,p);let S=g!=null;for(let O=1;O<=E;O++){let M=S?O:E-O;if(C.getDetectionResultColumn(M)!==void 0)continue;let R;M===0||M===E?R=new Bo(f,M===0):R=new Yr(f),C.setDetectionResultColumn(M,R);let P=-1,Q=P;for(let q=f.getMinY();q<=f.getMaxY();q++){if(P=Ne.getStartColumn(C,M,q,S),P<0||P>f.getMaxX()){if(Q===-1)continue;P=Q}let Z=Ne.detectCodeword(e,f.getMinX(),f.getMaxX(),S,P,q,l,c);Z!=null&&(R.setCodeword(q,Z),Q=P,l=Math.min(l,Z.getWidth()),c=Math.max(c,Z.getWidth()))}}return Ne.createDecoderResult(C)}static merge(e,t){if(e==null&&t==null)return null;let n=Ne.getBarcodeMetadata(e,t);if(n==null)return null;let i=lr.merge(Ne.adjustBoundingBox(e),Ne.adjustBoundingBox(t));return new Zr(n,i)}static adjustBoundingBox(e){if(e==null)return null;let t=e.getRowHeights();if(t==null)return null;let n=Ne.getMax(t),i=0;for(let c of t)if(i+=n-c,c>0)break;let o=e.getCodewords();for(let c=0;i>0&&o[c]==null;c++)i--;let l=0;for(let c=t.length-1;c>=0&&(l+=n-t[c],!(t[c]>0));c--);for(let c=o.length-1;l>0&&o[c]==null;c--)l--;return e.getBoundingBox().addMissingRows(i,l,e.isLeft())}static getMax(e){let t=-1;for(let n of e)t=Math.max(t,n);return t}static getBarcodeMetadata(e,t){let n;if(e==null||(n=e.getBarcodeMetadata())==null)return t==null?null:t.getBarcodeMetadata();let i;return t==null||(i=t.getBarcodeMetadata())==null?n:n.getColumnCount()!==i.getColumnCount()&&n.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&n.getRowCount()!==i.getRowCount()?null:n}static getRowIndicatorColumn(e,t,n,i,o,l){let c=new Bo(t,i);for(let f=0;f<2;f++){let g=f===0?1:-1,p=Math.trunc(Math.trunc(n.getX()));for(let C=Math.trunc(Math.trunc(n.getY()));C<=t.getMaxY()&&C>=t.getMinY();C+=g){let E=Ne.detectCodeword(e,0,e.getWidth(),i,p,C,o,l);E!=null&&(c.setCodeword(C,E),i?p=E.getStartX():p=E.getEndX())}}return c}static adjustCodewordCount(e,t){let n=t[0][1],i=n.getValue(),o=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-Ne.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(o<1||o>Ae.MAX_CODEWORDS_IN_BARCODE)throw L.getNotFoundInstance();n.setValue(o)}else i[0]!==o&&n.setValue(o)}static createDecoderResult(e){let t=Ne.createBarcodeMatrix(e);Ne.adjustCodewordCount(e,t);let n=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),o=[],l=new Array;for(let f=0;f<e.getBarcodeRowCount();f++)for(let g=0;g<e.getBarcodeColumnCount();g++){let p=t[f][g+1].getValue(),C=f*e.getBarcodeColumnCount()+g;p.length===0?n.push(C):p.length===1?i[C]=p[0]:(l.push(C),o.push(p))}let c=new Array(o.length);for(let f=0;f<c.length;f++)c[f]=o[f];return Ne.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,Ae.toIntArray(n),Ae.toIntArray(l),c)}static createDecoderResultFromAmbiguousValues(e,t,n,i,o){let l=new Int32Array(i.length),c=100;for(;c-- >0;){for(let f=0;f<l.length;f++)t[i[f]]=o[f][l[f]];try{return Ne.decodeCodewords(t,e,n)}catch(f){if(!(f instanceof H))throw f}if(l.length===0)throw H.getChecksumInstance();for(let f=0;f<l.length;f++)if(l[f]<o[f].length-1){l[f]++;break}else if(l[f]=0,f===l.length-1)throw H.getChecksumInstance()}throw H.getChecksumInstance()}static createBarcodeMatrix(e){let t=Array.from({length:e.getBarcodeRowCount()},()=>new Array(e.getBarcodeColumnCount()+2));for(let i=0;i<t.length;i++)for(let o=0;o<t[i].length;o++)t[i][o]=new Xr;let n=0;for(let i of e.getDetectionResultColumns()){if(i!=null){for(let o of i.getCodewords())if(o!=null){let l=o.getRowNumber();if(l>=0){if(l>=t.length)continue;t[l][n].setValue(o.getValue())}}}n++}return t}static isValidBarcodeColumn(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1}static getStartColumn(e,t,n,i){let o=i?1:-1,l=null;if(Ne.isValidBarcodeColumn(e,t-o)&&(l=e.getDetectionResultColumn(t-o).getCodeword(n)),l!=null)return i?l.getEndX():l.getStartX();if(l=e.getDetectionResultColumn(t).getCodewordNearby(n),l!=null)return i?l.getStartX():l.getEndX();if(Ne.isValidBarcodeColumn(e,t-o)&&(l=e.getDetectionResultColumn(t-o).getCodewordNearby(n)),l!=null)return i?l.getEndX():l.getStartX();let c=0;for(;Ne.isValidBarcodeColumn(e,t-o);){t-=o;for(let f of e.getDetectionResultColumn(t).getCodewords())if(f!=null)return(i?f.getEndX():f.getStartX())+o*c*(f.getEndX()-f.getStartX());c++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()}static detectCodeword(e,t,n,i,o,l,c,f){o=Ne.adjustCodewordStartColumn(e,t,n,i,o,l);let g=Ne.getModuleBitCount(e,t,n,i,o,l);if(g==null)return null;let p,C=G.sum(g);if(i)p=o+C;else{for(let O=0;O<g.length/2;O++){let M=g[O];g[O]=g[g.length-1-O],g[g.length-1-O]=M}p=o,o=p-C}if(!Ne.checkCodewordSkew(C,c,f))return null;let E=Ht.getDecodedValue(g),S=Ae.getCodeword(E);return S===-1?null:new Kr(o,p,Ne.getCodewordBucketNumber(E),S)}static getModuleBitCount(e,t,n,i,o,l){let c=o,f=new Int32Array(8),g=0,p=i?1:-1,C=i;for(;(i?c<n:c>=t)&&g<f.length;)e.get(c,l)===C?(f[g]++,c+=p):(g++,C=!C);return g===f.length||c===(i?n:t)&&g===f.length-1?f:null}static getNumberOfECCodeWords(e){return 2<<e}static adjustCodewordStartColumn(e,t,n,i,o,l){let c=o,f=i?-1:1;for(let g=0;g<2;g++){for(;(i?c>=t:c<n)&&i===e.get(c,l);){if(Math.abs(o-c)>Ne.CODEWORD_SKEW_SIZE)return o;c+=f}f=-f,i=!i}return c}static checkCodewordSkew(e,t,n){return t-Ne.CODEWORD_SKEW_SIZE<=e&&e<=n+Ne.CODEWORD_SKEW_SIZE}static decodeCodewords(e,t,n){if(e.length===0)throw k.getFormatInstance();let i=1<<t+1,o=Ne.correctErrors(e,n,i);Ne.verifyCodewordCount(e,i);let l=B.decode(e,""+t);return l.setErrorsCorrected(o),l.setErasures(n.length),l}static correctErrors(e,t,n){if(t!=null&&t.length>n/2+Ne.MAX_ERRORS||n<0||n>Ne.MAX_EC_CODEWORDS)throw H.getChecksumInstance();return Ne.errorCorrection.decode(e,n,t)}static verifyCodewordCount(e,t){if(e.length<4)throw k.getFormatInstance();let n=e[0];if(n>e.length)throw k.getFormatInstance();if(n===0)if(t<e.length)e[0]=e.length-t;else throw k.getFormatInstance()}static getBitCountForCodeword(e){let t=new Int32Array(8),n=0,i=t.length-1;for(;!((e&1)!==n&&(n=e&1,i--,i<0));)t[i]++,e>>=1;return t}static getCodewordBucketNumber(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)}static getCodewordBucketNumber_number(e){return Ne.getCodewordBucketNumber(Ne.getBitCountForCodeword(e))}static getCodewordBucketNumber_Int32Array(e){return(e[0]-e[2]+e[4]-e[6]+9)%9}static toString(e){let t=new zr;for(let n=0;n<e.length;n++){t.format("Row %2d: ",n);for(let i=0;i<e[n].length;i++){let o=e[n][i];o.getValue().length===0?t.format("        ",null):t.format("%4d(%2d)",o.getValue()[0],o.getConfidence(o.getValue()[0]))}t.format("%n")}return t.toString()}}Ne.CODEWORD_SKEW_SIZE=2,Ne.MAX_ERRORS=3,Ne.MAX_EC_CODEWORDS=512,Ne.errorCorrection=new Lo;class bt{decode(e,t=null){let n=bt.decode(e,t,!1);if(n==null||n.length===0||n[0]==null)throw L.getNotFoundInstance();return n[0]}decodeMultiple(e,t=null){try{return bt.decode(e,t,!0)}catch(n){throw n instanceof k||n instanceof H?L.getNotFoundInstance():n}}static decode(e,t,n){const i=new Array,o=Se.detectMultiple(e,t,n);for(const l of o.getPoints()){const c=Ne.decode(o.getBits(),l[4],l[5],l[6],l[7],bt.getMinCodewordWidth(l),bt.getMaxCodewordWidth(l)),f=new Et(c.getText(),c.getRawBytes(),void 0,l,ue.PDF_417);f.putMetadata(ct.ERROR_CORRECTION_LEVEL,c.getECLevel());const g=c.getOther();g!=null&&f.putMetadata(ct.PDF417_EXTRA_METADATA,g),i.push(f)}return i.map(l=>l)}static getMaxWidth(e,t){return e==null||t==null?0:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMinWidth(e,t){return e==null||t==null?ne.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMaxCodewordWidth(e){return Math.floor(Math.max(Math.max(bt.getMaxWidth(e[0],e[4]),bt.getMaxWidth(e[6],e[2])*Ae.MODULES_IN_CODEWORD/Ae.MODULES_IN_STOP_PATTERN),Math.max(bt.getMaxWidth(e[1],e[5]),bt.getMaxWidth(e[7],e[3])*Ae.MODULES_IN_CODEWORD/Ae.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(e){return Math.floor(Math.min(Math.min(bt.getMinWidth(e[0],e[4]),bt.getMinWidth(e[6],e[2])*Ae.MODULES_IN_CODEWORD/Ae.MODULES_IN_STOP_PATTERN),Math.min(bt.getMinWidth(e[1],e[5]),bt.getMinWidth(e[7],e[3])*Ae.MODULES_IN_CODEWORD/Ae.MODULES_IN_STOP_PATTERN)))}reset(){}}class _i extends w{}_i.kind="ReaderException";class Ho{constructor(e,t){this.verbose=e===!0,t&&this.setHints(t)}decode(e,t){return t&&this.setHints(t),this.decodeInternal(e)}decodeWithState(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)}setHints(e){this.hints=e;const t=!u(e)&&e.get(Te.TRY_HARDER)===!0,n=u(e)?null:e.get(Te.POSSIBLE_FORMATS),i=new Array;if(!u(n)){const o=n.some(l=>l===ue.UPC_A||l===ue.UPC_E||l===ue.EAN_13||l===ue.EAN_8||l===ue.CODABAR||l===ue.CODE_39||l===ue.CODE_93||l===ue.CODE_128||l===ue.ITF||l===ue.RSS_14||l===ue.RSS_EXPANDED);o&&!t&&i.push(new Sr(e,this.verbose)),n.includes(ue.QR_CODE)&&i.push(new Yn),n.includes(ue.DATA_MATRIX)&&i.push(new zn),n.includes(ue.AZTEC)&&i.push(new vt),n.includes(ue.PDF_417)&&i.push(new bt),o&&t&&i.push(new Sr(e,this.verbose))}i.length===0&&(t||i.push(new Sr(e,this.verbose)),i.push(new Yn),i.push(new zn),i.push(new vt),i.push(new bt),t&&i.push(new Sr(e,this.verbose))),this.readers=i}reset(){if(this.readers!==null)for(const e of this.readers)e.reset()}decodeInternal(e){if(this.readers===null)throw new _i("No readers where selected, nothing can be read.");for(const t of this.readers)try{return t.decode(e,this.hints)}catch(n){if(n instanceof _i)continue}throw new L("No MultiFormat Readers were able to detect the code.")}}class zc extends gn{constructor(e=null,t=500){const n=new Ho;n.setHints(e),super(n,t)}decodeBitmap(e){return this.reader.decodeWithState(e)}}class Yc extends gn{constructor(e=500){super(new bt,e)}}class Xc extends gn{constructor(e=500){super(new Yn,e)}}var Is;(function(A){A[A.ERROR_CORRECTION=0]="ERROR_CORRECTION",A[A.CHARACTER_SET=1]="CHARACTER_SET",A[A.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",A[A.MIN_SIZE=3]="MIN_SIZE",A[A.MAX_SIZE=4]="MAX_SIZE",A[A.MARGIN=5]="MARGIN",A[A.PDF417_COMPACT=6]="PDF417_COMPACT",A[A.PDF417_COMPACTION=7]="PDF417_COMPACTION",A[A.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",A[A.AZTEC_LAYERS=9]="AZTEC_LAYERS",A[A.QR_VERSION=10]="QR_VERSION"})(Is||(Is={}));var At=Is;class ys{constructor(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new Dt(e,Int32Array.from([1])))}buildGenerator(e){const t=this.cachedGenerators;if(e>=t.length){let n=t[t.length-1];const i=this.field;for(let o=t.length;o<=e;o++){const l=n.multiply(new Dt(i,Int32Array.from([1,i.exp(o-1+i.getGeneratorBase())])));t.push(l),n=l}}return t[e]}encode(e,t){if(t===0)throw new T("No error correction bytes");const n=e.length-t;if(n<=0)throw new T("No data bytes provided");const i=this.buildGenerator(t),o=new Int32Array(n);J.arraycopy(e,0,o,0,n);let l=new Dt(this.field,o);l=l.multiplyByMonomial(t,1);const f=l.divide(i)[1].getCoefficients(),g=t-f.length;for(let p=0;p<g;p++)e[n+p]=0;J.arraycopy(f,0,e,n+g,f.length)}}class ft{constructor(){}static applyMaskPenaltyRule1(e){return ft.applyMaskPenaltyRule1Internal(e,!0)+ft.applyMaskPenaltyRule1Internal(e,!1)}static applyMaskPenaltyRule2(e){let t=0;const n=e.getArray(),i=e.getWidth(),o=e.getHeight();for(let l=0;l<o-1;l++){const c=n[l];for(let f=0;f<i-1;f++){const g=c[f];g===c[f+1]&&g===n[l+1][f]&&g===n[l+1][f+1]&&t++}}return ft.N2*t}static applyMaskPenaltyRule3(e){let t=0;const n=e.getArray(),i=e.getWidth(),o=e.getHeight();for(let l=0;l<o;l++)for(let c=0;c<i;c++){const f=n[l];c+6<i&&f[c]===1&&f[c+1]===0&&f[c+2]===1&&f[c+3]===1&&f[c+4]===1&&f[c+5]===0&&f[c+6]===1&&(ft.isWhiteHorizontal(f,c-4,c)||ft.isWhiteHorizontal(f,c+7,c+11))&&t++,l+6<o&&n[l][c]===1&&n[l+1][c]===0&&n[l+2][c]===1&&n[l+3][c]===1&&n[l+4][c]===1&&n[l+5][c]===0&&n[l+6][c]===1&&(ft.isWhiteVertical(n,c,l-4,l)||ft.isWhiteVertical(n,c,l+7,l+11))&&t++}return t*ft.N3}static isWhiteHorizontal(e,t,n){t=Math.max(t,0),n=Math.min(n,e.length);for(let i=t;i<n;i++)if(e[i]===1)return!1;return!0}static isWhiteVertical(e,t,n,i){n=Math.max(n,0),i=Math.min(i,e.length);for(let o=n;o<i;o++)if(e[o][t]===1)return!1;return!0}static applyMaskPenaltyRule4(e){let t=0;const n=e.getArray(),i=e.getWidth(),o=e.getHeight();for(let f=0;f<o;f++){const g=n[f];for(let p=0;p<i;p++)g[p]===1&&t++}const l=e.getHeight()*e.getWidth();return Math.floor(Math.abs(t*2-l)*10/l)*ft.N4}static getDataMaskBit(e,t,n){let i,o;switch(e){case 0:i=n+t&1;break;case 1:i=n&1;break;case 2:i=t%3;break;case 3:i=(n+t)%3;break;case 4:i=Math.floor(n/2)+Math.floor(t/3)&1;break;case 5:o=n*t,i=(o&1)+o%3;break;case 6:o=n*t,i=(o&1)+o%3&1;break;case 7:o=n*t,i=o%3+(n+t&1)&1;break;default:throw new T("Invalid mask pattern: "+e)}return i===0}static applyMaskPenaltyRule1Internal(e,t){let n=0;const i=t?e.getHeight():e.getWidth(),o=t?e.getWidth():e.getHeight(),l=e.getArray();for(let c=0;c<i;c++){let f=0,g=-1;for(let p=0;p<o;p++){const C=t?l[c][p]:l[p][c];C===g?f++:(f>=5&&(n+=ft.N1+(f-5)),f=1,g=C)}f>=5&&(n+=ft.N1+(f-5))}return n}}ft.N1=3,ft.N2=3,ft.N3=40,ft.N4=10;class Ni{constructor(e,t){this.width=e,this.height=t;const n=new Array(t);for(let i=0;i!==t;i++)n[i]=new Uint8Array(e);this.bytes=n}getHeight(){return this.height}getWidth(){return this.width}get(e,t){return this.bytes[t][e]}getArray(){return this.bytes}setNumber(e,t,n){this.bytes[t][e]=n}setBoolean(e,t,n){this.bytes[t][e]=n?1:0}clear(e){for(const t of this.bytes)ce.fill(t,e)}equals(e){if(!(e instanceof Ni))return!1;const t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(let n=0,i=this.height;n<i;++n){const o=this.bytes[n],l=t.bytes[n];for(let c=0,f=this.width;c<f;++c)if(o[c]!==l[c])return!1}return!0}toString(){const e=new Re;for(let t=0,n=this.height;t<n;++t){const i=this.bytes[t];for(let o=0,l=this.width;o<l;++o)switch(i[o]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()}}class cr{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const e=new Re;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()}setMode(e){this.mode=e}setECLevel(e){this.ecLevel=e}setVersion(e){this.version=e}setMaskPattern(e){this.maskPattern=e}setMatrix(e){this.matrix=e}static isValidMaskPattern(e){return e>=0&&e<cr.NUM_MASK_PATTERNS}}cr.NUM_MASK_PATTERNS=8;class Ze extends w{}Ze.kind="WriterException";class xe{constructor(){}static clearMatrix(e){e.clear(255)}static buildMatrix(e,t,n,i,o){xe.clearMatrix(o),xe.embedBasicPatterns(n,o),xe.embedTypeInfo(t,i,o),xe.maybeEmbedVersionInfo(n,o),xe.embedDataBits(e,i,o)}static embedBasicPatterns(e,t){xe.embedPositionDetectionPatternsAndSeparators(t),xe.embedDarkDotAtLeftBottomCorner(t),xe.maybeEmbedPositionAdjustmentPatterns(e,t),xe.embedTimingPatterns(t)}static embedTypeInfo(e,t,n){const i=new te;xe.makeTypeInfoBits(e,t,i);for(let o=0,l=i.getSize();o<l;++o){const c=i.get(i.getSize()-1-o),f=xe.TYPE_INFO_COORDINATES[o],g=f[0],p=f[1];if(n.setBoolean(g,p,c),o<8){const C=n.getWidth()-o-1;n.setBoolean(C,8,c)}else{const E=n.getHeight()-7+(o-8);n.setBoolean(8,E,c)}}}static maybeEmbedVersionInfo(e,t){if(e.getVersionNumber()<7)return;const n=new te;xe.makeVersionInfoBits(e,n);let i=6*3-1;for(let o=0;o<6;++o)for(let l=0;l<3;++l){const c=n.get(i);i--,t.setBoolean(o,t.getHeight()-11+l,c),t.setBoolean(t.getHeight()-11+l,o,c)}}static embedDataBits(e,t,n){let i=0,o=-1,l=n.getWidth()-1,c=n.getHeight()-1;for(;l>0;){for(l===6&&(l-=1);c>=0&&c<n.getHeight();){for(let f=0;f<2;++f){const g=l-f;if(!xe.isEmpty(n.get(g,c)))continue;let p;i<e.getSize()?(p=e.get(i),++i):p=!1,t!==255&&ft.getDataMaskBit(t,g,c)&&(p=!p),n.setBoolean(g,c,p)}c+=o}o=-o,c+=o,l-=2}if(i!==e.getSize())throw new Ze("Not all bits consumed: "+i+"/"+e.getSize())}static findMSBSet(e){return 32-ne.numberOfLeadingZeros(e)}static calculateBCHCode(e,t){if(t===0)throw new T("0 polynomial");const n=xe.findMSBSet(t);for(e<<=n-1;xe.findMSBSet(e)>=n;)e^=t<<xe.findMSBSet(e)-n;return e}static makeTypeInfoBits(e,t,n){if(!cr.isValidMaskPattern(t))throw new Ze("Invalid mask pattern");const i=e.getBits()<<3|t;n.appendBits(i,5);const o=xe.calculateBCHCode(i,xe.TYPE_INFO_POLY);n.appendBits(o,10);const l=new te;if(l.appendBits(xe.TYPE_INFO_MASK_PATTERN,15),n.xor(l),n.getSize()!==15)throw new Ze("should not happen but we got: "+n.getSize())}static makeVersionInfoBits(e,t){t.appendBits(e.getVersionNumber(),6);const n=xe.calculateBCHCode(e.getVersionNumber(),xe.VERSION_INFO_POLY);if(t.appendBits(n,12),t.getSize()!==18)throw new Ze("should not happen but we got: "+t.getSize())}static isEmpty(e){return e===255}static embedTimingPatterns(e){for(let t=8;t<e.getWidth()-8;++t){const n=(t+1)%2;xe.isEmpty(e.get(t,6))&&e.setNumber(t,6,n),xe.isEmpty(e.get(6,t))&&e.setNumber(6,t,n)}}static embedDarkDotAtLeftBottomCorner(e){if(e.get(8,e.getHeight()-8)===0)throw new Ze;e.setNumber(8,e.getHeight()-8,1)}static embedHorizontalSeparationPattern(e,t,n){for(let i=0;i<8;++i){if(!xe.isEmpty(n.get(e+i,t)))throw new Ze;n.setNumber(e+i,t,0)}}static embedVerticalSeparationPattern(e,t,n){for(let i=0;i<7;++i){if(!xe.isEmpty(n.get(e,t+i)))throw new Ze;n.setNumber(e,t+i,0)}}static embedPositionAdjustmentPattern(e,t,n){for(let i=0;i<5;++i){const o=xe.POSITION_ADJUSTMENT_PATTERN[i];for(let l=0;l<5;++l)n.setNumber(e+l,t+i,o[l])}}static embedPositionDetectionPattern(e,t,n){for(let i=0;i<7;++i){const o=xe.POSITION_DETECTION_PATTERN[i];for(let l=0;l<7;++l)n.setNumber(e+l,t+i,o[l])}}static embedPositionDetectionPatternsAndSeparators(e){const t=xe.POSITION_DETECTION_PATTERN[0].length;xe.embedPositionDetectionPattern(0,0,e),xe.embedPositionDetectionPattern(e.getWidth()-t,0,e),xe.embedPositionDetectionPattern(0,e.getWidth()-t,e);const n=8;xe.embedHorizontalSeparationPattern(0,n-1,e),xe.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),xe.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);const i=7;xe.embedVerticalSeparationPattern(i,0,e),xe.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),xe.embedVerticalSeparationPattern(i,e.getHeight()-i,e)}static maybeEmbedPositionAdjustmentPatterns(e,t){if(e.getVersionNumber()<2)return;const n=e.getVersionNumber()-1,i=xe.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n];for(let o=0,l=i.length;o!==l;o++){const c=i[o];if(c>=0)for(let f=0;f!==l;f++){const g=i[f];g>=0&&xe.isEmpty(t.get(g,c))&&xe.embedPositionAdjustmentPattern(g-2,c-2,t)}}}}xe.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),xe.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),xe.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),xe.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),xe.VERSION_INFO_POLY=7973,xe.TYPE_INFO_POLY=1335,xe.TYPE_INFO_MASK_PATTERN=21522;class Zc{constructor(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class rt{constructor(){}static calculateMaskPenalty(e){return ft.applyMaskPenaltyRule1(e)+ft.applyMaskPenaltyRule2(e)+ft.applyMaskPenaltyRule3(e)+ft.applyMaskPenaltyRule4(e)}static encode(e,t,n=null){let i=rt.DEFAULT_BYTE_MODE_ENCODING;const o=n!==null&&n.get(At.CHARACTER_SET)!==void 0;o&&(i=n.get(At.CHARACTER_SET).toString());const l=this.chooseMode(e,i),c=new te;if(l===ge.BYTE&&(o||rt.DEFAULT_BYTE_MODE_ENCODING!==i)){const q=V.getCharacterSetECIByName(i);q!==void 0&&this.appendECI(q,c)}this.appendModeInfo(l,c);const f=new te;this.appendBytes(e,l,f,i);let g;if(n!==null&&n.get(At.QR_VERSION)!==void 0){const q=Number.parseInt(n.get(At.QR_VERSION).toString(),10);g=fe.getVersionForNumber(q);const Z=this.calculateBitsNeeded(l,c,f,g);if(!this.willFit(Z,g,t))throw new Ze("Data too big for requested version")}else g=this.recommendVersion(t,l,c,f);const p=new te;p.appendBitArray(c);const C=l===ge.BYTE?f.getSizeInBytes():e.length;this.appendLengthInfo(C,g,l,p),p.appendBitArray(f);const E=g.getECBlocksForLevel(t),S=g.getTotalCodewords()-E.getTotalECCodewords();this.terminateBits(S,p);const O=this.interleaveWithECBytes(p,g.getTotalCodewords(),S,E.getNumBlocks()),M=new cr;M.setECLevel(t),M.setMode(l),M.setVersion(g);const R=g.getDimensionForVersion(),P=new Ni(R,R),Q=this.chooseMaskPattern(O,t,g,P);return M.setMaskPattern(Q),xe.buildMatrix(O,t,g,Q,P),M.setMatrix(P),M}static recommendVersion(e,t,n,i){const o=this.calculateBitsNeeded(t,n,i,fe.getVersionForNumber(1)),l=this.chooseVersion(o,e),c=this.calculateBitsNeeded(t,n,i,l);return this.chooseVersion(c,e)}static calculateBitsNeeded(e,t,n,i){return t.getSize()+e.getCharacterCountBits(i)+n.getSize()}static getAlphanumericCode(e){return e<rt.ALPHANUMERIC_TABLE.length?rt.ALPHANUMERIC_TABLE[e]:-1}static chooseMode(e,t=null){if(V.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return ge.KANJI;let n=!1,i=!1;for(let o=0,l=e.length;o<l;++o){const c=e.charAt(o);if(rt.isDigit(c))n=!0;else if(this.getAlphanumericCode(c.charCodeAt(0))!==-1)i=!0;else return ge.BYTE}return i?ge.ALPHANUMERIC:n?ge.NUMERIC:ge.BYTE}static isOnlyDoubleByteKanji(e){let t;try{t=it.encode(e,V.SJIS)}catch{return!1}const n=t.length;if(n%2!==0)return!1;for(let i=0;i<n;i+=2){const o=t[i]&255;if((o<129||o>159)&&(o<224||o>235))return!1}return!0}static chooseMaskPattern(e,t,n,i){let o=Number.MAX_SAFE_INTEGER,l=-1;for(let c=0;c<cr.NUM_MASK_PATTERNS;c++){xe.buildMatrix(e,t,n,c,i);let f=this.calculateMaskPenalty(i);f<o&&(o=f,l=c)}return l}static chooseVersion(e,t){for(let n=1;n<=40;n++){const i=fe.getVersionForNumber(n);if(rt.willFit(e,i,t))return i}throw new Ze("Data too big")}static willFit(e,t,n){const i=t.getTotalCodewords(),l=t.getECBlocksForLevel(n).getTotalECCodewords(),c=i-l,f=(e+7)/8;return c>=f}static terminateBits(e,t){const n=e*8;if(t.getSize()>n)throw new Ze("data bits cannot fit in the QR Code"+t.getSize()+" > "+n);for(let l=0;l<4&&t.getSize()<n;++l)t.appendBit(!1);const i=t.getSize()&7;if(i>0)for(let l=i;l<8;l++)t.appendBit(!1);const o=e-t.getSizeInBytes();for(let l=0;l<o;++l)t.appendBits(l&1?17:236,8);if(t.getSize()!==n)throw new Ze("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(e,t,n,i,o,l){if(i>=n)throw new Ze("Block ID too large");const c=e%n,f=n-c,g=Math.floor(e/n),p=g+1,C=Math.floor(t/n),E=C+1,S=g-C,O=p-E;if(S!==O)throw new Ze("EC bytes mismatch");if(n!==f+c)throw new Ze("RS blocks mismatch");if(e!==(C+S)*f+(E+O)*c)throw new Ze("Total bytes mismatch");i<f?(o[0]=C,l[0]=S):(o[0]=E,l[0]=O)}static interleaveWithECBytes(e,t,n,i){if(e.getSizeInBytes()!==n)throw new Ze("Number of bits and data bytes does not match");let o=0,l=0,c=0;const f=new Array;for(let p=0;p<i;++p){const C=new Int32Array(1),E=new Int32Array(1);rt.getNumDataBytesAndNumECBytesForBlockID(t,n,i,p,C,E);const S=C[0],O=new Uint8Array(S);e.toBytes(8*o,O,0,S);const M=rt.generateECBytes(O,E[0]);f.push(new Zc(O,M)),l=Math.max(l,S),c=Math.max(c,M.length),o+=C[0]}if(n!==o)throw new Ze("Data bytes does not match offset");const g=new te;for(let p=0;p<l;++p)for(const C of f){const E=C.getDataBytes();p<E.length&&g.appendBits(E[p],8)}for(let p=0;p<c;++p)for(const C of f){const E=C.getErrorCorrectionBytes();p<E.length&&g.appendBits(E[p],8)}if(t!==g.getSizeInBytes())throw new Ze("Interleaving error: "+t+" and "+g.getSizeInBytes()+" differ.");return g}static generateECBytes(e,t){const n=e.length,i=new Int32Array(n+t);for(let l=0;l<n;l++)i[l]=e[l]&255;new ys(N.QR_CODE_FIELD_256).encode(i,t);const o=new Uint8Array(t);for(let l=0;l<t;l++)o[l]=i[n+l];return o}static appendModeInfo(e,t){t.appendBits(e.getBits(),4)}static appendLengthInfo(e,t,n,i){const o=n.getCharacterCountBits(t);if(e>=1<<o)throw new Ze(e+" is bigger than "+((1<<o)-1));i.appendBits(e,o)}static appendBytes(e,t,n,i){switch(t){case ge.NUMERIC:rt.appendNumericBytes(e,n);break;case ge.ALPHANUMERIC:rt.appendAlphanumericBytes(e,n);break;case ge.BYTE:rt.append8BitBytes(e,n,i);break;case ge.KANJI:rt.appendKanjiBytes(e,n);break;default:throw new Ze("Invalid mode: "+t)}}static getDigit(e){return e.charCodeAt(0)-48}static isDigit(e){const t=rt.getDigit(e);return t>=0&&t<=9}static appendNumericBytes(e,t){const n=e.length;let i=0;for(;i<n;){const o=rt.getDigit(e.charAt(i));if(i+2<n){const l=rt.getDigit(e.charAt(i+1)),c=rt.getDigit(e.charAt(i+2));t.appendBits(o*100+l*10+c,10),i+=3}else if(i+1<n){const l=rt.getDigit(e.charAt(i+1));t.appendBits(o*10+l,7),i+=2}else t.appendBits(o,4),i++}}static appendAlphanumericBytes(e,t){const n=e.length;let i=0;for(;i<n;){const o=rt.getAlphanumericCode(e.charCodeAt(i));if(o===-1)throw new Ze;if(i+1<n){const l=rt.getAlphanumericCode(e.charCodeAt(i+1));if(l===-1)throw new Ze;t.appendBits(o*45+l,11),i+=2}else t.appendBits(o,6),i++}}static append8BitBytes(e,t,n){let i;try{i=it.encode(e,n)}catch(o){throw new Ze(o)}for(let o=0,l=i.length;o!==l;o++){const c=i[o];t.appendBits(c,8)}}static appendKanjiBytes(e,t){let n;try{n=it.encode(e,V.SJIS)}catch(o){throw new Ze(o)}const i=n.length;for(let o=0;o<i;o+=2){const l=n[o]&255,c=n[o+1]&255,f=l<<8&4294967295|c;let g=-1;if(f>=33088&&f<=40956?g=f-33088:f>=57408&&f<=60351&&(g=f-49472),g===-1)throw new Ze("Invalid byte sequence");const p=(g>>8)*192+(g&255);t.appendBits(p,13)}}static appendECI(e,t){t.appendBits(ge.ECI.getBits(),4),t.appendBits(e.getValue(),8)}}rt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),rt.DEFAULT_BYTE_MODE_ENCODING=V.UTF8.getName();class ur{write(e,t,n,i=null){if(e.length===0)throw new T("Found empty contents");if(t<0||n<0)throw new T("Requested dimensions are too small: "+t+"x"+n);let o=$e.L,l=ur.QUIET_ZONE_SIZE;i!==null&&(i.get(At.ERROR_CORRECTION)!==void 0&&(o=$e.fromString(i.get(At.ERROR_CORRECTION).toString())),i.get(At.MARGIN)!==void 0&&(l=Number.parseInt(i.get(At.MARGIN).toString(),10)));const c=rt.encode(e,o,i);return this.renderResult(c,t,n,l)}writeToDom(e,t,n,i,o=null){typeof e=="string"&&(e=document.querySelector(e));const l=this.write(t,n,i,o);e&&e.appendChild(l)}renderResult(e,t,n,i){const o=e.getMatrix();if(o===null)throw new W;const l=o.getWidth(),c=o.getHeight(),f=l+i*2,g=c+i*2,p=Math.max(t,f),C=Math.max(n,g),E=Math.min(Math.floor(p/f),Math.floor(C/g)),S=Math.floor((p-l*E)/2),O=Math.floor((C-c*E)/2),M=this.createSVGElement(p,C);for(let R=0,P=O;R<c;R++,P+=E)for(let Q=0,q=S;Q<l;Q++,q+=E)if(o.get(Q,R)===1){const Z=this.createSvgRectElement(q,P,E,E);M.appendChild(Z)}return M}createSVGElement(e,t){const n=document.createElementNS(ur.SVG_NS,"svg");return n.setAttributeNS(null,"height",e.toString()),n.setAttributeNS(null,"width",t.toString()),n}createSvgRectElement(e,t,n,i){const o=document.createElementNS(ur.SVG_NS,"rect");return o.setAttributeNS(null,"x",e.toString()),o.setAttributeNS(null,"y",t.toString()),o.setAttributeNS(null,"height",n.toString()),o.setAttributeNS(null,"width",i.toString()),o.setAttributeNS(null,"fill","#000000"),o}}ur.QUIET_ZONE_SIZE=4,ur.SVG_NS="http://www.w3.org/2000/svg";class _r{encode(e,t,n,i,o){if(e.length===0)throw new T("Found empty contents");if(t!==ue.QR_CODE)throw new T("Can only encode QR_CODE, but got "+t);if(n<0||i<0)throw new T(`Requested dimensions are too small: ${n}x${i}`);let l=$e.L,c=_r.QUIET_ZONE_SIZE;o!==null&&(o.get(At.ERROR_CORRECTION)!==void 0&&(l=$e.fromString(o.get(At.ERROR_CORRECTION).toString())),o.get(At.MARGIN)!==void 0&&(c=Number.parseInt(o.get(At.MARGIN).toString(),10)));const f=rt.encode(e,l,o);return _r.renderResult(f,n,i,c)}static renderResult(e,t,n,i){const o=e.getMatrix();if(o===null)throw new W;const l=o.getWidth(),c=o.getHeight(),f=l+i*2,g=c+i*2,p=Math.max(t,f),C=Math.max(n,g),E=Math.min(Math.floor(p/f),Math.floor(C/g)),S=Math.floor((p-l*E)/2),O=Math.floor((C-c*E)/2),M=new Xe(p,C);for(let R=0,P=O;R<c;R++,P+=E)for(let Q=0,q=S;Q<l;Q++,q+=E)o.get(Q,R)===1&&M.setRegion(q,P,E,E);return M}}_r.QUIET_ZONE_SIZE=4;class Kc{encode(e,t,n,i,o){let l;switch(t){case ue.QR_CODE:l=new _r;break;default:throw new T("No encoder available for format "+t)}return l.encode(e,t,n,i,o)}}class An extends De{constructor(e,t,n,i,o,l,c,f){if(super(l,c),this.yuvData=e,this.dataWidth=t,this.dataHeight=n,this.left=i,this.top=o,i+l>t||o+c>n)throw new T("Crop rectangle does not fit within image data.");f&&this.reverseHorizontal(l,c)}getRow(e,t){if(e<0||e>=this.getHeight())throw new T("Requested row is outside the image: "+e);const n=this.getWidth();(t==null||t.length<n)&&(t=new Uint8ClampedArray(n));const i=(e+this.top)*this.dataWidth+this.left;return J.arraycopy(this.yuvData,i,t,0,n),t}getMatrix(){const e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.yuvData;const n=e*t,i=new Uint8ClampedArray(n);let o=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return J.arraycopy(this.yuvData,o,i,0,n),i;for(let l=0;l<t;l++){const c=l*e;J.arraycopy(this.yuvData,o,i,c,e),o+=this.dataWidth}return i}isCropSupported(){return!0}crop(e,t,n,i){return new An(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+t,n,i,!1)}renderThumbnail(){const e=this.getWidth()/An.THUMBNAIL_SCALE_FACTOR,t=this.getHeight()/An.THUMBNAIL_SCALE_FACTOR,n=new Int32Array(e*t),i=this.yuvData;let o=this.top*this.dataWidth+this.left;for(let l=0;l<t;l++){const c=l*e;for(let f=0;f<e;f++){const g=i[o+f*An.THUMBNAIL_SCALE_FACTOR]&255;n[c+f]=4278190080|g*65793}o+=this.dataWidth*An.THUMBNAIL_SCALE_FACTOR}return n}getThumbnailWidth(){return this.getWidth()/An.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/An.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(e,t){const n=this.yuvData;for(let i=0,o=this.top*this.dataWidth+this.left;i<t;i++,o+=this.dataWidth){const l=o+e/2;for(let c=o,f=o+e-1;c<l;c++,f--){const g=n[c];n[c]=n[f],n[f]=g}}}invert(){return new lt(this)}}An.THUMBNAIL_SCALE_FACTOR=2;class bs extends De{constructor(e,t,n,i,o,l,c){if(super(t,n),this.dataWidth=i,this.dataHeight=o,this.left=l,this.top=c,e.BYTES_PER_ELEMENT===4){const f=t*n,g=new Uint8ClampedArray(f);for(let p=0;p<f;p++){const C=e[p],E=C>>16&255,S=C>>7&510,O=C&255;g[p]=(E+S+O)/4&255}this.luminances=g}else this.luminances=e;if(i===void 0&&(this.dataWidth=t),o===void 0&&(this.dataHeight=n),l===void 0&&(this.left=0),c===void 0&&(this.top=0),this.left+t>this.dataWidth||this.top+n>this.dataHeight)throw new T("Crop rectangle does not fit within image data.")}getRow(e,t){if(e<0||e>=this.getHeight())throw new T("Requested row is outside the image: "+e);const n=this.getWidth();(t==null||t.length<n)&&(t=new Uint8ClampedArray(n));const i=(e+this.top)*this.dataWidth+this.left;return J.arraycopy(this.luminances,i,t,0,n),t}getMatrix(){const e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.luminances;const n=e*t,i=new Uint8ClampedArray(n);let o=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return J.arraycopy(this.luminances,o,i,0,n),i;for(let l=0;l<t;l++){const c=l*e;J.arraycopy(this.luminances,o,i,c,e),o+=this.dataWidth}return i}isCropSupported(){return!0}crop(e,t,n,i){return new bs(this.luminances,n,i,this.dataWidth,this.dataHeight,this.left+e,this.top+t)}invert(){return new lt(this)}}class Vo extends V{static forName(e){return this.getCharacterSetECIByName(e)}}class Ss{}Ss.ISO_8859_1=V.ISO8859_1;class jo{isCompact(){return this.compact}setCompact(e){this.compact=e}getSize(){return this.size}setSize(e){this.size=e}getLayers(){return this.layers}setLayers(e){this.layers=e}getCodeWords(){return this.codeWords}setCodeWords(e){this.codeWords=e}getMatrix(){return this.matrix}setMatrix(e){this.matrix=e}}class Go{static singletonList(e){return[e]}static min(e,t){return e.sort(t)[0]}}class Qc{constructor(e){this.previous=e}getPrevious(){return this.previous}}class Nr extends Qc{constructor(e,t,n){super(e),this.value=t,this.bitCount=n}appendTo(e,t){e.appendBits(this.value,this.bitCount)}add(e,t){return new Nr(this,e,t)}addBinaryShift(e,t){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Nr(this,e,t)}toString(){let e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+ne.toBinaryString(e|1<<this.bitCount).substring(1)+">"}}class Ts extends Nr{constructor(e,t,n){super(e,0,0),this.binaryShiftStart=t,this.binaryShiftByteCount=n}appendTo(e,t){for(let n=0;n<this.binaryShiftByteCount;n++)(n===0||n===31&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):n===0?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(t[this.binaryShiftStart+n],8)}addBinaryShift(e,t){return new Ts(this,e,t)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function qc(A,e,t){return new Ts(A,e,t)}function Qr(A,e,t){return new Nr(A,e,t)}const Jc=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Zn=0,Oi=1,tn=2,Wo=3,Cn=4,$c=new Nr(null,0,0),_s=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function e1(A){for(let e of A)ce.fill(e,-1);return A[Zn][Cn]=0,A[Oi][Cn]=0,A[Oi][Zn]=28,A[Wo][Cn]=0,A[tn][Cn]=0,A[tn][Zn]=15,A}const zo=e1(ce.createInt32Array(6,6));class mn{constructor(e,t,n,i){this.token=e,this.mode=t,this.binaryShiftByteCount=n,this.bitCount=i}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(e,t){let n=this.bitCount,i=this.token;if(e!==this.mode){let l=_s[this.mode][e];i=Qr(i,l&65535,l>>16),n+=l>>16}let o=e===tn?4:5;return i=Qr(i,t,o),new mn(i,e,0,n+o)}shiftAndAppend(e,t){let n=this.token,i=this.mode===tn?4:5;return n=Qr(n,zo[this.mode][e],i),n=Qr(n,t,5),new mn(n,this.mode,0,this.bitCount+i+5)}addBinaryShiftChar(e){let t=this.token,n=this.mode,i=this.bitCount;if(this.mode===Cn||this.mode===tn){let c=_s[n][Zn];t=Qr(t,c&65535,c>>16),i+=c>>16,n=Zn}let o=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,l=new mn(t,n,this.binaryShiftByteCount+1,i+o);return l.binaryShiftByteCount===2078&&(l=l.endBinaryShift(e+1)),l}endBinaryShift(e){if(this.binaryShiftByteCount===0)return this;let t=this.token;return t=qc(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new mn(t,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(e){let t=this.bitCount+(_s[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=mn.calculateBinaryShiftCost(e)-mn.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount}toBitArray(e){let t=[];for(let i=this.endBinaryShift(e.length).token;i!==null;i=i.getPrevious())t.unshift(i);let n=new te;for(const i of t)i.appendTo(n,e);return n}toString(){return he.format("%s bits=%d bytes=%d",Jc[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0}}mn.INITIAL_STATE=new mn($c,Zn,0,0);function t1(A){const e=he.getCharCode(" "),t=he.getCharCode("."),n=he.getCharCode(",");A[Zn][e]=1;const i=he.getCharCode("Z"),o=he.getCharCode("A");for(let E=o;E<=i;E++)A[Zn][E]=E-o+2;A[Oi][e]=1;const l=he.getCharCode("z"),c=he.getCharCode("a");for(let E=c;E<=l;E++)A[Oi][E]=E-c+2;A[tn][e]=1;const f=he.getCharCode("9"),g=he.getCharCode("0");for(let E=g;E<=f;E++)A[tn][E]=E-g+2;A[tn][n]=12,A[tn][t]=13;const p=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let E=0;E<p.length;E++)A[Wo][he.getCharCode(p[E])]=E;const C=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let E=0;E<C.length;E++)he.getCharCode(C[E])>0&&(A[Cn][he.getCharCode(C[E])]=E);return A}const Ns=t1(ce.createInt32Array(5,256));class qr{constructor(e){this.text=e}encode(){const e=he.getCharCode(" "),t=he.getCharCode(`
`);let n=Go.singletonList(mn.INITIAL_STATE);for(let o=0;o<this.text.length;o++){let l,c=o+1<this.text.length?this.text[o+1]:0;switch(this.text[o]){case he.getCharCode("\r"):l=c===t?2:0;break;case he.getCharCode("."):l=c===e?3:0;break;case he.getCharCode(","):l=c===e?4:0;break;case he.getCharCode(":"):l=c===e?5:0;break;default:l=0}l>0?(n=qr.updateStateListForPair(n,o,l),o++):n=this.updateStateListForChar(n,o)}return Go.min(n,(o,l)=>o.getBitCount()-l.getBitCount()).toBitArray(this.text)}updateStateListForChar(e,t){const n=[];for(let i of e)this.updateStateForChar(i,t,n);return qr.simplifyStates(n)}updateStateForChar(e,t,n){let i=this.text[t]&255,o=Ns[e.getMode()][i]>0,l=null;for(let c=0;c<=Cn;c++){let f=Ns[c][i];if(f>0){if(l==null&&(l=e.endBinaryShift(t)),!o||c===e.getMode()||c===tn){const g=l.latchAndAppend(c,f);n.push(g)}if(!o&&zo[e.getMode()][c]>=0){const g=l.shiftAndAppend(c,f);n.push(g)}}}if(e.getBinaryShiftByteCount()>0||Ns[e.getMode()][i]===0){let c=e.addBinaryShiftChar(t);n.push(c)}}static updateStateListForPair(e,t,n){const i=[];for(let o of e)this.updateStateForPair(o,t,n,i);return this.simplifyStates(i)}static updateStateForPair(e,t,n,i){let o=e.endBinaryShift(t);if(i.push(o.latchAndAppend(Cn,n)),e.getMode()!==Cn&&i.push(o.shiftAndAppend(Cn,n)),n===3||n===4){let l=o.latchAndAppend(tn,16-n).latchAndAppend(tn,1);i.push(l)}if(e.getBinaryShiftByteCount()>0){let l=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);i.push(l)}}static simplifyStates(e){let t=[];for(const n of e){let i=!0;for(const o of t){if(o.isBetterThanOrEqualTo(n)){i=!1;break}n.isBetterThanOrEqualTo(o)&&(t=t.filter(l=>l!==o))}i&&t.push(n)}return t}}class Pe{constructor(){}static encodeBytes(e){return Pe.encode(e,Pe.DEFAULT_EC_PERCENT,Pe.DEFAULT_AZTEC_LAYERS)}static encode(e,t,n){let i=new qr(e).encode(),o=ne.truncDivision(i.getSize()*t,100)+11,l=i.getSize()+o,c,f,g,p,C;if(n!==Pe.DEFAULT_AZTEC_LAYERS){if(c=n<0,f=Math.abs(n),f>(c?Pe.MAX_NB_BITS_COMPACT:Pe.MAX_NB_BITS))throw new T(he.format("Illegal value %s for layers",n));g=Pe.totalBitsInLayer(f,c),p=Pe.WORD_SIZE[f];let Z=g-g%p;if(C=Pe.stuffBits(i,p),C.getSize()+o>Z)throw new T("Data to large for user specified layer");if(c&&C.getSize()>p*64)throw new T("Data to large for user specified layer")}else{p=0,C=null;for(let Z=0;;Z++){if(Z>Pe.MAX_NB_BITS)throw new T("Data too large for an Aztec code");if(c=Z<=3,f=c?Z+1:Z,g=Pe.totalBitsInLayer(f,c),l>g)continue;(C==null||p!==Pe.WORD_SIZE[f])&&(p=Pe.WORD_SIZE[f],C=Pe.stuffBits(i,p));let ve=g-g%p;if(!(c&&C.getSize()>p*64)&&C.getSize()+o<=ve)break}}let E=Pe.generateCheckWords(C,g,p),S=C.getSize()/p,O=Pe.generateModeMessage(c,f,S),M=(c?11:14)+f*4,R=new Int32Array(M),P;if(c){P=M;for(let Z=0;Z<R.length;Z++)R[Z]=Z}else{P=M+1+2*ne.truncDivision(ne.truncDivision(M,2)-1,15);let Z=ne.truncDivision(M,2),ve=ne.truncDivision(P,2);for(let ye=0;ye<Z;ye++){let Vt=ye+ne.truncDivision(ye,15);R[Z-ye-1]=ve-Vt-1,R[Z+ye]=ve+Vt+1}}let Q=new Xe(P);for(let Z=0,ve=0;Z<f;Z++){let ye=(f-Z)*4+(c?9:12);for(let Vt=0;Vt<ye;Vt++){let ln=Vt*2;for(let jt=0;jt<2;jt++)E.get(ve+ln+jt)&&Q.set(R[Z*2+jt],R[Z*2+Vt]),E.get(ve+ye*2+ln+jt)&&Q.set(R[Z*2+Vt],R[M-1-Z*2-jt]),E.get(ve+ye*4+ln+jt)&&Q.set(R[M-1-Z*2-jt],R[M-1-Z*2-Vt]),E.get(ve+ye*6+ln+jt)&&Q.set(R[M-1-Z*2-Vt],R[Z*2+jt])}ve+=ye*8}if(Pe.drawModeMessage(Q,c,P,O),c)Pe.drawBullsEye(Q,ne.truncDivision(P,2),5);else{Pe.drawBullsEye(Q,ne.truncDivision(P,2),7);for(let Z=0,ve=0;Z<ne.truncDivision(M,2)-1;Z+=15,ve+=16)for(let ye=ne.truncDivision(P,2)&1;ye<P;ye+=2)Q.set(ne.truncDivision(P,2)-ve,ye),Q.set(ne.truncDivision(P,2)+ve,ye),Q.set(ye,ne.truncDivision(P,2)-ve),Q.set(ye,ne.truncDivision(P,2)+ve)}let q=new jo;return q.setCompact(c),q.setSize(P),q.setLayers(f),q.setCodeWords(S),q.setMatrix(Q),q}static drawBullsEye(e,t,n){for(let i=0;i<n;i+=2)for(let o=t-i;o<=t+i;o++)e.set(o,t-i),e.set(o,t+i),e.set(t-i,o),e.set(t+i,o);e.set(t-n,t-n),e.set(t-n+1,t-n),e.set(t-n,t-n+1),e.set(t+n,t-n),e.set(t+n,t-n+1),e.set(t+n,t+n-1)}static generateModeMessage(e,t,n){let i=new te;return e?(i.appendBits(t-1,2),i.appendBits(n-1,6),i=Pe.generateCheckWords(i,28,4)):(i.appendBits(t-1,5),i.appendBits(n-1,11),i=Pe.generateCheckWords(i,40,4)),i}static drawModeMessage(e,t,n,i){let o=ne.truncDivision(n,2);if(t)for(let l=0;l<7;l++){let c=o-3+l;i.get(l)&&e.set(c,o-5),i.get(l+7)&&e.set(o+5,c),i.get(20-l)&&e.set(c,o+5),i.get(27-l)&&e.set(o-5,c)}else for(let l=0;l<10;l++){let c=o-5+l+ne.truncDivision(l,5);i.get(l)&&e.set(c,o-7),i.get(l+10)&&e.set(o+7,c),i.get(29-l)&&e.set(c,o+7),i.get(39-l)&&e.set(o-7,c)}}static generateCheckWords(e,t,n){let i=e.getSize()/n,o=new ys(Pe.getGF(n)),l=ne.truncDivision(t,n),c=Pe.bitsToWords(e,n,l);o.encode(c,l-i);let f=t%n,g=new te;g.appendBits(0,f);for(const p of Array.from(c))g.appendBits(p,n);return g}static bitsToWords(e,t,n){let i=new Int32Array(n),o,l;for(o=0,l=e.getSize()/t;o<l;o++){let c=0;for(let f=0;f<t;f++)c|=e.get(o*t+f)?1<<t-f-1:0;i[o]=c}return i}static getGF(e){switch(e){case 4:return N.AZTEC_PARAM;case 6:return N.AZTEC_DATA_6;case 8:return N.AZTEC_DATA_8;case 10:return N.AZTEC_DATA_10;case 12:return N.AZTEC_DATA_12;default:throw new T("Unsupported word size "+e)}}static stuffBits(e,t){let n=new te,i=e.getSize(),o=(1<<t)-2;for(let l=0;l<i;l+=t){let c=0;for(let f=0;f<t;f++)(l+f>=i||e.get(l+f))&&(c|=1<<t-1-f);(c&o)===o?(n.appendBits(c&o,t),l--):c&o?n.appendBits(c,t):(n.appendBits(c|1,t),l--)}return n}static totalBitsInLayer(e,t){return((t?88:112)+16*e)*e}}Pe.DEFAULT_EC_PERCENT=33,Pe.DEFAULT_AZTEC_LAYERS=0,Pe.MAX_NB_BITS=32,Pe.MAX_NB_BITS_COMPACT=4,Pe.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Mi{encode(e,t,n,i){return this.encodeWithHints(e,t,n,i,null)}encodeWithHints(e,t,n,i,o){let l=Ss.ISO_8859_1,c=Pe.DEFAULT_EC_PERCENT,f=Pe.DEFAULT_AZTEC_LAYERS;return o!=null&&(o.has(At.CHARACTER_SET)&&(l=Vo.forName(o.get(At.CHARACTER_SET).toString())),o.has(At.ERROR_CORRECTION)&&(c=ne.parseInt(o.get(At.ERROR_CORRECTION).toString())),o.has(At.AZTEC_LAYERS)&&(f=ne.parseInt(o.get(At.AZTEC_LAYERS).toString()))),Mi.encodeLayers(e,t,n,i,l,c,f)}static encodeLayers(e,t,n,i,o,l,c){if(t!==ue.AZTEC)throw new T("Can only encode AZTEC, but got "+t);let f=Pe.encode(he.getBytes(e,o),l,c);return Mi.renderResult(f,n,i)}static renderResult(e,t,n){let i=e.getMatrix();if(i==null)throw new W;let o=i.getWidth(),l=i.getHeight(),c=Math.max(t,o),f=Math.max(n,l),g=Math.min(c/o,f/l),p=(c-o*g)/2,C=(f-l*g)/2,E=new Xe(c,f);for(let S=0,O=C;S<l;S++,O+=g)for(let M=0,R=p;M<o;M++,R+=g)i.get(M,S)&&E.setRegion(R,O,g,g);return E}}a.AbstractExpandedDecoder=ds,a.ArgumentException=y,a.ArithmeticException=_,a.AztecCode=jo,a.AztecCodeReader=vt,a.AztecCodeWriter=Mi,a.AztecDecoder=X,a.AztecDetector=It,a.AztecDetectorResult=ie,a.AztecEncoder=Pe,a.AztecHighLevelEncoder=qr,a.AztecPoint=He,a.BarcodeFormat=ue,a.Binarizer=re,a.BinaryBitmap=U,a.BitArray=te,a.BitMatrix=Xe,a.BitSource=ws,a.BrowserAztecCodeReader=qt,a.BrowserBarcodeReader=Dc,a.BrowserCodeReader=gn,a.BrowserDatamatrixCodeReader=Lc,a.BrowserMultiFormatReader=zc,a.BrowserPDF417Reader=Yc,a.BrowserQRCodeReader=Xc,a.BrowserQRCodeSvgWriter=ur,a.CharacterSetECI=V,a.ChecksumException=H,a.Code128Reader=ee,a.Code39Reader=Be,a.DataMatrixDecodedBitStreamParser=Wn,a.DataMatrixReader=zn,a.DecodeHintType=Te,a.DecoderResult=Vn,a.DefaultGridSampler=We,a.DetectorResult=de,a.EAN13Reader=sr,a.EncodeHintType=At,a.Exception=w,a.FormatException=k,a.GenericGF=N,a.GenericGFPoly=Dt,a.GlobalHistogramBinarizer=_e,a.GridSampler=we,a.GridSamplerInstance=Oe,a.HTMLCanvasElementLuminanceSource=pt,a.HybridBinarizer=se,a.ITFReader=Me,a.IllegalArgumentException=T,a.IllegalStateException=W,a.InvertedLuminanceSource=lt,a.LuminanceSource=De,a.MathUtils=G,a.MultiFormatOneDReader=Sr,a.MultiFormatReader=Ho,a.MultiFormatWriter=Kc,a.NotFoundException=L,a.OneDReader=Je,a.PDF417DecodedBitStreamParser=B,a.PDF417DecoderErrorCorrection=Lo,a.PDF417Reader=bt,a.PDF417ResultMetadata=Po,a.PerspectiveTransform=Ce,a.PlanarYUVLuminanceSource=An,a.QRCodeByteMatrix=Ni,a.QRCodeDataMask=$t,a.QRCodeDecodedBitStreamParser=ot,a.QRCodeDecoderErrorCorrectionLevel=$e,a.QRCodeDecoderFormatInformation=_t,a.QRCodeEncoder=rt,a.QRCodeEncoderQRCode=cr,a.QRCodeMaskUtil=ft,a.QRCodeMatrixUtil=xe,a.QRCodeMode=ge,a.QRCodeReader=Yn,a.QRCodeVersion=fe,a.QRCodeWriter=_r,a.RGBLuminanceSource=bs,a.RSS14Reader=ut,a.RSSExpandedReader=z,a.ReaderException=_i,a.ReedSolomonDecoder=Y,a.ReedSolomonEncoder=ys,a.ReedSolomonException=F,a.Result=Et,a.ResultMetadataType=ct,a.ResultPoint=v,a.StringUtils=he,a.UnsupportedOperationException=gt,a.VideoInputDevice=dn,a.WhiteRectangleDetector=le,a.WriterException=Ze,a.ZXingArrays=ce,a.ZXingCharset=Vo,a.ZXingInteger=ne,a.ZXingStandardCharsets=Ss,a.ZXingStringBuilder=Re,a.ZXingStringEncoding=it,a.ZXingSystem=J,a.createAbstractExpandedDecoder=Do,Object.defineProperty(a,"__esModule",{value:!0})})})(eo,eo.exports);var at=eo.exports;const Lu=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));var Na=function(){function r(s,a,u){if(this.formatMap=new Map([[ae.QR_CODE,at.BarcodeFormat.QR_CODE],[ae.AZTEC,at.BarcodeFormat.AZTEC],[ae.CODABAR,at.BarcodeFormat.CODABAR],[ae.CODE_39,at.BarcodeFormat.CODE_39],[ae.CODE_93,at.BarcodeFormat.CODE_93],[ae.CODE_128,at.BarcodeFormat.CODE_128],[ae.DATA_MATRIX,at.BarcodeFormat.DATA_MATRIX],[ae.MAXICODE,at.BarcodeFormat.MAXICODE],[ae.ITF,at.BarcodeFormat.ITF],[ae.EAN_13,at.BarcodeFormat.EAN_13],[ae.EAN_8,at.BarcodeFormat.EAN_8],[ae.PDF_417,at.BarcodeFormat.PDF_417],[ae.RSS_14,at.BarcodeFormat.RSS_14],[ae.RSS_EXPANDED,at.BarcodeFormat.RSS_EXPANDED],[ae.UPC_A,at.BarcodeFormat.UPC_A],[ae.UPC_E,at.BarcodeFormat.UPC_E],[ae.UPC_EAN_EXTENSION,at.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!Lu)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=a,this.logger=u;var h=this.createZXingFormats(s),d=new Map;d.set(at.DecodeHintType.POSSIBLE_FORMATS,h),d.set(at.DecodeHintType.TRY_HARDER,!1),this.hints=d}return r.prototype.decodeAsync=function(s){var a=this;return new Promise(function(u,h){try{u(a.decode(s))}catch(d){h(d)}})},r.prototype.decode=function(s){var a=new at.MultiFormatReader(this.verbose,this.hints),u=new at.HTMLCanvasElementLuminanceSource(s),h=new at.BinaryBitmap(new at.HybridBinarizer(u)),d=a.decode(h);return{text:d.text,format:gc.create(this.toHtml5QrcodeSupportedFormats(d.format)),debugData:this.createDebugData()}},r.prototype.createReverseFormatMap=function(){var s=new Map;return this.formatMap.forEach(function(a,u,h){s.set(a,u)}),s},r.prototype.toHtml5QrcodeSupportedFormats=function(s){if(!this.reverseFormatMap.has(s))throw"reverseFormatMap doesn't have ".concat(s);return this.reverseFormatMap.get(s)},r.prototype.createZXingFormats=function(s){for(var a=[],u=0,h=s;u<h.length;u++){var d=h[u];this.formatMap.has(d)?a.push(this.formatMap.get(d)):this.logger.logError("".concat(d," is not supported by")+"ZXingHtml5QrcodeShim")}return a},r.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},r}(),Bu=function(r,s,a,u){function h(d){return d instanceof a?d:new a(function(x){x(d)})}return new(a||(a=Promise))(function(d,x){function m(y){try{w(u.next(y))}catch(T){x(T)}}function I(y){try{w(u.throw(y))}catch(T){x(T)}}function w(y){y.done?d(y.value):h(y.value).then(m,I)}w((u=u.apply(r,s||[])).next())})},Pu=function(r,s){var a={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},u,h,d,x;return x={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function m(w){return function(y){return I([w,y])}}function I(w){if(u)throw new TypeError("Generator is already executing.");for(;x&&(x=0,w[0]&&(a=0)),a;)try{if(u=1,h&&(d=w[0]&2?h.return:w[0]?h.throw||((d=h.return)&&d.call(h),0):h.next)&&!(d=d.call(h,w[1])).done)return d;switch(h=0,d&&(w=[w[0]&2,d.value]),w[0]){case 0:case 1:d=w;break;case 4:return a.label++,{value:w[1],done:!1};case 5:a.label++,h=w[1],w=[0];continue;case 7:w=a.ops.pop(),a.trys.pop();continue;default:if(d=a.trys,!(d=d.length>0&&d[d.length-1])&&(w[0]===6||w[0]===2)){a=0;continue}if(w[0]===3&&(!d||w[1]>d[0]&&w[1]<d[3])){a.label=w[1];break}if(w[0]===6&&a.label<d[1]){a.label=d[1],d=w;break}if(d&&a.label<d[2]){a.label=d[2],a.ops.push(w);break}d[2]&&a.ops.pop(),a.trys.pop();continue}w=s.call(r,a)}catch(y){w=[6,y],h=0}finally{u=d=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},Oa=function(){function r(s,a,u){if(this.formatMap=new Map([[ae.QR_CODE,"qr_code"],[ae.AZTEC,"aztec"],[ae.CODABAR,"codabar"],[ae.CODE_39,"code_39"],[ae.CODE_93,"code_93"],[ae.CODE_128,"code_128"],[ae.DATA_MATRIX,"data_matrix"],[ae.ITF,"itf"],[ae.EAN_13,"ean_13"],[ae.EAN_8,"ean_8"],[ae.PDF_417,"pdf417"],[ae.UPC_A,"upc_a"],[ae.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!r.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=a,this.logger=u;var h=this.createBarcodeDetectorFormats(s);if(this.detector=new BarcodeDetector(h),!this.detector)throw"BarcodeDetector detector not supported"}return r.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var s=new BarcodeDetector({formats:["qr_code"]});return typeof s<"u"},r.prototype.decodeAsync=function(s){return Bu(this,void 0,void 0,function(){var a,u;return Pu(this,function(h){switch(h.label){case 0:return[4,this.detector.detect(s)];case 1:if(a=h.sent(),!a||a.length===0)throw"No barcode or QR code detected.";return u=this.selectLargestBarcode(a),[2,{text:u.rawValue,format:gc.create(this.toHtml5QrcodeSupportedFormats(u.format)),debugData:this.createDebugData()}]}})})},r.prototype.selectLargestBarcode=function(s){for(var a=null,u=0,h=0,d=s;h<d.length;h++){var x=d[h],m=x.boundingBox.width*x.boundingBox.height;m>u&&(u=m,a=x)}if(!a)throw"No largest barcode found";return a},r.prototype.createBarcodeDetectorFormats=function(s){for(var a=[],u=0,h=s;u<h.length;u++){var d=h[u];this.formatMap.has(d)?a.push(this.formatMap.get(d)):this.logger.warn("".concat(d," is not supported by")+"BarcodeDetectorDelegate")}return{formats:a}},r.prototype.toHtml5QrcodeSupportedFormats=function(s){if(!this.reverseFormatMap.has(s))throw"reverseFormatMap doesn't have ".concat(s);return this.reverseFormatMap.get(s)},r.prototype.createReverseFormatMap=function(){var s=new Map;return this.formatMap.forEach(function(a,u,h){s.set(a,u)}),s},r.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},r}(),Ma=function(r,s,a,u){function h(d){return d instanceof a?d:new a(function(x){x(d)})}return new(a||(a=Promise))(function(d,x){function m(y){try{w(u.next(y))}catch(T){x(T)}}function I(y){try{w(u.throw(y))}catch(T){x(T)}}function w(y){y.done?d(y.value):h(y.value).then(m,I)}w((u=u.apply(r,s||[])).next())})},Ra=function(r,s){var a={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},u,h,d,x;return x={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function m(w){return function(y){return I([w,y])}}function I(w){if(u)throw new TypeError("Generator is already executing.");for(;x&&(x=0,w[0]&&(a=0)),a;)try{if(u=1,h&&(d=w[0]&2?h.return:w[0]?h.throw||((d=h.return)&&d.call(h),0):h.next)&&!(d=d.call(h,w[1])).done)return d;switch(h=0,d&&(w=[w[0]&2,d.value]),w[0]){case 0:case 1:d=w;break;case 4:return a.label++,{value:w[1],done:!1};case 5:a.label++,h=w[1],w=[0];continue;case 7:w=a.ops.pop(),a.trys.pop();continue;default:if(d=a.trys,!(d=d.length>0&&d[d.length-1])&&(w[0]===6||w[0]===2)){a=0;continue}if(w[0]===3&&(!d||w[1]>d[0]&&w[1]<d[3])){a.label=w[1];break}if(w[0]===6&&a.label<d[1]){a.label=d[1],d=w;break}if(d&&a.label<d[2]){a.label=d[2],a.ops.push(w);break}d[2]&&a.ops.pop(),a.trys.pop();continue}w=s.call(r,a)}catch(y){w=[6,y],h=0}finally{u=d=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},Fu=function(){function r(s,a,u,h){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=u,a&&Oa.isSupported()?(this.primaryDecoder=new Oa(s,u,h),this.secondaryDecoder=new Na(s,u,h)):this.primaryDecoder=new Na(s,u,h)}return r.prototype.decodeAsync=function(s){return Ma(this,void 0,void 0,function(){var a;return Ra(this,function(u){switch(u.label){case 0:a=performance.now(),u.label=1;case 1:return u.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(s)];case 2:return[2,u.sent()];case 3:return this.possiblyLogPerformance(a),[7];case 4:return[2]}})})},r.prototype.decodeRobustlyAsync=function(s){return Ma(this,void 0,void 0,function(){var a,u;return Ra(this,function(h){switch(h.label){case 0:a=performance.now(),h.label=1;case 1:return h.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(s)];case 2:return[2,h.sent()];case 3:if(u=h.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(s)];throw u;case 4:return this.possiblyLogPerformance(a),[7];case 5:return[2]}})})},r.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},r.prototype.possiblyLogPerformance=function(s){if(this.verbose){var a=performance.now()-s;this.executionResults.push(a),this.executions++,this.possiblyFlushPerformanceReport()}},r.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var s=0,a=0,u=this.executionResults;a<u.length;a++){var h=u[a];s+=h}var d=s/this.executionResults.length;console.log("".concat(d," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},r}(),So=function(){var r=function(s,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,h){u.__proto__=h}||function(u,h){for(var d in h)Object.prototype.hasOwnProperty.call(h,d)&&(u[d]=h[d])},r(s,a)};return function(s,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");r(s,a);function u(){this.constructor=s}s.prototype=a===null?Object.create(a):(u.prototype=a.prototype,new u)}}(),Zi=function(r,s,a,u){function h(d){return d instanceof a?d:new a(function(x){x(d)})}return new(a||(a=Promise))(function(d,x){function m(y){try{w(u.next(y))}catch(T){x(T)}}function I(y){try{w(u.throw(y))}catch(T){x(T)}}function w(y){y.done?d(y.value):h(y.value).then(m,I)}w((u=u.apply(r,s||[])).next())})},Ki=function(r,s){var a={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},u,h,d,x;return x={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function m(w){return function(y){return I([w,y])}}function I(w){if(u)throw new TypeError("Generator is already executing.");for(;x&&(x=0,w[0]&&(a=0)),a;)try{if(u=1,h&&(d=w[0]&2?h.return:w[0]?h.throw||((d=h.return)&&d.call(h),0):h.next)&&!(d=d.call(h,w[1])).done)return d;switch(h=0,d&&(w=[w[0]&2,d.value]),w[0]){case 0:case 1:d=w;break;case 4:return a.label++,{value:w[1],done:!1};case 5:a.label++,h=w[1],w=[0];continue;case 7:w=a.ops.pop(),a.trys.pop();continue;default:if(d=a.trys,!(d=d.length>0&&d[d.length-1])&&(w[0]===6||w[0]===2)){a=0;continue}if(w[0]===3&&(!d||w[1]>d[0]&&w[1]<d[3])){a.label=w[1];break}if(w[0]===6&&a.label<d[1]){a.label=d[1],d=w;break}if(d&&a.label<d[2]){a.label=d[2],a.ops.push(w);break}d[2]&&a.ops.pop(),a.trys.pop();continue}w=s.call(r,a)}catch(y){w=[6,y],h=0}finally{u=d=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},Ac=function(){function r(s,a){this.name=s,this.track=a}return r.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},r.prototype.apply=function(s){var a={};a[this.name]=s;var u={advanced:[a]};return this.track.applyConstraints(u)},r.prototype.value=function(){var s=this.track.getSettings();if(this.name in s){var a=s[this.name];return a}return null},r}(),ku=function(r){So(s,r);function s(a,u){return r.call(this,a,u)||this}return s.prototype.min=function(){return this.getCapabilities().min},s.prototype.max=function(){return this.getCapabilities().max},s.prototype.step=function(){return this.getCapabilities().step},s.prototype.apply=function(a){var u={};u[this.name]=a;var h={advanced:[u]};return this.track.applyConstraints(h)},s.prototype.getCapabilities=function(){this.failIfNotSupported();var a=this.track.getCapabilities(),u=a[this.name];return{min:u.min,max:u.max,step:u.step}},s.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},s}(Ac),Uu=function(r){So(s,r);function s(a){return r.call(this,"zoom",a)||this}return s}(ku),Hu=function(r){So(s,r);function s(a){return r.call(this,"torch",a)||this}return s}(Ac),Vu=function(){function r(s){this.track=s}return r.prototype.zoomFeature=function(){return new Uu(this.track)},r.prototype.torchFeature=function(){return new Hu(this.track)},r}(),ju=function(){function r(s,a,u){this.isClosed=!1,this.parentElement=s,this.mediaStream=a,this.callbacks=u,this.surface=this.createVideoElement(this.parentElement.clientWidth),s.append(this.surface)}return r.prototype.createVideoElement=function(s){var a=document.createElement("video");return a.style.width="".concat(s,"px"),a.style.display="block",a.muted=!0,a.setAttribute("muted","true"),a.playsInline=!0,a},r.prototype.setupSurface=function(){var s=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var a=function(){var u=s.surface.clientWidth,h=s.surface.clientHeight;s.callbacks.onRenderSurfaceReady(u,h),s.surface.removeEventListener("playing",a)};this.surface.addEventListener("playing",a),this.surface.srcObject=this.mediaStream,this.surface.play()},r.create=function(s,a,u,h){return Zi(this,void 0,void 0,function(){var d,x;return Ki(this,function(m){switch(m.label){case 0:return d=new r(s,a,h),u.aspectRatio?(x={aspectRatio:u.aspectRatio},[4,d.getFirstTrackOrFail().applyConstraints(x)]):[3,2];case 1:m.sent(),m.label=2;case 2:return d.setupSurface(),[2,d]}})})},r.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},r.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},r.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},r.prototype.resume=function(s){this.failIfClosed();var a=this,u=function(){setTimeout(s,200),a.surface.removeEventListener("playing",u)};this.surface.addEventListener("playing",u),this.surface.play()},r.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},r.prototype.getSurface=function(){return this.failIfClosed(),this.surface},r.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},r.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},r.prototype.applyVideoConstraints=function(s){return Zi(this,void 0,void 0,function(){return Ki(this,function(a){if("aspectRatio"in s)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(s)]})})},r.prototype.close=function(){if(this.isClosed)return Promise.resolve();var s=this;return new Promise(function(a,u){var h=s.mediaStream.getVideoTracks(),d=h.length,x=0;s.mediaStream.getVideoTracks().forEach(function(m){s.mediaStream.removeTrack(m),m.stop(),++x,x>=d&&(s.isClosed=!0,s.parentElement.removeChild(s.surface),a())})})},r.prototype.getCapabilities=function(){return new Vu(this.getFirstTrackOrFail())},r}(),Gu=function(){function r(s){this.mediaStream=s}return r.prototype.render=function(s,a,u){return Zi(this,void 0,void 0,function(){return Ki(this,function(h){return[2,ju.create(s,this.mediaStream,a,u)]})})},r.create=function(s){return Zi(this,void 0,void 0,function(){var a,u;return Ki(this,function(h){switch(h.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return a={audio:!1,video:s},[4,navigator.mediaDevices.getUserMedia(a)];case 1:return u=h.sent(),[2,new r(u)]}})})},r}(),Da=function(r,s,a,u){function h(d){return d instanceof a?d:new a(function(x){x(d)})}return new(a||(a=Promise))(function(d,x){function m(y){try{w(u.next(y))}catch(T){x(T)}}function I(y){try{w(u.throw(y))}catch(T){x(T)}}function w(y){y.done?d(y.value):h(y.value).then(m,I)}w((u=u.apply(r,s||[])).next())})},va=function(r,s){var a={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},u,h,d,x;return x={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function m(w){return function(y){return I([w,y])}}function I(w){if(u)throw new TypeError("Generator is already executing.");for(;x&&(x=0,w[0]&&(a=0)),a;)try{if(u=1,h&&(d=w[0]&2?h.return:w[0]?h.throw||((d=h.return)&&d.call(h),0):h.next)&&!(d=d.call(h,w[1])).done)return d;switch(h=0,d&&(w=[w[0]&2,d.value]),w[0]){case 0:case 1:d=w;break;case 4:return a.label++,{value:w[1],done:!1};case 5:a.label++,h=w[1],w=[0];continue;case 7:w=a.ops.pop(),a.trys.pop();continue;default:if(d=a.trys,!(d=d.length>0&&d[d.length-1])&&(w[0]===6||w[0]===2)){a=0;continue}if(w[0]===3&&(!d||w[1]>d[0]&&w[1]<d[3])){a.label=w[1];break}if(w[0]===6&&a.label<d[1]){a.label=d[1],d=w;break}if(d&&a.label<d[2]){a.label=d[2],a.ops.push(w);break}d[2]&&a.ops.pop(),a.trys.pop();continue}w=s.call(r,a)}catch(y){w=[6,y],h=0}finally{u=d=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},Wu=function(){function r(){}return r.failIfNotSupported=function(){return Da(this,void 0,void 0,function(){return va(this,function(s){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new r]})})},r.prototype.create=function(s){return Da(this,void 0,void 0,function(){return va(this,function(a){return[2,Gu.create(s)]})})},r}(),zu=function(r,s,a,u){function h(d){return d instanceof a?d:new a(function(x){x(d)})}return new(a||(a=Promise))(function(d,x){function m(y){try{w(u.next(y))}catch(T){x(T)}}function I(y){try{w(u.throw(y))}catch(T){x(T)}}function w(y){y.done?d(y.value):h(y.value).then(m,I)}w((u=u.apply(r,s||[])).next())})},Yu=function(r,s){var a={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},u,h,d,x;return x={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function m(w){return function(y){return I([w,y])}}function I(w){if(u)throw new TypeError("Generator is already executing.");for(;x&&(x=0,w[0]&&(a=0)),a;)try{if(u=1,h&&(d=w[0]&2?h.return:w[0]?h.throw||((d=h.return)&&d.call(h),0):h.next)&&!(d=d.call(h,w[1])).done)return d;switch(h=0,d&&(w=[w[0]&2,d.value]),w[0]){case 0:case 1:d=w;break;case 4:return a.label++,{value:w[1],done:!1};case 5:a.label++,h=w[1],w=[0];continue;case 7:w=a.ops.pop(),a.trys.pop();continue;default:if(d=a.trys,!(d=d.length>0&&d[d.length-1])&&(w[0]===6||w[0]===2)){a=0;continue}if(w[0]===3&&(!d||w[1]>d[0]&&w[1]<d[3])){a.label=w[1];break}if(w[0]===6&&a.label<d[1]){a.label=d[1],d=w;break}if(d&&a.label<d[2]){a.label=d[2],a.ops.push(w);break}d[2]&&a.ops.pop(),a.trys.pop();continue}w=s.call(r,a)}catch(y){w=[6,y],h=0}finally{u=d=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},Xu=function(){function r(){}return r.retrieve=function(){if(navigator.mediaDevices)return r.getCamerasFromMediaDevices();var s=MediaStreamTrack;return MediaStreamTrack&&s.getSources?r.getCamerasFromMediaStreamTrack():r.rejectWithError()},r.rejectWithError=function(){var s=Br.unableToQuerySupportedDevices();return r.isHttpsOrLocalhost()||(s=Br.insecureContextCameraQueryError()),Promise.reject(s)},r.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var s=location.host.split(":")[0];return s==="127.0.0.1"||s==="localhost"},r.getCamerasFromMediaDevices=function(){return zu(this,void 0,void 0,function(){var s,a,u,h,d,x,m;return Yu(this,function(I){switch(I.label){case 0:return s=function(w){for(var y=w.getVideoTracks(),T=0,U=y;T<U.length;T++){var H=U[T];H.enabled=!1,H.stop(),w.removeTrack(H)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return a=I.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(u=I.sent(),h=[],d=0,x=u;d<x.length;d++)m=x[d],m.kind==="videoinput"&&h.push({id:m.deviceId,label:m.label});return s(a),[2,h]}})})},r.getCamerasFromMediaStreamTrack=function(){return new Promise(function(s,a){var u=function(d){for(var x=[],m=0,I=d;m<I.length;m++){var w=I[m];w.kind==="video"&&x.push({id:w.id,label:w.label})}s(x)},h=MediaStreamTrack;h.getSources(u)})},r}(),ht;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.NOT_STARTED=1]="NOT_STARTED",r[r.SCANNING=2]="SCANNING",r[r.PAUSED=3]="PAUSED"})(ht||(ht={}));var Zu=function(){function r(){this.state=ht.NOT_STARTED,this.onGoingTransactionNewState=ht.UNKNOWN}return r.prototype.directTransition=function(s){this.failIfTransitionOngoing(),this.validateTransition(s),this.state=s},r.prototype.startTransition=function(s){return this.failIfTransitionOngoing(),this.validateTransition(s),this.onGoingTransactionNewState=s,this},r.prototype.execute=function(){if(this.onGoingTransactionNewState===ht.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var s=this.onGoingTransactionNewState;this.onGoingTransactionNewState=ht.UNKNOWN,this.directTransition(s)},r.prototype.cancel=function(){if(this.onGoingTransactionNewState===ht.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=ht.UNKNOWN},r.prototype.getState=function(){return this.state},r.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==ht.UNKNOWN)throw"Cannot transition to a new state, already under transition"},r.prototype.validateTransition=function(s){switch(this.state){case ht.UNKNOWN:throw"Transition from unknown is not allowed";case ht.NOT_STARTED:this.failIfNewStateIs(s,[ht.PAUSED]);break;case ht.SCANNING:break;case ht.PAUSED:break}},r.prototype.failIfNewStateIs=function(s,a){for(var u=0,h=a;u<h.length;u++){var d=h[u];if(s===d)throw"Cannot transition from ".concat(this.state," to ").concat(s)}},r}(),Ku=function(){function r(s){this.stateManager=s}return r.prototype.startTransition=function(s){return this.stateManager.startTransition(s)},r.prototype.directTransition=function(s){this.stateManager.directTransition(s)},r.prototype.getState=function(){return this.stateManager.getState()},r.prototype.canScanFile=function(){return this.stateManager.getState()===ht.NOT_STARTED},r.prototype.isScanning=function(){return this.stateManager.getState()!==ht.NOT_STARTED},r.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===ht.SCANNING},r.prototype.isPaused=function(){return this.stateManager.getState()===ht.PAUSED},r}(),Qu=function(){function r(){}return r.create=function(){return new Ku(new Zu)},r}(),qu=function(){var r=function(s,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,h){u.__proto__=h}||function(u,h){for(var d in h)Object.prototype.hasOwnProperty.call(h,d)&&(u[d]=h[d])},r(s,a)};return function(s,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");r(s,a);function u(){this.constructor=s}s.prototype=a===null?Object.create(a):(u.prototype=a.prototype,new u)}}(),Xt=function(r){qu(s,r);function s(){return r!==null&&r.apply(this,arguments)||this}return s.DEFAULT_WIDTH=300,s.DEFAULT_WIDTH_OFFSET=2,s.FILE_SCAN_MIN_HEIGHT=300,s.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,s.MIN_QR_BOX_SIZE=50,s.SHADED_LEFT=1,s.SHADED_RIGHT=2,s.SHADED_TOP=3,s.SHADED_BOTTOM=4,s.SHADED_REGION_ELEMENT_ID="qr-shaded-region",s.VERBOSE=!1,s.BORDER_SHADER_DEFAULT_COLOR="#ffffff",s.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",s}(cn),Ju=function(){function r(s,a){this.logger=a,this.fps=Xt.SCAN_DEFAULT_FPS,s?(s.fps&&(this.fps=s.fps),this.disableFlip=s.disableFlip===!0,this.qrbox=s.qrbox,this.aspectRatio=s.aspectRatio,this.videoConstraints=s.videoConstraints):this.disableFlip=Xt.DEFAULT_DISABLE_FLIP}return r.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?wc.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},r.prototype.isShadedBoxEnabled=function(){return!bn(this.qrbox)},r.create=function(s,a){return new r(s,a)},r}(),La=function(){function r(s,a){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(s))throw"HTML Element with id=".concat(s," not found");this.elementId=s,this.verbose=!1;var u;typeof a=="boolean"?this.verbose=a===!0:a&&(u=a,this.verbose=u.verbose===!0,u.experimentalFeatures),this.logger=new pc(this.verbose),this.qrcode=new Fu(this.getSupportedFormats(a),this.getUseBarCodeDetectorIfSupported(u),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=Qu.create()}return r.prototype.start=function(s,a,u,h){var d=this;if(!s)throw"cameraIdOrConfig is required";if(!u||typeof u!="function")throw"qrCodeSuccessCallback is required and should be a function.";var x;h?x=h:x=this.verbose?this.logger.log:function(){};var m=Ju.create(a,this.logger);this.clearElement();var I=!1;m.videoConstraints&&(m.isMediaStreamConstraintsValid()?I=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var w=I,y=document.getElementById(this.elementId);y.clientWidth?y.clientWidth:Xt.DEFAULT_WIDTH,y.style.position="relative",this.shouldScan=!0,this.element=y;var T=this,U=this.stateManagerProxy.startTransition(ht.SCANNING);return new Promise(function(H,re){var J=w?m.videoConstraints:T.createVideoConstraints(s);if(!J){U.cancel(),re("videoConstraints should be defined");return}var Ie={};(!w||m.aspectRatio)&&(Ie.aspectRatio=m.aspectRatio);var pe={onRenderSurfaceReady:function(ce,ne){T.setupUi(ce,ne,m),T.isScanning=!0,T.foreverScan(m,u,x)}};Wu.failIfNotSupported().then(function(ce){ce.create(J).then(function(ne){return ne.render(d.element,Ie,pe).then(function(te){T.renderedCamera=te,U.execute(),H(null)}).catch(function(te){U.cancel(),re(te)})}).catch(function(ne){U.cancel(),re(Br.errorGettingUserMedia(ne))})}).catch(function(ce){U.cancel(),re(Br.cameraStreamingNotSupported())})})},r.prototype.pause=function(s){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(ht.PAUSED),this.showPausedState(),(bn(s)||s!==!0)&&(s=!1),s&&this.renderedCamera&&this.renderedCamera.pause()},r.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var s=this,a=function(){s.stateManagerProxy.directTransition(ht.SCANNING),s.hidePausedState()};if(!this.renderedCamera.isPaused()){a();return}this.renderedCamera.resume(function(){a()})},r.prototype.getState=function(){return this.stateManagerProxy.getState()},r.prototype.stop=function(){var s=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var a=this.stateManagerProxy.startTransition(ht.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var u=function(){if(s.element){var d=document.getElementById(Xt.SHADED_REGION_ELEMENT_ID);d&&s.element.removeChild(d)}},h=this;return this.renderedCamera.close().then(function(){return h.renderedCamera=null,h.element&&(h.element.removeChild(h.canvasElement),h.canvasElement=null),u(),h.qrRegion&&(h.qrRegion=null),h.context&&(h.context=null),a.execute(),h.hidePausedState(),h.isScanning=!1,Promise.resolve()})},r.prototype.scanFile=function(s,a){return this.scanFileV2(s,a).then(function(u){return u.decodedText})},r.prototype.scanFileV2=function(s,a){var u=this;if(!s||!(s instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(bn(a)&&(a=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(h,d){u.possiblyCloseLastScanImageFile(),u.clearElement(),u.lastScanImageFile=URL.createObjectURL(s);var x=new Image;x.onload=function(){var m=x.width,I=x.height,w=document.getElementById(u.elementId),y=w.clientWidth?w.clientWidth:Xt.DEFAULT_WIDTH,T=Math.max(w.clientHeight?w.clientHeight:I,Xt.FILE_SCAN_MIN_HEIGHT),U=u.computeCanvasDrawConfig(m,I,y,T);if(a){var H=u.createCanvasElement(y,T,"qr-canvas-visible");H.style.display="inline-block",w.appendChild(H);var re=H.getContext("2d");if(!re)throw"Unable to get 2d context from canvas";re.canvas.width=y,re.canvas.height=T,re.drawImage(x,0,0,m,I,U.x,U.y,U.width,U.height)}var J=Xt.FILE_SCAN_HIDDEN_CANVAS_PADDING,Ie=Math.max(x.width,U.width),pe=Math.max(x.height,U.height),ce=Ie+2*J,ne=pe+2*J,te=u.createCanvasElement(ce,ne);w.appendChild(te);var Ue=te.getContext("2d");if(!Ue)throw"Unable to get 2d context from canvas";Ue.canvas.width=ce,Ue.canvas.height=ne,Ue.drawImage(x,0,0,m,I,J,J,Ie,pe);try{u.qrcode.decodeRobustlyAsync(te).then(function(Te){h(Ta.createFromQrcodeResult(Te))}).catch(d)}catch(Te){d("QR code parse error, error = ".concat(Te))}},x.onerror=d,x.onabort=d,x.onstalled=d,x.onsuspend=d,x.src=URL.createObjectURL(s)})},r.prototype.clear=function(){this.clearElement()},r.getCameras=function(){return Xu.retrieve()},r.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},r.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},r.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},r.prototype.applyVideoConstraints=function(s){if(s){if(!wc.isMediaStreamConstraintsValid(s,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(s)},r.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},r.prototype.getSupportedFormats=function(s){var a=[ae.QR_CODE,ae.AZTEC,ae.CODABAR,ae.CODE_39,ae.CODE_93,ae.CODE_128,ae.DATA_MATRIX,ae.MAXICODE,ae.ITF,ae.EAN_13,ae.EAN_8,ae.PDF_417,ae.RSS_14,ae.RSS_EXPANDED,ae.UPC_A,ae.UPC_E,ae.UPC_EAN_EXTENSION];if(!s||typeof s=="boolean"||!s.formatsToSupport)return a;if(!Array.isArray(s.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(s.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var u=[],h=0,d=s.formatsToSupport;h<d.length;h++){var x=d[h];Du(x)?u.push(x):this.logger.warn("Invalid format: ".concat(x," passed in config, ignoring."))}if(u.length===0)throw"None of formatsToSupport match supported values.";return u},r.prototype.getUseBarCodeDetectorIfSupported=function(s){if(bn(s))return!0;if(!bn(s.useBarCodeDetectorIfSupported))return s.useBarCodeDetectorIfSupported!==!1;if(bn(s.experimentalFeatures))return!0;var a=s.experimentalFeatures;return bn(a.useBarCodeDetectorIfSupported)?!0:a.useBarCodeDetectorIfSupported!==!1},r.prototype.validateQrboxSize=function(s,a,u){var h=this,d=u.qrbox;this.validateQrboxConfig(d);var x=this.toQrdimensions(s,a,d),m=function(w){if(w<Xt.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Xt.MIN_QR_BOX_SIZE,"px.")},I=function(w){return w>s&&(h.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),w=s),w};m(x.width),m(x.height),x.width=I(x.width)},r.prototype.validateQrboxConfig=function(s){if(typeof s!="number"&&typeof s!="function"&&(s.width===void 0||s.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},r.prototype.toQrdimensions=function(s,a,u){if(typeof u=="number")return{width:u,height:u};if(typeof u=="function")try{return u(s,a)}catch(h){throw new Error("qrbox config was passed as a function but it failed with unknown error"+h)}return u},r.prototype.setupUi=function(s,a,u){u.isShadedBoxEnabled()&&this.validateQrboxSize(s,a,u);var h=bn(u.qrbox)?{width:s,height:a}:u.qrbox;this.validateQrboxConfig(h);var d=this.toQrdimensions(s,a,h);d.height>a&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var x=u.isShadedBoxEnabled()&&d.height<=a,m={x:0,y:0,width:s,height:a},I=x?this.getShadedRegionBounds(s,a,d):m,w=this.createCanvasElement(I.width,I.height),y={willReadFrequently:!0},T=w.getContext("2d",y);T.canvas.width=I.width,T.canvas.height=I.height,this.element.append(w),x&&this.possiblyInsertShadingElement(this.element,s,a,d),this.createScannerPausedUiElement(this.element),this.qrRegion=I,this.context=T,this.canvasElement=w},r.prototype.createScannerPausedUiElement=function(s){var a=document.createElement("div");a.innerText=Br.scannerPaused(),a.style.display="none",a.style.position="absolute",a.style.top="0px",a.style.zIndex="1",a.style.background="rgba(9, 9, 9, 0.46)",a.style.color="#FFECEC",a.style.textAlign="center",a.style.width="100%",s.appendChild(a),this.scannerPausedUiElement=a},r.prototype.scanContext=function(s,a){var u=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(h){return s(h.text,Ta.createFromQrcodeResult(h)),u.possiblyUpdateShaders(!0),!0}).catch(function(h){u.possiblyUpdateShaders(!1);var d=Br.codeParseError(h);return a(d,xc.createFrom(d)),!1})},r.prototype.foreverScan=function(s,a,u){var h=this;if(this.shouldScan&&this.renderedCamera){var d=this.renderedCamera.getSurface(),x=d.videoWidth/d.clientWidth,m=d.videoHeight/d.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var I=this.qrRegion.width*x,w=this.qrRegion.height*m,y=this.qrRegion.x*x,T=this.qrRegion.y*m;this.context.drawImage(d,y,T,I,w,0,0,this.qrRegion.width,this.qrRegion.height);var U=function(){h.foreverScanTimeout=setTimeout(function(){h.foreverScan(s,a,u)},h.getTimeoutFps(s.fps))};this.scanContext(a,u).then(function(H){!H&&s.disableFlip!==!0?(h.context.translate(h.context.canvas.width,0),h.context.scale(-1,1),h.scanContext(a,u).finally(function(){U()})):U()}).catch(function(H){h.logger.logError("Error happend while scanning context",H),U()})}},r.prototype.createVideoConstraints=function(s){if(typeof s=="string")return{deviceId:{exact:s}};if(typeof s=="object"){var a="facingMode",u="deviceId",h={user:!0,environment:!0},d="exact",x=function(re){if(re in h)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(re,"'")},m=Object.keys(s);if(m.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(m.length," keys");var I=Object.keys(s)[0];if(I!==a&&I!==u)throw"Only '".concat(a,"' and '").concat(u,"' ")+" are supported for 'cameraIdOrConfig'";if(I===a){var w=s.facingMode;if(typeof w=="string"){if(x(w))return{facingMode:w}}else if(typeof w=="object")if(d in w){if(x(w["".concat(d)]))return{facingMode:{exact:w["".concat(d)]}}}else throw"'facingMode' should be string or object with"+" ".concat(d," as key.");else{var y=typeof w;throw"Invalid type of 'facingMode' = ".concat(y)}}else{var T=s.deviceId;if(typeof T=="string")return{deviceId:T};if(typeof T=="object"){if(d in T)return{deviceId:{exact:T["".concat(d)]}};throw"'deviceId' should be string or object with"+" ".concat(d," as key.")}else{var U=typeof T;throw"Invalid type of 'deviceId' = ".concat(U)}}}var H=typeof s;throw"Invalid type of 'cameraIdOrConfig' = ".concat(H)},r.prototype.computeCanvasDrawConfig=function(s,a,u,h){if(s<=u&&a<=h){var d=(u-s)/2,x=(h-a)/2;return{x:d,y:x,width:s,height:a}}else{var m=s,I=a;return s>u&&(a=u/s*a,s=u),a>h&&(s=h/a*s,a=h),this.logger.log("Image downsampled from "+"".concat(m,"X").concat(I)+" to ".concat(s,"X").concat(a,".")),this.computeCanvasDrawConfig(s,a,u,h)}},r.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var s=document.getElementById(this.elementId);s&&(s.innerHTML="")},r.prototype.possiblyUpdateShaders=function(s){this.qrMatch!==s&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(a){a.style.backgroundColor=s?Xt.BORDER_SHADER_MATCH_COLOR:Xt.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=s)},r.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},r.prototype.createCanvasElement=function(s,a,u){var h=s,d=a,x=document.createElement("canvas");return x.style.width="".concat(h,"px"),x.style.height="".concat(d,"px"),x.style.display="none",x.id=bn(u)?"qr-canvas":u,x},r.prototype.getShadedRegionBounds=function(s,a,u){if(u.width>s||u.height>a)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(s-u.width)/2,y:(a-u.height)/2,width:u.width,height:u.height}},r.prototype.possiblyInsertShadingElement=function(s,a,u,h){if(!(a-h.width<1||u-h.height<1)){var d=document.createElement("div");d.style.position="absolute";var x=(a-h.width)/2,m=(u-h.height)/2;if(d.style.borderLeft="".concat(x,"px solid rgba(0, 0, 0, 0.48)"),d.style.borderRight="".concat(x,"px solid rgba(0, 0, 0, 0.48)"),d.style.borderTop="".concat(m,"px solid rgba(0, 0, 0, 0.48)"),d.style.borderBottom="".concat(m,"px solid rgba(0, 0, 0, 0.48)"),d.style.boxSizing="border-box",d.style.top="0px",d.style.bottom="0px",d.style.left="0px",d.style.right="0px",d.id="".concat(Xt.SHADED_REGION_ELEMENT_ID),a-h.width<11||u-h.height<11)this.hasBorderShaders=!1;else{var I=5,w=40;this.insertShaderBorders(d,w,I,-I,null,0,!0),this.insertShaderBorders(d,w,I,-I,null,0,!1),this.insertShaderBorders(d,w,I,null,-I,0,!0),this.insertShaderBorders(d,w,I,null,-I,0,!1),this.insertShaderBorders(d,I,w+I,-I,null,-I,!0),this.insertShaderBorders(d,I,w+I,null,-I,-I,!0),this.insertShaderBorders(d,I,w+I,-I,null,-I,!1),this.insertShaderBorders(d,I,w+I,null,-I,-I,!1),this.hasBorderShaders=!0}s.append(d)}},r.prototype.insertShaderBorders=function(s,a,u,h,d,x,m){var I=document.createElement("div");I.style.position="absolute",I.style.backgroundColor=Xt.BORDER_SHADER_DEFAULT_COLOR,I.style.width="".concat(a,"px"),I.style.height="".concat(u,"px"),h!==null&&(I.style.top="".concat(h,"px")),d!==null&&(I.style.bottom="".concat(d,"px")),m?I.style.left="".concat(x,"px"):I.style.right="".concat(x,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(I),s.appendChild(I)},r.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},r.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},r.prototype.getTimeoutFps=function(s){return 1e3/s},r}(),To="data:image/svg+xml;base64,",$u=To+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",ef=To+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",Ba=To+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",tf="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",Pa=function(){function r(){}return r.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},r}(),nf=function(){function r(){this.data=Pa.createDefault();var s=localStorage.getItem(r.LOCAL_STORAGE_KEY);s?this.data=JSON.parse(s):this.reset()}return r.prototype.hasCameraPermissions=function(){return this.data.hasPermission},r.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},r.prototype.setHasPermission=function(s){this.data.hasPermission=s,this.flush()},r.prototype.setLastUsedCameraId=function(s){this.data.lastUsedCameraId=s,this.flush()},r.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},r.prototype.reset=function(){this.data=Pa.createDefault(),this.flush()},r.prototype.flush=function(){localStorage.setItem(r.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},r.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",r}(),rf=function(){function r(){this.infoDiv=document.createElement("div")}return r.prototype.renderInto=function(s){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=_a.poweredBy();var a=document.createElement("a");a.innerText="ScanApp",a.href="https://scanapp.org",a.target="new",a.style.color="white",this.infoDiv.appendChild(a);var u=document.createElement("br"),h=document.createElement("br");this.infoDiv.appendChild(u),this.infoDiv.appendChild(h);var d=document.createElement("a");d.innerText=_a.reportIssues(),d.href="https://github.com/mebjas/html5-qrcode/issues",d.target="new",d.style.color="white",this.infoDiv.appendChild(d),s.appendChild(this.infoDiv)},r.prototype.show=function(){this.infoDiv.style.display="block"},r.prototype.hide=function(){this.infoDiv.style.display="none"},r}(),sf=function(){function r(s,a){this.isShowingInfoIcon=!0,this.onTapIn=s,this.onTapOut=a,this.infoIcon=document.createElement("img")}return r.prototype.renderInto=function(s){var a=this;this.infoIcon.alt="Info icon",this.infoIcon.src=Ba,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(u){return a.onHoverIn()},this.infoIcon.onmouseout=function(u){return a.onHoverOut()},this.infoIcon.onclick=function(u){return a.onClick()},s.appendChild(this.infoIcon)},r.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},r.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},r.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=tf,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=Ba,this.infoIcon.style.opacity="0.6")},r}(),of=function(){function r(){var s=this;this.infoDiv=new rf,this.infoIcon=new sf(function(){s.infoDiv.show()},function(){s.infoDiv.hide()})}return r.prototype.renderInto=function(s){this.infoDiv.renderInto(s),this.infoIcon.renderInto(s)},r}(),af=function(r,s,a,u){function h(d){return d instanceof a?d:new a(function(x){x(d)})}return new(a||(a=Promise))(function(d,x){function m(y){try{w(u.next(y))}catch(T){x(T)}}function I(y){try{w(u.throw(y))}catch(T){x(T)}}function w(y){y.done?d(y.value):h(y.value).then(m,I)}w((u=u.apply(r,s||[])).next())})},lf=function(r,s){var a={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},u,h,d,x;return x={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function m(w){return function(y){return I([w,y])}}function I(w){if(u)throw new TypeError("Generator is already executing.");for(;x&&(x=0,w[0]&&(a=0)),a;)try{if(u=1,h&&(d=w[0]&2?h.return:w[0]?h.throw||((d=h.return)&&d.call(h),0):h.next)&&!(d=d.call(h,w[1])).done)return d;switch(h=0,d&&(w=[w[0]&2,d.value]),w[0]){case 0:case 1:d=w;break;case 4:return a.label++,{value:w[1],done:!1};case 5:a.label++,h=w[1],w=[0];continue;case 7:w=a.ops.pop(),a.trys.pop();continue;default:if(d=a.trys,!(d=d.length>0&&d[d.length-1])&&(w[0]===6||w[0]===2)){a=0;continue}if(w[0]===3&&(!d||w[1]>d[0]&&w[1]<d[3])){a.label=w[1];break}if(w[0]===6&&a.label<d[1]){a.label=d[1],d=w;break}if(d&&a.label<d[2]){a.label=d[2],a.ops.push(w);break}d[2]&&a.ops.pop(),a.trys.pop();continue}w=s.call(r,a)}catch(y){w=[6,y],h=0}finally{u=d=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},Fa=function(){function r(){}return r.hasPermissions=function(){return af(this,void 0,void 0,function(){var s,a,u,h;return lf(this,function(d){switch(d.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(s=d.sent(),a=0,u=s;a<u.length;a++)if(h=u[a],h.kind==="videoinput"&&h.label)return[2,!0];return[2,!1]}})})},r}(),Kn=function(){function r(s){this.supportedScanTypes=this.validateAndReturnScanTypes(s)}return r.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},r.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},r.prototype.isCameraScanRequired=function(){for(var s=0,a=this.supportedScanTypes;s<a.length;s++){var u=a[s];if(r.isCameraScanType(u))return!0}return!1},r.isCameraScanType=function(s){return s===ir.SCAN_TYPE_CAMERA},r.isFileScanType=function(s){return s===ir.SCAN_TYPE_FILE},r.prototype.validateAndReturnScanTypes=function(s){if(!s||s.length===0)return cn.DEFAULT_SUPPORTED_SCAN_TYPE;var a=cn.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(s.length>a)throw"Max ".concat(a," values expected for ")+"supportedScanTypes";for(var u=0,h=s;u<h.length;u++){var d=h[u];if(!cn.DEFAULT_SUPPORTED_SCAN_TYPE.includes(d))throw"Unsupported scan type ".concat(d)}return s},r}(),Kt=function(){function r(){}return r.ALL_ELEMENT_CLASS="html5-qrcode-element",r.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",r.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",r.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",r.TORCH_BUTTON_ID="html5-qrcode-button-torch",r.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",r.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",r.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",r.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",r.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",r.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",r}(),Ln=function(){function r(){}return r.createElement=function(s,a){var u=document.createElement(s);return u.id=a,u.classList.add(Kt.ALL_ELEMENT_CLASS),s==="button"&&u.setAttribute("type","button"),u},r}(),Cc=function(r,s,a,u){function h(d){return d instanceof a?d:new a(function(x){x(d)})}return new(a||(a=Promise))(function(d,x){function m(y){try{w(u.next(y))}catch(T){x(T)}}function I(y){try{w(u.throw(y))}catch(T){x(T)}}function w(y){y.done?d(y.value):h(y.value).then(m,I)}w((u=u.apply(r,s||[])).next())})},mc=function(r,s){var a={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},u,h,d,x;return x={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function m(w){return function(y){return I([w,y])}}function I(w){if(u)throw new TypeError("Generator is already executing.");for(;x&&(x=0,w[0]&&(a=0)),a;)try{if(u=1,h&&(d=w[0]&2?h.return:w[0]?h.throw||((d=h.return)&&d.call(h),0):h.next)&&!(d=d.call(h,w[1])).done)return d;switch(h=0,d&&(w=[w[0]&2,d.value]),w[0]){case 0:case 1:d=w;break;case 4:return a.label++,{value:w[1],done:!1};case 5:a.label++,h=w[1],w=[0];continue;case 7:w=a.ops.pop(),a.trys.pop();continue;default:if(d=a.trys,!(d=d.length>0&&d[d.length-1])&&(w[0]===6||w[0]===2)){a=0;continue}if(w[0]===3&&(!d||w[1]>d[0]&&w[1]<d[3])){a.label=w[1];break}if(w[0]===6&&a.label<d[1]){a.label=d[1],d=w;break}if(d&&a.label<d[2]){a.label=d[2],a.ops.push(w);break}d[2]&&a.ops.pop(),a.trys.pop();continue}w=s.call(r,a)}catch(y){w=[6,y],h=0}finally{u=d=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},ka=function(){function r(s,a,u){this.isTorchOn=!1,this.torchCapability=s,this.buttonController=a,this.onTorchActionFailureCallback=u}return r.prototype.isTorchEnabled=function(){return this.isTorchOn},r.prototype.flipState=function(){return Cc(this,void 0,void 0,function(){var s,a;return mc(this,function(u){switch(u.label){case 0:this.buttonController.disable(),s=!this.isTorchOn,u.label=1;case 1:return u.trys.push([1,3,,4]),[4,this.torchCapability.apply(s)];case 2:return u.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),s),[3,4];case 3:return a=u.sent(),this.propagateFailure(s,a),this.buttonController.enable(),[3,4];case 4:return[2]}})})},r.prototype.updateUiBasedOnLatestSettings=function(s,a){s===a?(this.buttonController.setText(a?ze.torchOffButton():ze.torchOnButton()),this.isTorchOn=a):this.propagateFailure(a),this.buttonController.enable()},r.prototype.propagateFailure=function(s,a){var u=s?ze.torchOnFailedMessage():ze.torchOffFailedMessage();a&&(u+="; Error = "+a),this.onTorchActionFailureCallback(u)},r.prototype.reset=function(){this.isTorchOn=!1},r}(),cf=function(){function r(s,a){this.onTorchActionFailureCallback=a,this.torchButton=Ln.createElement("button",Kt.TORCH_BUTTON_ID),this.torchController=new ka(s,this,a)}return r.prototype.render=function(s,a){var u=this;this.torchButton.innerText=ze.torchOnButton(),this.torchButton.style.display=a.display,this.torchButton.style.marginLeft=a.marginLeft;var h=this;this.torchButton.addEventListener("click",function(d){return Cc(u,void 0,void 0,function(){return mc(this,function(x){switch(x.label){case 0:return[4,h.torchController.flipState()];case 1:return x.sent(),h.torchController.isTorchEnabled()?(h.torchButton.classList.remove(Kt.TORCH_BUTTON_CLASS_TORCH_OFF),h.torchButton.classList.add(Kt.TORCH_BUTTON_CLASS_TORCH_ON)):(h.torchButton.classList.remove(Kt.TORCH_BUTTON_CLASS_TORCH_ON),h.torchButton.classList.add(Kt.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),s.appendChild(this.torchButton)},r.prototype.updateTorchCapability=function(s){this.torchController=new ka(s,this,this.onTorchActionFailureCallback)},r.prototype.getTorchButton=function(){return this.torchButton},r.prototype.hide=function(){this.torchButton.style.display="none"},r.prototype.show=function(){this.torchButton.style.display="inline-block"},r.prototype.disable=function(){this.torchButton.disabled=!0},r.prototype.enable=function(){this.torchButton.disabled=!1},r.prototype.setText=function(s){this.torchButton.innerText=s},r.prototype.reset=function(){this.torchButton.innerText=ze.torchOnButton(),this.torchController.reset()},r.create=function(s,a,u,h){var d=new r(a,h);return d.render(s,u),d},r}(),uf=function(){function r(s,a,u){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=a?"block":"none",s.appendChild(this.fileBasedScanRegion);var h=document.createElement("label");h.setAttribute("for",this.getFileScanInputId()),h.style.display="inline-block",this.fileBasedScanRegion.appendChild(h),this.fileSelectionButton=Ln.createElement("button",Kt.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(m){h.click()}),h.append(this.fileSelectionButton),this.fileScanInput=Ln.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",h.appendChild(this.fileScanInput);var d=this;this.fileScanInput.addEventListener("change",function(m){if(!(m==null||m.target==null)){var I=m.target;if(!(I.files&&I.files.length===0)){var w=I.files,y=w[0],T=y.name;d.setImageNameToButton(T),u(y)}}});var x=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(x),this.fileBasedScanRegion.addEventListener("dragenter",function(m){d.fileBasedScanRegion.style.border=d.fileBasedScanRegionActiveBorder(),m.stopPropagation(),m.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(m){d.fileBasedScanRegion.style.border=d.fileBasedScanRegionDefaultBorder(),m.stopPropagation(),m.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(m){d.fileBasedScanRegion.style.border=d.fileBasedScanRegionActiveBorder(),m.stopPropagation(),m.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(m){m.stopPropagation(),m.preventDefault(),d.fileBasedScanRegion.style.border=d.fileBasedScanRegionDefaultBorder();var I=m.dataTransfer;if(I){var w=I.files;if(!w||w.length===0)return;for(var y=!1,T=0;T<w.length;++T){var U=w.item(T);if(U){var H=/image.*/;if(U.type.match(H)){y=!0;var re=U.name;d.setImageNameToButton(re),u(U),x.innerText=ze.dragAndDropMessage();break}}}y||(x.innerText=ze.dragAndDropMessageOnlyImages())}})}return r.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},r.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},r.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},r.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},r.prototype.createFileBasedScanRegion=function(){var s=document.createElement("div");return s.style.textAlign="center",s.style.margin="auto",s.style.width="80%",s.style.maxWidth="600px",s.style.border=this.fileBasedScanRegionDefaultBorder(),s.style.padding="10px",s.style.marginBottom="10px",s},r.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},r.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},r.prototype.createDragAndDropMessage=function(){var s=document.createElement("div");return s.innerText=ze.dragAndDropMessage(),s.style.fontWeight="400",s},r.prototype.setImageNameToButton=function(s){var a=20;if(s.length>a){var u=s.substring(0,8),h=s.length,d=s.substring(h-8,h);s="".concat(u,"....").concat(d)}var x=ze.fileSelectionChooseAnother()+" - "+s;this.fileSelectionButton.innerText=x},r.prototype.setInitialValueToButton=function(){var s=ze.fileSelectionChooseImage()+" - "+ze.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=s},r.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},r.create=function(s,a,u){var h=new r(s,a,u);return h},r}(),ff=function(){function r(s){this.selectElement=Ln.createElement("select",Kt.CAMERA_SELECTION_SELECT_ID),this.cameras=s,this.options=[]}return r.prototype.render=function(s){var a=document.createElement("span");a.style.marginRight="10px";var u=this.cameras.length;if(u===0)throw new Error("No cameras found");if(u===1)a.style.display="none";else{var h=ze.selectCamera();a.innerText="".concat(h," (").concat(this.cameras.length,")  ")}for(var d=1,x=0,m=this.cameras;x<m.length;x++){var I=m[x],w=I.id,y=I.label==null?w:I.label;(!y||y==="")&&(y=[ze.anonymousCameraPrefix(),d++].join(" "));var T=document.createElement("option");T.value=w,T.innerText=y,this.options.push(T),this.selectElement.appendChild(T)}a.appendChild(this.selectElement),s.appendChild(a)},r.prototype.disable=function(){this.selectElement.disabled=!0},r.prototype.isDisabled=function(){return this.selectElement.disabled===!0},r.prototype.enable=function(){this.selectElement.disabled=!1},r.prototype.getValue=function(){return this.selectElement.value},r.prototype.hasValue=function(s){for(var a=0,u=this.options;a<u.length;a++){var h=u[a];if(h.value===s)return!0}return!1},r.prototype.setValue=function(s){if(!this.hasValue(s))throw new Error("".concat(s," is not present in the camera list."));this.selectElement.value=s},r.prototype.hasSingleItem=function(){return this.cameras.length===1},r.prototype.numCameras=function(){return this.cameras.length},r.create=function(s,a){var u=new r(a);return u.render(s),u},r}(),hf=function(){function r(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=Ln.createElement("input",Kt.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return r.prototype.render=function(s,a){this.zoomElementContainer.style.display=a?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",s.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var u=ze.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(u),this.rangeText.style.marginRight="10px";var h=this;this.rangeInput.addEventListener("input",function(){return h.onValueChange()}),this.rangeInput.addEventListener("change",function(){return h.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},r.prototype.onValueChange=function(){var s=ze.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(s),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},r.prototype.setValues=function(s,a,u,h){this.rangeInput.min=s.toString(),this.rangeInput.max=a.toString(),this.rangeInput.step=h.toString(),this.rangeInput.value=u.toString(),this.onValueChange()},r.prototype.show=function(){this.zoomElementContainer.style.display="block"},r.prototype.hide=function(){this.zoomElementContainer.style.display="none"},r.prototype.setOnCameraZoomValueChangeCallback=function(s){this.onChangeCallback=s},r.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},r.create=function(s,a){var u=new r;return u.render(s,a),u},r}(),Zt;(function(r){r[r.STATUS_DEFAULT=0]="STATUS_DEFAULT",r[r.STATUS_SUCCESS=1]="STATUS_SUCCESS",r[r.STATUS_WARNING=2]="STATUS_WARNING",r[r.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Zt||(Zt={}));function df(r){return{fps:r.fps,qrbox:r.qrbox,aspectRatio:r.aspectRatio,disableFlip:r.disableFlip,videoConstraints:r.videoConstraints}}function gf(r,s){return{formatsToSupport:r.formatsToSupport,useBarCodeDetectorIfSupported:r.useBarCodeDetectorIfSupported,experimentalFeatures:r.experimentalFeatures,verbose:s}}var xf=function(){function r(s,a,u){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=s,this.config=this.createConfig(a),this.verbose=u===!0,!document.getElementById(s))throw"HTML Element with id=".concat(s," not found");this.scanTypeSelector=new Kn(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new pc(this.verbose),this.persistedDataManager=new nf,a.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return r.prototype.render=function(s,a){var u=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(d,x){if(s)s(d,x);else{if(u.lastMatchFound===d)return;u.lastMatchFound=d,u.setHeaderMessage(ze.lastMatch(d),Zt.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(d,x){a&&a(d,x)};var h=document.getElementById(this.elementId);if(!h)throw"HTML Element with id=".concat(this.elementId," not found");h.innerHTML="",this.createBasicLayout(h),this.html5Qrcode=new La(this.getScanRegionId(),gf(this.config,this.verbose))},r.prototype.pause=function(s){(bn(s)||s!==!0)&&(s=!1),this.getHtml5QrcodeOrFail().pause(s)},r.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},r.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},r.prototype.clear=function(){var s=this,a=function(){var u=document.getElementById(s.elementId);u&&(u.innerHTML="",s.resetBasicLayout(u))};return this.html5Qrcode?new Promise(function(u,h){if(!s.html5Qrcode){u();return}s.html5Qrcode.isScanning?s.html5Qrcode.stop().then(function(d){if(!s.html5Qrcode){u();return}s.html5Qrcode.clear(),a(),u()}).catch(function(d){s.verbose&&s.logger.logError("Unable to stop qrcode scanner",d),h(d)}):(s.html5Qrcode.clear(),a(),u())}):Promise.resolve()},r.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},r.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},r.prototype.applyVideoConstraints=function(s){return this.getHtml5QrcodeOrFail().applyVideoConstraints(s)},r.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},r.prototype.createConfig=function(s){return s?(s.fps||(s.fps=cn.SCAN_DEFAULT_FPS),s.rememberLastUsedCamera!==!cn.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(s.rememberLastUsedCamera=cn.DEFAULT_REMEMBER_LAST_CAMERA_USED),s.supportedScanTypes||(s.supportedScanTypes=cn.DEFAULT_SUPPORTED_SCAN_TYPE),s):{fps:cn.SCAN_DEFAULT_FPS,rememberLastUsedCamera:cn.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:cn.DEFAULT_SUPPORTED_SCAN_TYPE}},r.prototype.createBasicLayout=function(s){s.style.position="relative",s.style.padding="0px",s.style.border="1px solid silver",this.createHeader(s);var a=document.createElement("div"),u=this.getScanRegionId();a.id=u,a.style.width="100%",a.style.minHeight="100px",a.style.textAlign="center",s.appendChild(a),Kn.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var h=document.createElement("div"),d=this.getDashboardId();h.id=d,h.style.width="100%",s.appendChild(h),this.setupInitialDashboard(h)},r.prototype.resetBasicLayout=function(s){s.style.border="none"},r.prototype.setupInitialDashboard=function(s){this.createSection(s),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},r.prototype.createHeader=function(s){var a=document.createElement("div");a.style.textAlign="left",a.style.margin="0px",s.appendChild(a);var u=new of;u.renderInto(a);var h=document.createElement("div");h.id=this.getHeaderMessageContainerId(),h.style.display="none",h.style.textAlign="center",h.style.fontSize="14px",h.style.padding="2px 10px",h.style.margin="4px",h.style.borderTop="1px solid #f6f6f6",a.appendChild(h)},r.prototype.createSection=function(s){var a=document.createElement("div");a.id=this.getDashboardSectionId(),a.style.width="100%",a.style.padding="10px 0px 10px 0px",a.style.textAlign="left",s.appendChild(a)},r.prototype.createCameraListUi=function(s,a,u){var h=this;h.showHideScanTypeSwapLink(!1),h.setHeaderMessage(ze.cameraPermissionRequesting());var d=function(){u||h.createPermissionButton(s,a)};La.getCameras().then(function(x){h.persistedDataManager.setHasPermission(!0),h.showHideScanTypeSwapLink(!0),h.resetHeaderMessage(),x&&x.length>0?(s.removeChild(a),h.renderCameraSelection(x)):(h.setHeaderMessage(ze.noCameraFound(),Zt.STATUS_WARNING),d())}).catch(function(x){h.persistedDataManager.setHasPermission(!1),u?u.disabled=!1:d(),h.setHeaderMessage(x,Zt.STATUS_WARNING),h.showHideScanTypeSwapLink(!0)})},r.prototype.createPermissionButton=function(s,a){var u=this,h=Ln.createElement("button",this.getCameraPermissionButtonId());h.innerText=ze.cameraPermissionTitle(),h.addEventListener("click",function(){h.disabled=!0,u.createCameraListUi(s,a,h)}),a.appendChild(h)},r.prototype.createPermissionsUi=function(s,a){var u=this;if(Kn.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){Fa.hasPermissions().then(function(h){h?u.createCameraListUi(s,a):(u.persistedDataManager.setHasPermission(!1),u.createPermissionButton(s,a))}).catch(function(h){u.persistedDataManager.setHasPermission(!1),u.createPermissionButton(s,a)});return}this.createPermissionButton(s,a)},r.prototype.createSectionControlPanel=function(){var s=document.getElementById(this.getDashboardSectionId()),a=document.createElement("div");s.appendChild(a);var u=document.createElement("div");u.id=this.getDashboardSectionCameraScanRegionId(),u.style.display=Kn.isCameraScanType(this.currentScanType)?"block":"none",a.appendChild(u);var h=document.createElement("div");h.style.textAlign="center",u.appendChild(h),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(u,h),this.renderFileScanUi(a)},r.prototype.renderFileScanUi=function(s){var a=Kn.isFileScanType(this.currentScanType),u=this,h=function(d){if(!u.html5Qrcode)throw"html5Qrcode not defined";Kn.isFileScanType(u.currentScanType)&&(u.setHeaderMessage(ze.loadingImage()),u.html5Qrcode.scanFileV2(d,!0).then(function(x){u.resetHeaderMessage(),u.qrCodeSuccessCallback(x.decodedText,x)}).catch(function(x){u.setHeaderMessage(x,Zt.STATUS_WARNING),u.qrCodeErrorCallback(x,xc.createFrom(x))}))};this.fileSelectionUi=uf.create(s,a,h)},r.prototype.renderCameraSelection=function(s){var a=this,u=this,h=document.getElementById(this.getDashboardSectionCameraScanRegionId());h.style.textAlign="center";var d=hf.create(h,!1),x=function(J){var Ie=J.zoomFeature();if(Ie.isSupported()){d.setOnCameraZoomValueChangeCallback(function(ce){Ie.apply(ce)});var pe=1;a.config.defaultZoomValueIfSupported&&(pe=a.config.defaultZoomValueIfSupported),pe=vu(pe,Ie.min(),Ie.max()),d.setValues(Ie.min(),Ie.max(),pe,Ie.step()),d.show()}},m=ff.create(h,s),I=document.createElement("span"),w=Ln.createElement("button",Kt.CAMERA_START_BUTTON_ID);w.innerText=ze.scanButtonStartScanningText(),I.appendChild(w);var y=Ln.createElement("button",Kt.CAMERA_STOP_BUTTON_ID);y.innerText=ze.scanButtonStopScanningText(),y.style.display="none",y.disabled=!0,I.appendChild(y);var T,U=function(J){if(!J.torchFeature().isSupported()){T&&T.hide();return}T?T.updateTorchCapability(J.torchFeature()):T=cf.create(I,J.torchFeature(),{display:"none",marginLeft:"5px"},function(Ie){u.setHeaderMessage(Ie,Zt.STATUS_WARNING)}),T.show()};h.appendChild(I);var H=function(J){J||(w.style.display="none"),w.innerText=ze.scanButtonStartScanningText(),w.style.opacity="1",w.disabled=!1,J&&(w.style.display="inline-block")};if(w.addEventListener("click",function(J){w.innerText=ze.scanButtonScanningStarting(),m.disable(),w.disabled=!0,w.style.opacity="0.5",a.scanTypeSelector.hasMoreThanOneScanType()&&u.showHideScanTypeSwapLink(!1),u.resetHeaderMessage();var Ie=m.getValue();u.persistedDataManager.setLastUsedCameraId(Ie),u.html5Qrcode.start(Ie,df(u.config),u.qrCodeSuccessCallback,u.qrCodeErrorCallback).then(function(pe){y.disabled=!1,y.style.display="inline-block",H(!1);var ce=u.html5Qrcode.getRunningTrackCameraCapabilities();a.config.showTorchButtonIfSupported===!0&&U(ce),a.config.showZoomSliderIfSupported===!0&&x(ce)}).catch(function(pe){u.showHideScanTypeSwapLink(!0),m.enable(),H(!0),u.setHeaderMessage(pe,Zt.STATUS_WARNING)})}),m.hasSingleItem()&&w.click(),y.addEventListener("click",function(J){if(!u.html5Qrcode)throw"html5Qrcode not defined";y.disabled=!0,u.html5Qrcode.stop().then(function(Ie){a.scanTypeSelector.hasMoreThanOneScanType()&&u.showHideScanTypeSwapLink(!0),m.enable(),w.disabled=!1,y.style.display="none",w.style.display="inline-block",T&&(T.reset(),T.hide()),d.removeOnCameraZoomValueChangeCallback(),d.hide(),u.insertCameraScanImageToScanRegion()}).catch(function(Ie){y.disabled=!1,u.setHeaderMessage(Ie,Zt.STATUS_WARNING)})}),u.persistedDataManager.getLastUsedCameraId()){var re=u.persistedDataManager.getLastUsedCameraId();m.hasValue(re)?(m.setValue(re),w.click()):u.persistedDataManager.resetLastUsedCameraId()}},r.prototype.createSectionSwap=function(){var s=this,a=ze.textIfCameraScanSelected(),u=ze.textIfFileScanSelected(),h=document.getElementById(this.getDashboardSectionId()),d=document.createElement("div");d.style.textAlign="center";var x=Ln.createElement("span",this.getDashboardSectionSwapLinkId());x.style.textDecoration="underline",x.style.cursor="pointer",x.innerText=Kn.isCameraScanType(this.currentScanType)?a:u,x.addEventListener("click",function(){if(!s.sectionSwapAllowed){s.verbose&&s.logger.logError("Section swap called when not allowed");return}s.resetHeaderMessage(),s.fileSelectionUi.resetValue(),s.sectionSwapAllowed=!1,Kn.isCameraScanType(s.currentScanType)?(s.clearScanRegion(),s.getCameraScanRegion().style.display="none",s.fileSelectionUi.show(),x.innerText=u,s.currentScanType=ir.SCAN_TYPE_FILE,s.insertFileScanImageToScanRegion()):(s.clearScanRegion(),s.getCameraScanRegion().style.display="block",s.fileSelectionUi.hide(),x.innerText=a,s.currentScanType=ir.SCAN_TYPE_CAMERA,s.insertCameraScanImageToScanRegion(),s.startCameraScanIfPermissionExistsOnSwap()),s.sectionSwapAllowed=!0}),d.appendChild(x),h.appendChild(d)},r.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var s=this,a=this;if(this.persistedDataManager.hasCameraPermissions()){Fa.hasPermissions().then(function(u){if(u){var h=document.getElementById(a.getCameraPermissionButtonId());if(!h)throw s.logger.logError("Permission button not found, fail;"),"Permission button not found";h.click()}else a.persistedDataManager.setHasPermission(!1)}).catch(function(u){a.persistedDataManager.setHasPermission(!1)});return}},r.prototype.resetHeaderMessage=function(){var s=document.getElementById(this.getHeaderMessageContainerId());s.style.display="none"},r.prototype.setHeaderMessage=function(s,a){a||(a=Zt.STATUS_DEFAULT);var u=this.getHeaderMessageDiv();switch(u.innerText=s,u.style.display="block",a){case Zt.STATUS_SUCCESS:u.style.background="rgba(106, 175, 80, 0.26)",u.style.color="#477735";break;case Zt.STATUS_WARNING:u.style.background="rgba(203, 36, 49, 0.14)",u.style.color="#cb2431";break;case Zt.STATUS_DEFAULT:default:u.style.background="rgba(0, 0, 0, 0)",u.style.color="rgb(17, 17, 17)";break}},r.prototype.showHideScanTypeSwapLink=function(s){this.scanTypeSelector.hasMoreThanOneScanType()&&(s!==!0&&(s=!1),this.sectionSwapAllowed=s,this.getDashboardSectionSwapLink().style.display=s?"inline-block":"none")},r.prototype.insertCameraScanImageToScanRegion=function(){var s=this,a=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){a.innerHTML="<br>",a.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(u){a.innerHTML="<br>",a.appendChild(s.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=$u,this.cameraScanImage.alt=ze.cameraScanAltText()},r.prototype.insertFileScanImageToScanRegion=function(){var s=this,a=document.getElementById(this.getScanRegionId());if(this.fileScanImage){a.innerHTML="<br>",a.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(u){a.innerHTML="<br>",a.appendChild(s.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=ef,this.fileScanImage.alt=ze.fileScanAltText()},r.prototype.clearScanRegion=function(){var s=document.getElementById(this.getScanRegionId());s.innerHTML=""},r.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},r.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},r.prototype.getDashboardSectionSwapLinkId=function(){return Kt.SCAN_TYPE_CHANGE_ANCHOR_ID},r.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},r.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},r.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},r.prototype.getCameraPermissionButtonId=function(){return Kt.CAMERA_PERMISSION_BUTTON_ID},r.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},r.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},r.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},r}();const to=(r,s)=>s.some(a=>r instanceof a);let Ua,Ha;function pf(){return Ua||(Ua=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function wf(){return Ha||(Ha=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const no=new WeakMap,Hs=new WeakMap,cs=new WeakMap;function Af(r){const s=new Promise((a,u)=>{const h=()=>{r.removeEventListener("success",d),r.removeEventListener("error",x)},d=()=>{a(Cr(r.result)),h()},x=()=>{u(r.error),h()};r.addEventListener("success",d),r.addEventListener("error",x)});return cs.set(s,r),s}function Cf(r){if(no.has(r))return;const s=new Promise((a,u)=>{const h=()=>{r.removeEventListener("complete",d),r.removeEventListener("error",x),r.removeEventListener("abort",x)},d=()=>{a(),h()},x=()=>{u(r.error||new DOMException("AbortError","AbortError")),h()};r.addEventListener("complete",d),r.addEventListener("error",x),r.addEventListener("abort",x)});no.set(r,s)}let ro={get(r,s,a){if(r instanceof IDBTransaction){if(s==="done")return no.get(r);if(s==="store")return a.objectStoreNames[1]?void 0:a.objectStore(a.objectStoreNames[0])}return Cr(r[s])},set(r,s,a){return r[s]=a,!0},has(r,s){return r instanceof IDBTransaction&&(s==="done"||s==="store")?!0:s in r}};function Ec(r){ro=r(ro)}function mf(r){return wf().includes(r)?function(...s){return r.apply(io(this),s),Cr(this.request)}:function(...s){return Cr(r.apply(io(this),s))}}function Ef(r){return typeof r=="function"?mf(r):(r instanceof IDBTransaction&&Cf(r),to(r,pf())?new Proxy(r,ro):r)}function Cr(r){if(r instanceof IDBRequest)return Af(r);if(Hs.has(r))return Hs.get(r);const s=Ef(r);return s!==r&&(Hs.set(r,s),cs.set(s,r)),s}const io=r=>cs.get(r);function If(r,s,{blocked:a,upgrade:u,blocking:h,terminated:d}={}){const x=indexedDB.open(r,s),m=Cr(x);return u&&x.addEventListener("upgradeneeded",I=>{u(Cr(x.result),I.oldVersion,I.newVersion,Cr(x.transaction),I)}),a&&x.addEventListener("blocked",I=>a(I.oldVersion,I.newVersion,I)),m.then(I=>{d&&I.addEventListener("close",()=>d()),h&&I.addEventListener("versionchange",w=>h(w.oldVersion,w.newVersion,w))}).catch(()=>{}),m}const yf=["get","getKey","getAll","getAllKeys","count"],bf=["put","add","delete","clear"],Vs=new Map;function Va(r,s){if(!(r instanceof IDBDatabase&&!(s in r)&&typeof s=="string"))return;if(Vs.get(s))return Vs.get(s);const a=s.replace(/FromIndex$/,""),u=s!==a,h=bf.includes(a);if(!(a in(u?IDBIndex:IDBObjectStore).prototype)||!(h||yf.includes(a)))return;const d=async function(x,...m){const I=this.transaction(x,h?"readwrite":"readonly");let w=I.store;return u&&(w=w.index(m.shift())),(await Promise.all([w[a](...m),h&&I.done]))[0]};return Vs.set(s,d),d}Ec(r=>({...r,get:(s,a,u)=>Va(s,a)||r.get(s,a,u),has:(s,a)=>!!Va(s,a)||r.has(s,a)}));const Sf=["continue","continuePrimaryKey","advance"],ja={},so=new WeakMap,Ic=new WeakMap,Tf={get(r,s){if(!Sf.includes(s))return r[s];let a=ja[s];return a||(a=ja[s]=function(...u){so.set(this,Ic.get(this)[s](...u))}),a}};async function*_f(...r){let s=this;if(s instanceof IDBCursor||(s=await s.openCursor(...r)),!s)return;s=s;const a=new Proxy(s,Tf);for(Ic.set(a,s),cs.set(a,io(s));s;)yield a,s=await(so.get(a)||s.continue()),so.delete(a)}function Ga(r,s){return s===Symbol.asyncIterator&&to(r,[IDBIndex,IDBObjectStore,IDBCursor])||s==="iterate"&&to(r,[IDBIndex,IDBObjectStore])}Ec(r=>({...r,get(s,a,u){return Ga(s,a)?_f:r.get(s,a,u)},has(s,a){return Ga(s,a)||r.has(s,a)}}));const Nf="RecordManagerDB",Of=1,xi="records",_o=If(Nf,Of,{upgrade(r){r.objectStoreNames.contains(xi)||r.createObjectStore(xi,{keyPath:"id",autoIncrement:!0})}});async function Mf(){return(await _o).getAll(xi)}async function Rf(r,s){const a=await _o,u={...r};return s&&(u.image=s),a.add(xi,u)}async function Df(r){return(await _o).delete(xi,r)}var Wa;(function(r){r.STRING="string",r.NUMBER="number",r.INTEGER="integer",r.BOOLEAN="boolean",r.ARRAY="array",r.OBJECT="object"})(Wa||(Wa={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var za;(function(r){r.LANGUAGE_UNSPECIFIED="language_unspecified",r.PYTHON="python"})(za||(za={}));var Ya;(function(r){r.OUTCOME_UNSPECIFIED="outcome_unspecified",r.OUTCOME_OK="outcome_ok",r.OUTCOME_FAILED="outcome_failed",r.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(Ya||(Ya={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xa=["user","model","function","system"];var Za;(function(r){r.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",r.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",r.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",r.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",r.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",r.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(Za||(Za={}));var Ka;(function(r){r.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",r.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",r.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",r.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",r.BLOCK_NONE="BLOCK_NONE"})(Ka||(Ka={}));var Qa;(function(r){r.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",r.NEGLIGIBLE="NEGLIGIBLE",r.LOW="LOW",r.MEDIUM="MEDIUM",r.HIGH="HIGH"})(Qa||(Qa={}));var qa;(function(r){r.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",r.SAFETY="SAFETY",r.OTHER="OTHER"})(qa||(qa={}));var ci;(function(r){r.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",r.STOP="STOP",r.MAX_TOKENS="MAX_TOKENS",r.SAFETY="SAFETY",r.RECITATION="RECITATION",r.LANGUAGE="LANGUAGE",r.BLOCKLIST="BLOCKLIST",r.PROHIBITED_CONTENT="PROHIBITED_CONTENT",r.SPII="SPII",r.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",r.OTHER="OTHER"})(ci||(ci={}));var Ja;(function(r){r.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",r.RETRIEVAL_QUERY="RETRIEVAL_QUERY",r.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",r.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",r.CLASSIFICATION="CLASSIFICATION",r.CLUSTERING="CLUSTERING"})(Ja||(Ja={}));var $a;(function(r){r.MODE_UNSPECIFIED="MODE_UNSPECIFIED",r.AUTO="AUTO",r.ANY="ANY",r.NONE="NONE"})($a||($a={}));var el;(function(r){r.MODE_UNSPECIFIED="MODE_UNSPECIFIED",r.MODE_DYNAMIC="MODE_DYNAMIC"})(el||(el={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot extends Error{constructor(s){super(`[GoogleGenerativeAI Error]: ${s}`)}}class vr extends Ot{constructor(s,a){super(s),this.response=a}}class yc extends Ot{constructor(s,a,u,h){super(s),this.status=a,this.statusText=u,this.errorDetails=h}}class tr extends Ot{}class bc extends Ot{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vf="https://generativelanguage.googleapis.com",Lf="v1beta",Bf="0.24.1",Pf="genai-js";var mr;(function(r){r.GENERATE_CONTENT="generateContent",r.STREAM_GENERATE_CONTENT="streamGenerateContent",r.COUNT_TOKENS="countTokens",r.EMBED_CONTENT="embedContent",r.BATCH_EMBED_CONTENTS="batchEmbedContents"})(mr||(mr={}));class Ff{constructor(s,a,u,h,d){this.model=s,this.task=a,this.apiKey=u,this.stream=h,this.requestOptions=d}toString(){var s,a;const u=((s=this.requestOptions)===null||s===void 0?void 0:s.apiVersion)||Lf;let d=`${((a=this.requestOptions)===null||a===void 0?void 0:a.baseUrl)||vf}/${u}/${this.model}:${this.task}`;return this.stream&&(d+="?alt=sse"),d}}function kf(r){const s=[];return r!=null&&r.apiClient&&s.push(r.apiClient),s.push(`${Pf}/${Bf}`),s.join(" ")}async function Uf(r){var s;const a=new Headers;a.append("Content-Type","application/json"),a.append("x-goog-api-client",kf(r.requestOptions)),a.append("x-goog-api-key",r.apiKey);let u=(s=r.requestOptions)===null||s===void 0?void 0:s.customHeaders;if(u){if(!(u instanceof Headers))try{u=new Headers(u)}catch(h){throw new tr(`unable to convert customHeaders value ${JSON.stringify(u)} to Headers: ${h.message}`)}for(const[h,d]of u.entries()){if(h==="x-goog-api-key")throw new tr(`Cannot set reserved header name ${h}`);if(h==="x-goog-api-client")throw new tr(`Header name ${h} can only be set using the apiClient field`);a.append(h,d)}}return a}async function Hf(r,s,a,u,h,d){const x=new Ff(r,s,a,u,d);return{url:x.toString(),fetchOptions:Object.assign(Object.assign({},Wf(d)),{method:"POST",headers:await Uf(x),body:h})}}async function Ei(r,s,a,u,h,d={},x=fetch){const{url:m,fetchOptions:I}=await Hf(r,s,a,u,h,d);return Vf(m,I,x)}async function Vf(r,s,a=fetch){let u;try{u=await a(r,s)}catch(h){jf(h,r)}return u.ok||await Gf(u,r),u}function jf(r,s){let a=r;throw a.name==="AbortError"?(a=new bc(`Request aborted when fetching ${s.toString()}: ${r.message}`),a.stack=r.stack):r instanceof yc||r instanceof tr||(a=new Ot(`Error fetching from ${s.toString()}: ${r.message}`),a.stack=r.stack),a}async function Gf(r,s){let a="",u;try{const h=await r.json();a=h.error.message,h.error.details&&(a+=` ${JSON.stringify(h.error.details)}`,u=h.error.details)}catch{}throw new yc(`Error fetching from ${s.toString()}: [${r.status} ${r.statusText}] ${a}`,r.status,r.statusText,u)}function Wf(r){const s={};if((r==null?void 0:r.signal)!==void 0||(r==null?void 0:r.timeout)>=0){const a=new AbortController;(r==null?void 0:r.timeout)>=0&&setTimeout(()=>a.abort(),r.timeout),r!=null&&r.signal&&r.signal.addEventListener("abort",()=>{a.abort()}),s.signal=a.signal}return s}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function No(r){return r.text=()=>{if(r.candidates&&r.candidates.length>0){if(r.candidates.length>1&&console.warn(`This response had ${r.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Ui(r.candidates[0]))throw new vr(`${$n(r)}`,r);return zf(r)}else if(r.promptFeedback)throw new vr(`Text not available. ${$n(r)}`,r);return""},r.functionCall=()=>{if(r.candidates&&r.candidates.length>0){if(r.candidates.length>1&&console.warn(`This response had ${r.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Ui(r.candidates[0]))throw new vr(`${$n(r)}`,r);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),tl(r)[0]}else if(r.promptFeedback)throw new vr(`Function call not available. ${$n(r)}`,r)},r.functionCalls=()=>{if(r.candidates&&r.candidates.length>0){if(r.candidates.length>1&&console.warn(`This response had ${r.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Ui(r.candidates[0]))throw new vr(`${$n(r)}`,r);return tl(r)}else if(r.promptFeedback)throw new vr(`Function call not available. ${$n(r)}`,r)},r}function zf(r){var s,a,u,h;const d=[];if(!((a=(s=r.candidates)===null||s===void 0?void 0:s[0].content)===null||a===void 0)&&a.parts)for(const x of(h=(u=r.candidates)===null||u===void 0?void 0:u[0].content)===null||h===void 0?void 0:h.parts)x.text&&d.push(x.text),x.executableCode&&d.push("\n```"+x.executableCode.language+`
`+x.executableCode.code+"\n```\n"),x.codeExecutionResult&&d.push("\n```\n"+x.codeExecutionResult.output+"\n```\n");return d.length>0?d.join(""):""}function tl(r){var s,a,u,h;const d=[];if(!((a=(s=r.candidates)===null||s===void 0?void 0:s[0].content)===null||a===void 0)&&a.parts)for(const x of(h=(u=r.candidates)===null||u===void 0?void 0:u[0].content)===null||h===void 0?void 0:h.parts)x.functionCall&&d.push(x.functionCall);if(d.length>0)return d}const Yf=[ci.RECITATION,ci.SAFETY,ci.LANGUAGE];function Ui(r){return!!r.finishReason&&Yf.includes(r.finishReason)}function $n(r){var s,a,u;let h="";if((!r.candidates||r.candidates.length===0)&&r.promptFeedback)h+="Response was blocked",!((s=r.promptFeedback)===null||s===void 0)&&s.blockReason&&(h+=` due to ${r.promptFeedback.blockReason}`),!((a=r.promptFeedback)===null||a===void 0)&&a.blockReasonMessage&&(h+=`: ${r.promptFeedback.blockReasonMessage}`);else if(!((u=r.candidates)===null||u===void 0)&&u[0]){const d=r.candidates[0];Ui(d)&&(h+=`Candidate was blocked due to ${d.finishReason}`,d.finishMessage&&(h+=`: ${d.finishMessage}`))}return h}function pi(r){return this instanceof pi?(this.v=r,this):new pi(r)}function Xf(r,s,a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var u=a.apply(r,s||[]),h,d=[];return h={},x("next"),x("throw"),x("return"),h[Symbol.asyncIterator]=function(){return this},h;function x(U){u[U]&&(h[U]=function(H){return new Promise(function(re,J){d.push([U,H,re,J])>1||m(U,H)})})}function m(U,H){try{I(u[U](H))}catch(re){T(d[0][3],re)}}function I(U){U.value instanceof pi?Promise.resolve(U.value.v).then(w,y):T(d[0][2],U)}function w(U){m("next",U)}function y(U){m("throw",U)}function T(U,H){U(H),d.shift(),d.length&&m(d[0][0],d[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nl=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function Zf(r){const s=r.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),a=qf(s),[u,h]=a.tee();return{stream:Qf(u),response:Kf(h)}}async function Kf(r){const s=[],a=r.getReader();for(;;){const{done:u,value:h}=await a.read();if(u)return No(Jf(s));s.push(h)}}function Qf(r){return Xf(this,arguments,function*(){const a=r.getReader();for(;;){const{value:u,done:h}=yield pi(a.read());if(h)break;yield yield pi(No(u))}})}function qf(r){const s=r.getReader();return new ReadableStream({start(u){let h="";return d();function d(){return s.read().then(({value:x,done:m})=>{if(m){if(h.trim()){u.error(new Ot("Failed to parse stream"));return}u.close();return}h+=x;let I=h.match(nl),w;for(;I;){try{w=JSON.parse(I[1])}catch{u.error(new Ot(`Error parsing JSON response: "${I[1]}"`));return}u.enqueue(w),h=h.substring(I[0].length),I=h.match(nl)}return d()}).catch(x=>{let m=x;throw m.stack=x.stack,m.name==="AbortError"?m=new bc("Request aborted when reading from the stream"):m=new Ot("Error reading from the stream"),m})}}})}function Jf(r){const s=r[r.length-1],a={promptFeedback:s==null?void 0:s.promptFeedback};for(const u of r){if(u.candidates){let h=0;for(const d of u.candidates)if(a.candidates||(a.candidates=[]),a.candidates[h]||(a.candidates[h]={index:h}),a.candidates[h].citationMetadata=d.citationMetadata,a.candidates[h].groundingMetadata=d.groundingMetadata,a.candidates[h].finishReason=d.finishReason,a.candidates[h].finishMessage=d.finishMessage,a.candidates[h].safetyRatings=d.safetyRatings,d.content&&d.content.parts){a.candidates[h].content||(a.candidates[h].content={role:d.content.role||"user",parts:[]});const x={};for(const m of d.content.parts)m.text&&(x.text=m.text),m.functionCall&&(x.functionCall=m.functionCall),m.executableCode&&(x.executableCode=m.executableCode),m.codeExecutionResult&&(x.codeExecutionResult=m.codeExecutionResult),Object.keys(x).length===0&&(x.text=""),a.candidates[h].content.parts.push(x)}h++}u.usageMetadata&&(a.usageMetadata=u.usageMetadata)}return a}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sc(r,s,a,u){const h=await Ei(s,mr.STREAM_GENERATE_CONTENT,r,!0,JSON.stringify(a),u);return Zf(h)}async function Tc(r,s,a,u){const d=await(await Ei(s,mr.GENERATE_CONTENT,r,!1,JSON.stringify(a),u)).json();return{response:No(d)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _c(r){if(r!=null){if(typeof r=="string")return{role:"system",parts:[{text:r}]};if(r.text)return{role:"system",parts:[r]};if(r.parts)return r.role?r:{role:"system",parts:r.parts}}}function wi(r){let s=[];if(typeof r=="string")s=[{text:r}];else for(const a of r)typeof a=="string"?s.push({text:a}):s.push(a);return $f(s)}function $f(r){const s={role:"user",parts:[]},a={role:"function",parts:[]};let u=!1,h=!1;for(const d of r)"functionResponse"in d?(a.parts.push(d),h=!0):(s.parts.push(d),u=!0);if(u&&h)throw new Ot("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!u&&!h)throw new Ot("No content is provided for sending chat message.");return u?s:a}function eh(r,s){var a;let u={model:s==null?void 0:s.model,generationConfig:s==null?void 0:s.generationConfig,safetySettings:s==null?void 0:s.safetySettings,tools:s==null?void 0:s.tools,toolConfig:s==null?void 0:s.toolConfig,systemInstruction:s==null?void 0:s.systemInstruction,cachedContent:(a=s==null?void 0:s.cachedContent)===null||a===void 0?void 0:a.name,contents:[]};const h=r.generateContentRequest!=null;if(r.contents){if(h)throw new tr("CountTokensRequest must have one of contents or generateContentRequest, not both.");u.contents=r.contents}else if(h)u=Object.assign(Object.assign({},u),r.generateContentRequest);else{const d=wi(r);u.contents=[d]}return{generateContentRequest:u}}function rl(r){let s;return r.contents?s=r:s={contents:[wi(r)]},r.systemInstruction&&(s.systemInstruction=_c(r.systemInstruction)),s}function th(r){return typeof r=="string"||Array.isArray(r)?{content:wi(r)}:r}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const il=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],nh={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function rh(r){let s=!1;for(const a of r){const{role:u,parts:h}=a;if(!s&&u!=="user")throw new Ot(`First content should be with role 'user', got ${u}`);if(!Xa.includes(u))throw new Ot(`Each item should include role field. Got ${u} but valid roles are: ${JSON.stringify(Xa)}`);if(!Array.isArray(h))throw new Ot("Content should have 'parts' property with an array of Parts");if(h.length===0)throw new Ot("Each Content should have at least one part");const d={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const m of h)for(const I of il)I in m&&(d[I]+=1);const x=nh[u];for(const m of il)if(!x.includes(m)&&d[m]>0)throw new Ot(`Content with role '${u}' can't contain '${m}' part`);s=!0}}function sl(r){var s;if(r.candidates===void 0||r.candidates.length===0)return!1;const a=(s=r.candidates[0])===null||s===void 0?void 0:s.content;if(a===void 0||a.parts===void 0||a.parts.length===0)return!1;for(const u of a.parts)if(u===void 0||Object.keys(u).length===0||u.text!==void 0&&u.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ol="SILENT_ERROR";class ih{constructor(s,a,u,h={}){this.model=a,this.params=u,this._requestOptions=h,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=s,u!=null&&u.history&&(rh(u.history),this._history=u.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(s,a={}){var u,h,d,x,m,I;await this._sendPromise;const w=wi(s),y={safetySettings:(u=this.params)===null||u===void 0?void 0:u.safetySettings,generationConfig:(h=this.params)===null||h===void 0?void 0:h.generationConfig,tools:(d=this.params)===null||d===void 0?void 0:d.tools,toolConfig:(x=this.params)===null||x===void 0?void 0:x.toolConfig,systemInstruction:(m=this.params)===null||m===void 0?void 0:m.systemInstruction,cachedContent:(I=this.params)===null||I===void 0?void 0:I.cachedContent,contents:[...this._history,w]},T=Object.assign(Object.assign({},this._requestOptions),a);let U;return this._sendPromise=this._sendPromise.then(()=>Tc(this._apiKey,this.model,y,T)).then(H=>{var re;if(sl(H.response)){this._history.push(w);const J=Object.assign({parts:[],role:"model"},(re=H.response.candidates)===null||re===void 0?void 0:re[0].content);this._history.push(J)}else{const J=$n(H.response);J&&console.warn(`sendMessage() was unsuccessful. ${J}. Inspect response object for details.`)}U=H}).catch(H=>{throw this._sendPromise=Promise.resolve(),H}),await this._sendPromise,U}async sendMessageStream(s,a={}){var u,h,d,x,m,I;await this._sendPromise;const w=wi(s),y={safetySettings:(u=this.params)===null||u===void 0?void 0:u.safetySettings,generationConfig:(h=this.params)===null||h===void 0?void 0:h.generationConfig,tools:(d=this.params)===null||d===void 0?void 0:d.tools,toolConfig:(x=this.params)===null||x===void 0?void 0:x.toolConfig,systemInstruction:(m=this.params)===null||m===void 0?void 0:m.systemInstruction,cachedContent:(I=this.params)===null||I===void 0?void 0:I.cachedContent,contents:[...this._history,w]},T=Object.assign(Object.assign({},this._requestOptions),a),U=Sc(this._apiKey,this.model,y,T);return this._sendPromise=this._sendPromise.then(()=>U).catch(H=>{throw new Error(ol)}).then(H=>H.response).then(H=>{if(sl(H)){this._history.push(w);const re=Object.assign({},H.candidates[0].content);re.role||(re.role="model"),this._history.push(re)}else{const re=$n(H);re&&console.warn(`sendMessageStream() was unsuccessful. ${re}. Inspect response object for details.`)}}).catch(H=>{H.message!==ol&&console.error(H)}),U}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sh(r,s,a,u){return(await Ei(s,mr.COUNT_TOKENS,r,!1,JSON.stringify(a),u)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oh(r,s,a,u){return(await Ei(s,mr.EMBED_CONTENT,r,!1,JSON.stringify(a),u)).json()}async function ah(r,s,a,u){const h=a.requests.map(x=>Object.assign(Object.assign({},x),{model:s}));return(await Ei(s,mr.BATCH_EMBED_CONTENTS,r,!1,JSON.stringify({requests:h}),u)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(s,a,u={}){this.apiKey=s,this._requestOptions=u,a.model.includes("/")?this.model=a.model:this.model=`models/${a.model}`,this.generationConfig=a.generationConfig||{},this.safetySettings=a.safetySettings||[],this.tools=a.tools,this.toolConfig=a.toolConfig,this.systemInstruction=_c(a.systemInstruction),this.cachedContent=a.cachedContent}async generateContent(s,a={}){var u;const h=rl(s),d=Object.assign(Object.assign({},this._requestOptions),a);return Tc(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(u=this.cachedContent)===null||u===void 0?void 0:u.name},h),d)}async generateContentStream(s,a={}){var u;const h=rl(s),d=Object.assign(Object.assign({},this._requestOptions),a);return Sc(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(u=this.cachedContent)===null||u===void 0?void 0:u.name},h),d)}startChat(s){var a;return new ih(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(a=this.cachedContent)===null||a===void 0?void 0:a.name},s),this._requestOptions)}async countTokens(s,a={}){const u=eh(s,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),h=Object.assign(Object.assign({},this._requestOptions),a);return sh(this.apiKey,this.model,u,h)}async embedContent(s,a={}){const u=th(s),h=Object.assign(Object.assign({},this._requestOptions),a);return oh(this.apiKey,this.model,u,h)}async batchEmbedContents(s,a={}){const u=Object.assign(Object.assign({},this._requestOptions),a);return ah(this.apiKey,this.model,s,u)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(s){this.apiKey=s}getGenerativeModel(s,a){if(!s.model)throw new Ot("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new al(this.apiKey,s,a)}getGenerativeModelFromCachedContent(s,a,u){if(!s.name)throw new tr("Cached content must contain a `name` field.");if(!s.model)throw new tr("Cached content must contain a `model` field.");const h=["model","systemInstruction"];for(const x of h)if(a!=null&&a[x]&&s[x]&&(a==null?void 0:a[x])!==s[x]){if(x==="model"){const m=a.model.startsWith("models/")?a.model.replace("models/",""):a.model,I=s.model.startsWith("models/")?s.model.replace("models/",""):s.model;if(m===I)continue}throw new tr(`Different value for "${x}" specified in modelParams (${a[x]}) and cachedContent (${s[x]})`)}const d=Object.assign(Object.assign({},a),{model:s.model,tools:s.tools,toolConfig:s.toolConfig,systemInstruction:s.systemInstruction,cachedContent:s});return new al(this.apiKey,d,u)}}const ch={class:"container mx-auto p-6 max-w-3xl"},uh={class:"mb-8 flex justify-between items-center border-b border-gray-700 pb-4"},fh={class:"flex items-center gap-4"},hh={class:"text-sm"},dh={key:0,class:"mb-8 bg-gray-800 p-4 rounded border border-gray-600"},gh={class:"flex gap-2"},xh={class:"mb-8 grid grid-cols-1 md:grid-cols-2 gap-4"},ph={class:"flex gap-2"},wh={key:1,id:"reader",class:"mb-8 bg-black rounded overflow-hidden shadow-lg"},Ah={key:0,class:"absolute inset-0 bg-gray-900/80 z-10 flex items-center justify-center text-emerald-400 font-bold rounded"},Ch={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},mh={class:"space-y-4"},Eh={class:"space-y-4"},Ih={class:"flex items-center gap-2"},yh={class:"bg-gray-600 hover:bg-gray-500 px-3 py-2 rounded cursor-pointer text-sm flex-1 text-center transition"},bh={key:0,class:"w-10 h-10 rounded overflow-hidden border border-gray-500"},Sh=["src"],Th={class:"space-y-3"},_h={key:0,class:"text-center text-gray-500 py-8"},Nh={class:"w-16 h-16 bg-gray-900 rounded flex-shrink-0 overflow-hidden border border-gray-700"},Oh=["src"],Mh={key:1,class:"w-full h-full flex items-center justify-center text-2xl"},Rh={class:"flex-1 min-w-0"},Dh={class:"font-bold text-lg truncate"},vh={class:"text-gray-400 text-sm truncate"},Lh={key:0},Bh={class:"text-xs text-gray-500 mt-1 font-mono tracking-wider flex items-center gap-2"},Ph={key:0},Fh={class:"text-xs font-bold px-2 py-0.5 rounded bg-gray-700 border border-gray-600"},kh=["onClick"],Uh={__name:"App",setup(r){const s=En([]),a=En(""),u=En(!1),h=En(!1),d=En(!1),x=En({title:"",artist:"",type:"Vinyl",catalog:"",barcode:""}),m=En(null),I=En(null),w=En(localStorage.getItem("gemini_api_key")||""),y=En(!1),T=()=>{localStorage.setItem("gemini_api_key",w.value),y.value=!1,alert("API Key ")},U=async k=>{if(!w.value){alert("   Gemini API Key  AI "),y.value=!0;return}d.value=!0;try{const V=new lh(w.value).getGenerativeModel({model:"gemini-1.5-flash"}),gt=await new Promise(_e=>{const se=new FileReader;se.onloadend=()=>_e(se.result.split(",")[1]),se.readAsDataURL(k)}),Xe=(await(await V.generateContent([`Analyze this image of a music album (cover or back). 
    Extract the following details and return them in STRICT JSON format:
    {
      "artist": "Artist Name",
      "title": "Album Title",
      "catalog": "Catalog Number (if visible)",
      "barcode": "Barcode Number (if visible)",
      "type": "Vinyl or CD or Cassette (guess based on shape/spine)"
    }
    If you can't find specific info, leave it empty string. Do not use code blocks.`,{inlineData:{data:gt,mimeType:k.type}}])).response).text().replace(/```json|```/g,"").trim(),L=JSON.parse(Xe);L.title&&(x.value.title=L.title),L.artist&&(x.value.artist=L.artist),L.catalog&&(x.value.catalog=L.catalog),L.barcode&&(x.value.barcode=L.barcode),L.type&&(x.value.type=L.type),alert(` AI 
: ${L.artist}
: ${L.title}`)}catch(K){console.error(K),alert("AI : "+K.message)}finally{d.value=!1}};Gl(async()=>{try{s.value=await Mf()}catch(k){console.error("Failed to load records:",k)}});const H=hc(()=>{const k=a.value.toLowerCase();return s.value.filter(K=>K.title.toLowerCase().includes(k)||K.artist.toLowerCase().includes(k)||K.catalog.toLowerCase().includes(k)||K.barcode.includes(k))}),re=k=>k?URL.createObjectURL(k):null,J=k=>{const K=k.target.files[0];K&&(m.value=K,I.value=URL.createObjectURL(K),w.value&&confirm(" AI ")&&U(K))},Ie=async()=>{if(x.value.title)try{const k=await Rf(x.value,m.value),K={...x.value,id:k,image:m.value};s.value.push(K),x.value={title:"",artist:"",type:"Vinyl",catalog:"",barcode:""},m.value=null,I.value=null}catch(k){alert(": "+k.message)}},pe=async k=>{confirm("")&&(await Df(k),s.value=s.value.filter(K=>K.id!==k))},ce=async(k,K)=>{var gt,it,he,Re,Xe,L,_e;h.value=!0;let V="";K==="barcode"?V=`barcode:${k}`:K==="text"&&(V=`release:${k} OR artist:${k}`);try{const De=await(await fetch(`https://musicbrainz.org/ws/2/release/?query=${encodeURIComponent(V)}&fmt=json`,{headers:{"User-Agent":"VinylManagerDemo/0.1 ( littlegray666@example.com )"}})).json();if(De.releases&&De.releases.length>0){const lt=De.releases[0];x.value.title=lt.title,x.value.artist=((it=(gt=lt["artist-credit"])==null?void 0:gt[0])==null?void 0:it.name)||"Unknown",x.value.catalog=((Re=(he=lt["label-info"])==null?void 0:he[0])==null?void 0:Re["catalog-number"])||"",K==="barcode"&&(x.value.barcode=k);const pt=((_e=(L=(Xe=lt.media)==null?void 0:Xe[0])==null?void 0:L.format)==null?void 0:_e.toLowerCase())||"";pt.includes("vinyl")||pt.includes("record")?x.value.type="Vinyl":pt.includes("cd")||pt.includes("compact")?x.value.type="CD":pt.includes("cassette")&&(x.value.type="Cassette"),alert(` 
${lt.title} - ${x.value.artist}`)}else alert(" ")}catch(se){console.error(se),alert(" ")}finally{h.value=!1}},ne=async(k,K)=>{if(K==="image"){alert(" ");return}await ce(k,K)},te=k=>{x.value.barcode=k,u.value=!1,ne(k,"barcode")},Ue=()=>{u.value=!u.value,u.value&&setTimeout(()=>{new xf("reader",{fps:10,qrbox:250}).render(te)},100)},Te=()=>{if(!x.value.title)return alert("");ne(x.value.title,"text")};return(k,K)=>(zt(),nn("div",ch,[me("header",uh,[K[8]||(K[8]=me("h1",{class:"text-2xl font-bold text-emerald-400"},[Fi("  "),me("span",{class:"text-xs text-gray-500"},"v0.4 (AI)")],-1)),me("div",fh,[me("button",{onClick:K[0]||(K[0]=V=>y.value=!y.value),class:"text-gray-400 hover:text-white transition"},"   "),me("div",hh,"Total: "+Mn(s.value.length),1)])]),y.value?(zt(),nn("div",dh,[K[9]||(K[9]=me("h3",{class:"font-bold mb-2"}," Gemini API Key",-1)),me("div",gh,[fr(me("input",{type:"password","onUpdate:modelValue":K[1]||(K[1]=V=>w.value=V),placeholder:" API Key (AI )",class:"bg-gray-700 p-2 rounded flex-1 text-white"},null,512),[[Dr,w.value]]),me("button",{onClick:T,class:"bg-blue-600 hover:bg-blue-500 px-4 rounded font-bold"},"")]),K[10]||(K[10]=me("p",{class:"text-xs text-gray-500 mt-2"},"Key ",-1))])):gr("",!0),me("div",xh,[fr(me("input",{"onUpdate:modelValue":K[2]||(K[2]=V=>a.value=V),placeholder:"   /  /  / ...",class:"bg-gray-800 border border-gray-700 rounded p-2 text-white w-full"},null,512),[[Dr,a.value]]),me("div",ph,[me("button",{onClick:Ue,class:"bg-blue-600 hover:bg-blue-500 px-4 py-2 rounded text-sm w-full transition"},Mn(u.value?"":" "),1),K[11]||(K[11]=me("button",{class:"bg-purple-600/50 cursor-not-allowed px-4 py-2 rounded text-sm w-full transition text-gray-400"},"   (WIP) ",-1))])]),u.value?(zt(),nn("div",wh)):gr("",!0),me("form",{onSubmit:Tu(Ie,["prevent"]),class:"bg-gray-800 p-4 rounded mb-8 border border-gray-700 relative"},[h.value||d.value?(zt(),nn("div",Ah,Mn(d.value?" AI ...":"..."),1)):gr("",!0),me("div",{class:"flex justify-between items-center mb-4"},[K[12]||(K[12]=me("h3",{class:"font-bold text-gray-300"}," ",-1)),me("button",{type:"button",onClick:Te,class:"text-xs bg-gray-700 hover:bg-gray-600 px-2 py-1 rounded text-emerald-400"},"   ")]),me("div",Ch,[me("div",mh,[fr(me("input",{"onUpdate:modelValue":K[3]||(K[3]=V=>x.value.title=V),placeholder:" ()",class:"bg-gray-700 p-2 rounded w-full focus:ring-2 ring-emerald-500 outline-none",required:""},null,512),[[Dr,x.value.title]]),fr(me("input",{"onUpdate:modelValue":K[4]||(K[4]=V=>x.value.artist=V),placeholder:"",class:"bg-gray-700 p-2 rounded w-full focus:ring-2 ring-emerald-500 outline-none"},null,512),[[Dr,x.value.artist]]),fr(me("input",{"onUpdate:modelValue":K[5]||(K[5]=V=>x.value.catalog=V),placeholder:" (Catalog No.)",class:"bg-gray-700 p-2 rounded w-full focus:ring-2 ring-emerald-500 outline-none"},null,512),[[Dr,x.value.catalog]])]),me("div",Eh,[fr(me("input",{"onUpdate:modelValue":K[6]||(K[6]=V=>x.value.barcode=V),placeholder:" ()",class:"bg-gray-700 p-2 rounded w-full focus:ring-2 ring-emerald-500 outline-none"},null,512),[[Dr,x.value.barcode]]),fr(me("select",{"onUpdate:modelValue":K[7]||(K[7]=V=>x.value.type=V),class:"bg-gray-700 p-2 rounded w-full focus:ring-2 ring-emerald-500 outline-none"},[...K[13]||(K[13]=[me("option",null,"Vinyl",-1),me("option",null,"CD",-1),me("option",null,"Cassette",-1)])],512),[[yu,x.value.type]]),me("div",Ih,[me("label",yh,[K[14]||(K[14]=Fi("   ",-1)),me("input",{type:"file",onChange:J,class:"hidden",accept:"image/*"},null,32)]),I.value?(zt(),nn("div",bh,[me("img",{src:I.value,class:"w-full h-full object-cover"},null,8,Sh)])):gr("",!0)])])]),K[15]||(K[15]=me("button",{class:"bg-emerald-600 hover:bg-emerald-500 w-full py-2 rounded font-bold transition shadow-lg shadow-emerald-900/50"},"  ",-1))],32),me("div",Th,[H.value.length===0?(zt(),nn("div",_h,"  ")):gr("",!0),(zt(!0),nn(un,null,x0(H.value,V=>(zt(),nn("div",{key:V.id,class:ts(["bg-gray-800 p-4 rounded flex gap-4 items-start border-l-4 hover:bg-gray-750 transition relative group",V.type==="Vinyl"?"border-orange-500":"border-blue-500"])},[me("div",Nh,[V.image?(zt(),nn("img",{key:0,src:re(V.image),class:"w-full h-full object-cover"},null,8,Oh)):(zt(),nn("div",Mh,""))]),me("div",Rh,[me("div",Dh,Mn(V.title),1),me("div",vh,[Fi(Mn(V.artist)+" ",1),V.catalog?(zt(),nn("span",Lh," "+Mn(V.catalog),1)):gr("",!0)]),me("div",Bh,[V.barcode?(zt(),nn("span",Ph,"BAR: "+Mn(V.barcode),1)):gr("",!0),me("span",Fh,Mn(V.type),1)])]),me("button",{onClick:gt=>pe(V.id),class:"text-gray-600 hover:text-red-400 p-2 absolute top-2 right-2 group-hover:opacity-100 opacity-0 transition"},"  ",8,kh)],2))),128))])]))}};Ou(Uh).mount("#app");
